shadow$provide.module$node_modules$rc_picker$lib$PickerInput$hooks$useRangePickerValue=function(global,require,module,exports){function offsetPanelDate(generateConfig,picker,date,offset){switch(picker){case "date":case "week":return generateConfig.addMonth(date,offset);case "month":case "quarter":return generateConfig.addYear(date,offset);case "year":return generateConfig.addYear(date,10*offset);case "decade":return generateConfig.addYear(date,100*offset);default:return date}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard").default;
module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(generateConfig,locale,calendarValue,modes,open,activeIndex,pickerMode,multiplePanel){var defaultPickerValue=8<arguments.length&&void 0!==arguments[8]?arguments[8]:EMPTY_LIST,timeDefaultValue=10<arguments.length&&void 0!==arguments[10]?arguments[10]:EMPTY_LIST,onPickerValueChange=11<arguments.length?arguments[11]:void 0,minDate=12<
arguments.length?arguments[12]:void 0,maxDate=13<arguments.length?arguments[13]:void 0,isTimePicker="time"===pickerMode,mergedActiveIndex=activeIndex||0,getDefaultPickerValue=function(index){var now=generateConfig.getNow();isTimePicker&&(now=(0,_dateUtil.fillTime)(generateConfig,now));return defaultPickerValue[index]||calendarValue[index]||now},_pickerValue=(0,_slicedToArray2.default)(9<arguments.length&&void 0!==arguments[9]?arguments[9]:EMPTY_LIST,2),endPickerValue=_pickerValue[1];_pickerValue=
(0,_rcUtil.useMergedState)(function(){return getDefaultPickerValue(0)},{value:_pickerValue[0]});_pickerValue=(0,_slicedToArray2.default)(_pickerValue,2);var mergedStartPickerValue=_pickerValue[0],setStartPickerValue=_pickerValue[1];endPickerValue=(0,_rcUtil.useMergedState)(function(){return getDefaultPickerValue(1)},{value:endPickerValue});endPickerValue=(0,_slicedToArray2.default)(endPickerValue,2);var mergedEndPickerValue=endPickerValue[0],setEndPickerValue=endPickerValue[1];endPickerValue=React.useMemo(function(){var current=
[mergedStartPickerValue,mergedEndPickerValue][mergedActiveIndex];return isTimePicker?current:(0,_dateUtil.fillTime)(generateConfig,current,timeDefaultValue[mergedActiveIndex])},[isTimePicker,mergedStartPickerValue,mergedEndPickerValue,mergedActiveIndex,generateConfig,timeDefaultValue]);var setCurrentPickerValue=function(nextPickerValue){var source=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"panel";(0,[setStartPickerValue,setEndPickerValue][mergedActiveIndex])(nextPickerValue);var clone=
[mergedStartPickerValue,mergedEndPickerValue];clone[mergedActiveIndex]=nextPickerValue;!onPickerValueChange||(0,_dateUtil.isSame)(generateConfig,locale,mergedStartPickerValue,clone[0],pickerMode)&&(0,_dateUtil.isSame)(generateConfig,locale,mergedEndPickerValue,clone[1],pickerMode)||onPickerValueChange(clone,{source,range:1===mergedActiveIndex?"end":"start",mode:modes})},prevActiveIndexRef=React.useRef(null);(0,_useLayoutEffect.default)(function(){if(open&&!defaultPickerValue[mergedActiveIndex]){var nextPickerValue=
isTimePicker?null:generateConfig.getNow();if(null!==prevActiveIndexRef.current&&prevActiveIndexRef.current!==mergedActiveIndex)nextPickerValue=[mergedStartPickerValue,mergedEndPickerValue][mergedActiveIndex^1];else if(calendarValue[mergedActiveIndex])if(0===mergedActiveIndex)nextPickerValue=calendarValue[0];else{var startDate=calendarValue[0];nextPickerValue=calendarValue[1];if(multiplePanel){var mode={date:"month",week:"month",month:"year",quarter:"year"}[pickerMode];mode&&!(0,_dateUtil.isSame)(generateConfig,
locale,startDate,nextPickerValue,mode)?nextPickerValue=offsetPanelDate(generateConfig,pickerMode,nextPickerValue,-1):"year"===pickerMode&&startDate&&(startDate=Math.floor(generateConfig.getYear(startDate)/10),mode=Math.floor(generateConfig.getYear(nextPickerValue)/10),startDate!==mode&&(nextPickerValue=offsetPanelDate(generateConfig,pickerMode,nextPickerValue,-1)))}}else calendarValue[mergedActiveIndex^1]&&(nextPickerValue=calendarValue[mergedActiveIndex^1]);nextPickerValue&&(minDate&&generateConfig.isAfter(minDate,
nextPickerValue)&&(nextPickerValue=minDate),startDate=multiplePanel?offsetPanelDate(generateConfig,pickerMode,nextPickerValue,1):nextPickerValue,maxDate&&generateConfig.isAfter(startDate,maxDate)&&(nextPickerValue=multiplePanel?offsetPanelDate(generateConfig,pickerMode,maxDate,-1):maxDate),setCurrentPickerValue(nextPickerValue,"reset"))}},[open,mergedActiveIndex,calendarValue[mergedActiveIndex]]);React.useEffect(function(){prevActiveIndexRef.current=open?mergedActiveIndex:null},[open,mergedActiveIndex]);
(0,_useLayoutEffect.default)(function(){open&&defaultPickerValue&&defaultPickerValue[mergedActiveIndex]&&setCurrentPickerValue(defaultPickerValue[mergedActiveIndex],"reset")},[open,mergedActiveIndex]);return[endPickerValue,setCurrentPickerValue]};exports.offsetPanelDate=offsetPanelDate;var _slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_rcUtil=require("module$node_modules$rc_util$lib$index"),_useLayoutEffect=module(require("module$node_modules$rc_util$lib$hooks$useLayoutEffect")),
React=global(require("module$node_modules$react$index")),_dateUtil=require("module$node_modules$rc_picker$lib$utils$dateUtil"),EMPTY_LIST=[]}
//# sourceMappingURL=module$node_modules$rc_picker$lib$PickerInput$hooks$useRangePickerValue.js.map
