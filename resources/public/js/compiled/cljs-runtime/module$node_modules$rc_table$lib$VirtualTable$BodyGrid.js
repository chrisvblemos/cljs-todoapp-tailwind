shadow$provide.module$node_modules$rc_table$lib$VirtualTable$BodyGrid=function(global,require,module,exports){function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof3(e)&&"function"!=typeof e)return{default:e};if((r=_getRequireWildcardCache(r))&&r.has(e))return r.get(e);var n={__proto__:null},
a=Object.defineProperty&&Object.getOwnPropertyDescriptor,u;for(u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");var _typeof3=require("module$node_modules$$babel$runtime$helpers$typeof");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=
void 0;var _typeof2=global(require("module$node_modules$$babel$runtime$helpers$typeof")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_context=require("module$node_modules$$rc_component$context$lib$index"),_rcVirtualList=global(require("module$node_modules$rc_virtual_list$lib$index")),React=_interopRequireWildcard(require("module$node_modules$react$index")),_TableContext=_interopRequireWildcard(require("module$node_modules$rc_table$lib$context$TableContext")),
_useFlattenRecords=global(require("module$node_modules$rc_table$lib$hooks$useFlattenRecords")),_BodyLine=global(require("module$node_modules$rc_table$lib$VirtualTable$BodyLine")),_context2=require("module$node_modules$rc_table$lib$VirtualTable$context");require=React.forwardRef(function(props,ref){var data=props.data,onScroll=props.onScroll,_useContext=(0,_context.useContext)(_TableContext.default,"flattenColumns onColumnResize getRowKey prefixCls expandedKeys childrenColumnName scrollX direction".split(" ")),
flattenColumns=_useContext.flattenColumns,onColumnResize=_useContext.onColumnResize,getRowKey=_useContext.getRowKey,expandedKeys=_useContext.expandedKeys,prefixCls=_useContext.prefixCls,childrenColumnName=_useContext.childrenColumnName;props=_useContext.scrollX;_useContext=_useContext.direction;var _useContext2=(0,_context.useContext)(_context2.StaticContext),sticky=_useContext2.sticky,scrollY=_useContext2.scrollY,listItemHeight=_useContext2.listItemHeight,getComponent=_useContext2.getComponent;_useContext2=
_useContext2.onScroll;var listRef=React.useRef(),flattenData=(0,_useFlattenRecords.default)(data,childrenColumnName,expandedKeys,getRowKey),columnsWidth=React.useMemo(function(){var total=0;return flattenColumns.map(function(_ref){var width=_ref.width;_ref=_ref.key;total+=width;return[_ref,width,total]})},[flattenColumns]),columnsOffset=React.useMemo(function(){return columnsWidth.map(function(colWidth){return colWidth[2]})},[columnsWidth]);React.useEffect(function(){columnsWidth.forEach(function(_ref2){_ref2=
(0,_slicedToArray2.default)(_ref2,2);onColumnResize(_ref2[0],_ref2[1])})},[columnsWidth]);React.useImperativeHandle(ref,function(){var _listRef$current2,obj={scrollTo:function(config){var _listRef$current;null===(_listRef$current=listRef.current)||void 0===_listRef$current||_listRef$current.scrollTo(config)},nativeElement:null===(_listRef$current2=listRef.current)||void 0===_listRef$current2?void 0:_listRef$current2.nativeElement};Object.defineProperty(obj,"scrollLeft",{get:function(){var _listRef$current3;
return(null===(_listRef$current3=listRef.current)||void 0===_listRef$current3?void 0:_listRef$current3.getScrollInfo().x)||0},set:function(value){var _listRef$current4;null===(_listRef$current4=listRef.current)||void 0===_listRef$current4||_listRef$current4.scrollTo({left:value})}});return obj});var getRowSpan=function(column,index){var _flattenData$index,record=null===(_flattenData$index=flattenData[index])||void 0===_flattenData$index?void 0:_flattenData$index.record;if(column=column.onCell){var _cellProps$rowSpan;
index=column(record,index);return null!==(_cellProps$rowSpan=null===index||void 0===index?void 0:index.rowSpan)&&void 0!==_cellProps$rowSpan?_cellProps$rowSpan:1}return 1};ref=React.useMemo(function(){return{columnsOffset}},[columnsOffset]);data="".concat(prefixCls,"-tbody");prefixCls=getComponent(["body","wrapper"]);getComponent={};sticky&&(getComponent.position="sticky",getComponent.bottom=0,"object"===(0,_typeof2.default)(sticky)&&sticky.offsetScroll&&(getComponent.bottom=sticky.offsetScroll));
return React.createElement(_context2.GridContext.Provider,{value:ref},React.createElement(_rcVirtualList.default,{fullHeight:!1,ref:listRef,prefixCls:"".concat(data,"-virtual"),styles:{horizontalScrollBar:getComponent},className:data,height:scrollY,itemHeight:listItemHeight||24,data:flattenData,itemKey:function(item){return getRowKey(item.record)},component:prefixCls,scrollWidth:props,direction:_useContext,onVirtualScroll:function(_ref4){var _listRef$current5;_ref4=_ref4.x;onScroll({currentTarget:null===
(_listRef$current5=listRef.current)||void 0===_listRef$current5?void 0:_listRef$current5.nativeElement,scrollLeft:_ref4})},onScroll:_useContext2,extraRender:function(info){var start=info.start,end=info.end,getSize=info.getSize,offsetY=info.offsetY;if(0>end)return null;var firstRowSpanColumns=flattenColumns.filter(function(column){return 0===getRowSpan(column,start)}),startIndex=start;info=function(i){firstRowSpanColumns=firstRowSpanColumns.filter(function(column){return 0===getRowSpan(column,i)});
if(!firstRowSpanColumns.length)return startIndex=i,1};for(var i=start;0<=i&&!info(i);--i);var lastRowSpanColumns=flattenColumns.filter(function(column){return 1!==getRowSpan(column,end)}),endIndex=end;info=function(_i){lastRowSpanColumns=lastRowSpanColumns.filter(function(column){return 1!==getRowSpan(column,_i)});if(!lastRowSpanColumns.length)return endIndex=Math.max(_i-1,end),1};for(i=end;i<flattenData.length&&!info(i);i+=1);var spanLines=[];info=function(_i2){if(!flattenData[_i2])return 1;flattenColumns.some(function(column){return 1<
getRowSpan(column,_i2)})&&spanLines.push(_i2)};for(i=startIndex;i<=endIndex;i+=1)info(i);return spanLines.map(function(index){var item=flattenData[index],rowKey=getRowKey(item.record,index),sizeInfo=getSize(rowKey);return React.createElement(_BodyLine.default,{key:index,data:item,rowKey,index,style:{top:-offsetY+sizeInfo.top},extra:!0,getHeight:function(rowSpan){rowSpan=index+rowSpan-1;rowSpan=getRowKey(flattenData[rowSpan].record,rowSpan);rowSpan=getSize(rowKey,rowSpan);return rowSpan.bottom-rowSpan.top}})})}},
function(item,index,itemProps){var rowKey=getRowKey(item.record,index);return React.createElement(_BodyLine.default,{data:item,rowKey,index,style:itemProps.style})}))});require=(0,_TableContext.responseImmutable)(require);require.displayName="ResponseGrid";exports.default=require}
//# sourceMappingURL=module$node_modules$rc_table$lib$VirtualTable$BodyGrid.js.map
