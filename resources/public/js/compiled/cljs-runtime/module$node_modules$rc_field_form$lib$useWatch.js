shadow$provide.module$node_modules$rc_field_form$lib$useWatch=function(global,require,module,exports){function stringify(value){try{return JSON.stringify(value)}catch(err){return Math.random()}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard").default;module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;exports.stringify=stringify;var _slicedToArray2=
module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_warning=module(require("module$node_modules$rc_util$lib$warning")),_react=require("module$node_modules$react$index"),_FieldContext=global(require("module$node_modules$rc_field_form$lib$FieldContext")),_typeUtil=require("module$node_modules$rc_field_form$lib$utils$typeUtil"),_valueUtil=require("module$node_modules$rc_field_form$lib$utils$valueUtil"),useWatchWarning=function(namePath){namePath=namePath.join("__RC_FIELD_FORM_SPLIT__");
var nameStrRef=(0,_react.useRef)(namePath);(0,_warning.default)(nameStrRef.current===namePath,"`useWatch` is not support dynamic `namePath`. Please provide static instead.")};exports.default=function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var dependencies=args[0];_len=args[1];_len=void 0===_len?{}:_len;var options=(0,_typeUtil.isFormInstance)(_len)?{form:_len}:_len;_len=options.form;_key=(0,_react.useState)();_key=(0,_slicedToArray2.default)(_key,
2);var value=_key[0],setValue=_key[1];_key=(0,_react.useMemo)(function(){return stringify(value)},[value]);var valueStrRef=(0,_react.useRef)(_key);valueStrRef.current=_key;_key=(0,_react.useContext)(_FieldContext.default);var formInstance=_len||_key,isValidForm=formInstance&&formInstance._init;(0,_warning.default)(2===args.length?_len?isValidForm:!0:isValidForm,"useWatch requires a form instance since it can not auto detect from context.");args=(0,_valueUtil.getNamePath)(dependencies);var namePathRef=
(0,_react.useRef)(args);namePathRef.current=args;useWatchWarning(args);(0,_react.useEffect)(function(){if(isValidForm){var getFieldsValue=formInstance.getFieldsValue,getInternalHooks=formInstance.getInternalHooks;getInternalHooks=getInternalHooks(_FieldContext.HOOK_MARK).registerWatch;var getWatchValue=function(values,allValues){values=options.preserve?allValues:values;return"function"===typeof dependencies?dependencies(values):(0,_valueUtil.getValue)(values,namePathRef.current)};getInternalHooks=
getInternalHooks(function(values,allValues){values=getWatchValue(values,allValues);allValues=stringify(values);valueStrRef.current!==allValues&&(valueStrRef.current=allValues,setValue(values))});getFieldsValue=getWatchValue(getFieldsValue(),getFieldsValue(!0));value!==getFieldsValue&&setValue(getFieldsValue);return getInternalHooks}},[isValidForm]);return value}}
//# sourceMappingURL=module$node_modules$rc_field_form$lib$useWatch.js.map
