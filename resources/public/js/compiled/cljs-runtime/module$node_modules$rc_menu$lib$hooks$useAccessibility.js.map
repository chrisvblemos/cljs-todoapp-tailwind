{
"version":3,
"file":"module$node_modules$rc_menu$lib$hooks$useAccessibility.js",
"lineCount":14,
"mappings":"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",
"sources":["node_modules/rc-menu/lib/hooks/useAccessibility.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_menu$lib$hooks$useAccessibility\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getFocusableElements = getFocusableElements;\nexports.refreshElements = void 0;\nexports.useAccessibility = useAccessibility;\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _focus = require(\"rc-util/lib/Dom/focus\");\nvar _KeyCode = _interopRequireDefault(require(\"rc-util/lib/KeyCode\"));\nvar _raf = _interopRequireDefault(require(\"rc-util/lib/raf\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _IdContext = require(\"../context/IdContext\");\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n// destruct to reduce minify size\nvar LEFT = _KeyCode.default.LEFT,\n  RIGHT = _KeyCode.default.RIGHT,\n  UP = _KeyCode.default.UP,\n  DOWN = _KeyCode.default.DOWN,\n  ENTER = _KeyCode.default.ENTER,\n  ESC = _KeyCode.default.ESC,\n  HOME = _KeyCode.default.HOME,\n  END = _KeyCode.default.END;\nvar ArrowKeys = [UP, DOWN, LEFT, RIGHT];\nfunction getOffset(mode, isRootLevel, isRtl, which) {\n  var _offsets;\n  var prev = 'prev';\n  var next = 'next';\n  var children = 'children';\n  var parent = 'parent';\n\n  // Inline enter is special that we use unique operation\n  if (mode === 'inline' && which === ENTER) {\n    return {\n      inlineTrigger: true\n    };\n  }\n  var inline = (0, _defineProperty2.default)((0, _defineProperty2.default)({}, UP, prev), DOWN, next);\n  var horizontal = (0, _defineProperty2.default)((0, _defineProperty2.default)((0, _defineProperty2.default)((0, _defineProperty2.default)({}, LEFT, isRtl ? next : prev), RIGHT, isRtl ? prev : next), DOWN, children), ENTER, children);\n  var vertical = (0, _defineProperty2.default)((0, _defineProperty2.default)((0, _defineProperty2.default)((0, _defineProperty2.default)((0, _defineProperty2.default)((0, _defineProperty2.default)({}, UP, prev), DOWN, next), ENTER, children), ESC, parent), LEFT, isRtl ? children : parent), RIGHT, isRtl ? parent : children);\n  var offsets = {\n    inline: inline,\n    horizontal: horizontal,\n    vertical: vertical,\n    inlineSub: inline,\n    horizontalSub: vertical,\n    verticalSub: vertical\n  };\n  var type = (_offsets = offsets[\"\".concat(mode).concat(isRootLevel ? '' : 'Sub')]) === null || _offsets === void 0 ? void 0 : _offsets[which];\n  switch (type) {\n    case prev:\n      return {\n        offset: -1,\n        sibling: true\n      };\n    case next:\n      return {\n        offset: 1,\n        sibling: true\n      };\n    case parent:\n      return {\n        offset: -1,\n        sibling: false\n      };\n    case children:\n      return {\n        offset: 1,\n        sibling: false\n      };\n    default:\n      return null;\n  }\n}\nfunction findContainerUL(element) {\n  var current = element;\n  while (current) {\n    if (current.getAttribute('data-menu-list')) {\n      return current;\n    }\n    current = current.parentElement;\n  }\n\n  // Normally should not reach this line\n  /* istanbul ignore next */\n  return null;\n}\n\n/**\n * Find focused element within element set provided\n */\nfunction getFocusElement(activeElement, elements) {\n  var current = activeElement || document.activeElement;\n  while (current) {\n    if (elements.has(current)) {\n      return current;\n    }\n    current = current.parentElement;\n  }\n  return null;\n}\n\n/**\n * Get focusable elements from the element set under provided container\n */\nfunction getFocusableElements(container, elements) {\n  var list = (0, _focus.getFocusNodeList)(container, true);\n  return list.filter(function (ele) {\n    return elements.has(ele);\n  });\n}\nfunction getNextFocusElement(parentQueryContainer, elements, focusMenuElement) {\n  var offset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  // Key on the menu item will not get validate parent container\n  if (!parentQueryContainer) {\n    return null;\n  }\n\n  // List current level menu item elements\n  var sameLevelFocusableMenuElementList = getFocusableElements(parentQueryContainer, elements);\n\n  // Find next focus index\n  var count = sameLevelFocusableMenuElementList.length;\n  var focusIndex = sameLevelFocusableMenuElementList.findIndex(function (ele) {\n    return focusMenuElement === ele;\n  });\n  if (offset < 0) {\n    if (focusIndex === -1) {\n      focusIndex = count - 1;\n    } else {\n      focusIndex -= 1;\n    }\n  } else if (offset > 0) {\n    focusIndex += 1;\n  }\n  focusIndex = (focusIndex + count) % count;\n\n  // Focus menu item\n  return sameLevelFocusableMenuElementList[focusIndex];\n}\nvar refreshElements = exports.refreshElements = function refreshElements(keys, id) {\n  var elements = new Set();\n  var key2element = new Map();\n  var element2key = new Map();\n  keys.forEach(function (key) {\n    var element = document.querySelector(\"[data-menu-id='\".concat((0, _IdContext.getMenuId)(id, key), \"']\"));\n    if (element) {\n      elements.add(element);\n      element2key.set(element, key);\n      key2element.set(key, element);\n    }\n  });\n  return {\n    elements: elements,\n    key2element: key2element,\n    element2key: element2key\n  };\n};\nfunction useAccessibility(mode, activeKey, isRtl, id, containerRef, getKeys, getKeyPath, triggerActiveKey, triggerAccessibilityOpen, originOnKeyDown) {\n  var rafRef = React.useRef();\n  var activeRef = React.useRef();\n  activeRef.current = activeKey;\n  var cleanRaf = function cleanRaf() {\n    _raf.default.cancel(rafRef.current);\n  };\n  React.useEffect(function () {\n    return function () {\n      cleanRaf();\n    };\n  }, []);\n  return function (e) {\n    var which = e.which;\n    if ([].concat(ArrowKeys, [ENTER, ESC, HOME, END]).includes(which)) {\n      var keys = getKeys();\n      var refreshedElements = refreshElements(keys, id);\n      var _refreshedElements = refreshedElements,\n        elements = _refreshedElements.elements,\n        key2element = _refreshedElements.key2element,\n        element2key = _refreshedElements.element2key;\n\n      // First we should find current focused MenuItem/SubMenu element\n      var activeElement = key2element.get(activeKey);\n      var focusMenuElement = getFocusElement(activeElement, elements);\n      var focusMenuKey = element2key.get(focusMenuElement);\n      var offsetObj = getOffset(mode, getKeyPath(focusMenuKey, true).length === 1, isRtl, which);\n\n      // Some mode do not have fully arrow operation like inline\n      if (!offsetObj && which !== HOME && which !== END) {\n        return;\n      }\n\n      // Arrow prevent default to avoid page scroll\n      if (ArrowKeys.includes(which) || [HOME, END].includes(which)) {\n        e.preventDefault();\n      }\n      var tryFocus = function tryFocus(menuElement) {\n        if (menuElement) {\n          var focusTargetElement = menuElement;\n\n          // Focus to link instead of menu item if possible\n          var link = menuElement.querySelector('a');\n          if (link !== null && link !== void 0 && link.getAttribute('href')) {\n            focusTargetElement = link;\n          }\n          var targetKey = element2key.get(menuElement);\n          triggerActiveKey(targetKey);\n\n          /**\n           * Do not `useEffect` here since `tryFocus` may trigger async\n           * which makes React sync update the `activeKey`\n           * that force render before `useRef` set the next activeKey\n           */\n          cleanRaf();\n          rafRef.current = (0, _raf.default)(function () {\n            if (activeRef.current === targetKey) {\n              focusTargetElement.focus();\n            }\n          });\n        }\n      };\n      if ([HOME, END].includes(which) || offsetObj.sibling || !focusMenuElement) {\n        // ========================== Sibling ==========================\n        // Find walkable focus menu element container\n        var parentQueryContainer;\n        if (!focusMenuElement || mode === 'inline') {\n          parentQueryContainer = containerRef.current;\n        } else {\n          parentQueryContainer = findContainerUL(focusMenuElement);\n        }\n\n        // Get next focus element\n        var targetElement;\n        var focusableElements = getFocusableElements(parentQueryContainer, elements);\n        if (which === HOME) {\n          targetElement = focusableElements[0];\n        } else if (which === END) {\n          targetElement = focusableElements[focusableElements.length - 1];\n        } else {\n          targetElement = getNextFocusElement(parentQueryContainer, elements, focusMenuElement, offsetObj.offset);\n        }\n        // Focus menu item\n        tryFocus(targetElement);\n\n        // ======================= InlineTrigger =======================\n      } else if (offsetObj.inlineTrigger) {\n        // Inline trigger no need switch to sub menu item\n        triggerAccessibilityOpen(focusMenuKey);\n        // =========================== Level ===========================\n      } else if (offsetObj.offset > 0) {\n        triggerAccessibilityOpen(focusMenuKey, true);\n        cleanRaf();\n        rafRef.current = (0, _raf.default)(function () {\n          // Async should resync elements\n          refreshedElements = refreshElements(keys, id);\n          var controlId = focusMenuElement.getAttribute('aria-controls');\n          var subQueryContainer = document.getElementById(controlId);\n\n          // Get sub focusable menu item\n          var targetElement = getNextFocusElement(subQueryContainer, refreshedElements.elements);\n\n          // Focus menu item\n          tryFocus(targetElement);\n        }, 5);\n      } else if (offsetObj.offset < 0) {\n        var keyPath = getKeyPath(focusMenuKey, true);\n        var parentKey = keyPath[keyPath.length - 2];\n        var parentMenuElement = key2element.get(parentKey);\n\n        // Focus menu item\n        triggerAccessibilityOpen(parentKey, false);\n        tryFocus(parentMenuElement);\n      }\n    }\n\n    // Pass origin key down event\n    originOnKeyDown === null || originOnKeyDown === void 0 || originOnKeyDown(e);\n  };\n}\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","e","WeakMap","r","t","getOffset","mode","isRootLevel","isRtl","which","_offsets","ENTER","inlineTrigger","inline","_defineProperty2","default","UP","prev","DOWN","next","horizontal","LEFT","RIGHT","children","vertical","ESC","parent","type","offsets","inlineSub","horizontalSub","verticalSub","concat","offset","sibling","findContainerUL","element","current","getAttribute","parentElement","getFocusElement","activeElement","elements","document","has","getFocusableElements","container","list","_focus","getFocusNodeList","filter","ele","getNextFocusElement","parentQueryContainer","focusMenuElement","arguments","length","undefined","sameLevelFocusableMenuElementList","count","focusIndex","findIndex","_interopRequireDefault","_typeof","Object","defineProperty","value","refreshElements","useAccessibility","activeKey","id","containerRef","getKeys","getKeyPath","triggerActiveKey","triggerAccessibilityOpen","originOnKeyDown","rafRef","React","useRef","activeRef","cleanRaf","_raf","cancel","useEffect","ArrowKeys","HOME","END","includes","keys","refreshedElements","_refreshedElements","key2element","element2key","get","focusMenuKey","offsetObj","preventDefault","tryFocus","menuElement","focusTargetElement","link","querySelector","targetKey","focus","focusableElements","targetElement","controlId","subQueryContainer","getElementById","keyPath","parentKey","parentMenuElement","_KeyCode","_interopRequireWildcard","__esModule","n","__proto__","a","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_IdContext","exports.refreshElements","Set","Map","forEach","key","getMenuId","add"]
}
