shadow$provide.module$node_modules$rc_virtual_list$lib$hooks$useScrollTo=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard").default;module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(containerRef,data,heights,itemHeight,getKey,collectHeight,syncScrollTop,triggerFlash){var scrollRef=React.useRef(),_React$useState=
React.useState(null);_React$useState=(0,_slicedToArray2.default)(_React$useState,2);var syncState=_React$useState[0],setSyncState=_React$useState[1];(0,_useLayoutEffect.default)(function(){if(syncState&&syncState.times<MAX_TIMES)if(containerRef.current){collectHeight();var targetAlign=syncState.targetAlign,originAlign=syncState.originAlign,index=syncState.index,offset=syncState.offset,height=containerRef.current.clientHeight,needCollectHeight=!1,newTargetAlign=targetAlign,targetTop=null;if(height){originAlign=
targetAlign||originAlign;var stackTop=0,itemBottom=targetAlign=0;index=Math.min(data.length-1,index);for(var i=0;i<=index;i+=1)itemBottom=getKey(data[i]),targetAlign=stackTop,itemBottom=heights.get(itemBottom),stackTop=itemBottom=targetAlign+(void 0===itemBottom?itemHeight:itemBottom);for(stackTop="top"===originAlign?offset:height-offset;0<=index;--index){i=getKey(data[index]);i=heights.get(i);if(void 0===i){needCollectHeight=!0;break}stackTop-=i;if(0>=stackTop)break}switch(originAlign){case "top":targetTop=
targetAlign-offset;break;case "bottom":targetTop=itemBottom-height+offset;break;default:offset=containerRef.current.scrollTop,targetAlign<offset?newTargetAlign="top":itemBottom>offset+height&&(newTargetAlign="bottom")}null!==targetTop&&syncScrollTop(targetTop);targetTop!==syncState.lastTop&&(needCollectHeight=!0)}needCollectHeight&&setSyncState((0,_objectSpread2.default)((0,_objectSpread2.default)({},syncState),{},{times:syncState.times+1,targetAlign:newTargetAlign,lastTop:targetTop}))}else setSyncState(function(ori){return(0,_objectSpread2.default)({},
ori)});else(null===syncState||void 0===syncState?void 0:syncState.times)===MAX_TIMES&&(0,_rcUtil.warning)(!1,"Seems `scrollTo` with `rc-virtual-list` reach the max limitation. Please fire issue for us. Thanks.")},[syncState,containerRef.current]);return function(arg){if(null===arg||void 0===arg)triggerFlash();else if(_raf.default.cancel(scrollRef.current),"number"===typeof arg)syncScrollTop(arg);else if(arg&&"object"===(0,_typeof2.default)(arg)){var align=arg.align;var index="index"in arg?arg.index:
data.findIndex(function(item){return getKey(item)===arg.key});var _arg$offset=arg.offset;setSyncState({times:0,index,offset:void 0===_arg$offset?0:_arg$offset,originAlign:align})}}};var _typeof2=module(require("module$node_modules$$babel$runtime$helpers$typeof")),_objectSpread2=module(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),React=global(require("module$node_modules$react$index")),
_raf=module(require("module$node_modules$rc_util$lib$raf")),_useLayoutEffect=module(require("module$node_modules$rc_util$lib$hooks$useLayoutEffect")),_rcUtil=require("module$node_modules$rc_util$lib$index"),MAX_TIMES=10}
//# sourceMappingURL=module$node_modules$rc_virtual_list$lib$hooks$useScrollTo.js.map
