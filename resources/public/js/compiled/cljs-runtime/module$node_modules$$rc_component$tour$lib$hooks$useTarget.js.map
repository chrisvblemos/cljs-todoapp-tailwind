{
"version":3,
"file":"module$node_modules$$rc_component$tour$lib$hooks$useTarget.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/@rc-component/tour/lib/hooks/useTarget.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$rc_component$tour$lib$hooks$useTarget\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useTarget;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _useEvent = _interopRequireDefault(require(\"rc-util/lib/hooks/useEvent\"));\nvar _useLayoutEffect = _interopRequireDefault(require(\"rc-util/lib/hooks/useLayoutEffect\"));\nvar _react = require(\"react\");\nvar _util = require(\"../util\");\nfunction isValidNumber(val) {\n  return typeof val === 'number' && !Number.isNaN(val);\n}\nfunction useTarget(target, open, gap, scrollIntoViewOptions) {\n  // ========================= Target =========================\n  // We trade `undefined` as not get target by function yet.\n  // `null` as empty target.\n  var _useState = (0, _react.useState)(undefined),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    targetElement = _useState2[0],\n    setTargetElement = _useState2[1];\n  (0, _useLayoutEffect.default)(function () {\n    var nextElement = typeof target === 'function' ? target() : target;\n    setTargetElement(nextElement || null);\n  });\n\n  // ========================= Align ==========================\n  var _useState3 = (0, _react.useState)(null),\n    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n    posInfo = _useState4[0],\n    setPosInfo = _useState4[1];\n  var updatePos = (0, _useEvent.default)(function () {\n    if (targetElement) {\n      // Exist target element. We should scroll and get target position\n      if (!(0, _util.isInViewPort)(targetElement) && open) {\n        targetElement.scrollIntoView(scrollIntoViewOptions);\n      }\n      var _targetElement$getBou = targetElement.getBoundingClientRect(),\n        left = _targetElement$getBou.left,\n        top = _targetElement$getBou.top,\n        width = _targetElement$getBou.width,\n        height = _targetElement$getBou.height;\n      var nextPosInfo = {\n        left: left,\n        top: top,\n        width: width,\n        height: height,\n        radius: 0\n      };\n      setPosInfo(function (origin) {\n        if (JSON.stringify(origin) !== JSON.stringify(nextPosInfo)) {\n          return nextPosInfo;\n        }\n        return origin;\n      });\n    } else {\n      // Not exist target which means we just show in center\n      setPosInfo(null);\n    }\n  });\n  var getGapOffset = function getGapOffset(index) {\n    var _ref;\n    return (_ref = Array.isArray(gap === null || gap === void 0 ? void 0 : gap.offset) ? gap === null || gap === void 0 ? void 0 : gap.offset[index] : gap === null || gap === void 0 ? void 0 : gap.offset) !== null && _ref !== void 0 ? _ref : 6;\n  };\n  (0, _useLayoutEffect.default)(function () {\n    updatePos();\n    // update when window resize\n    window.addEventListener('resize', updatePos);\n    return function () {\n      window.removeEventListener('resize', updatePos);\n    };\n  }, [targetElement, open, updatePos]);\n\n  // ======================== PosInfo =========================\n  var mergedPosInfo = (0, _react.useMemo)(function () {\n    if (!posInfo) {\n      return posInfo;\n    }\n    var gapOffsetX = getGapOffset(0);\n    var gapOffsetY = getGapOffset(1);\n    var gapRadius = isValidNumber(gap === null || gap === void 0 ? void 0 : gap.radius) ? gap === null || gap === void 0 ? void 0 : gap.radius : 2;\n    return {\n      left: posInfo.left - gapOffsetX,\n      top: posInfo.top - gapOffsetY,\n      width: posInfo.width + gapOffsetX * 2,\n      height: posInfo.height + gapOffsetY * 2,\n      radius: gapRadius\n    };\n  }, [posInfo, gap]);\n  return [mergedPosInfo, targetElement];\n}\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","default","Object","defineProperty","value","useTarget","target","open","gap","scrollIntoViewOptions","_useState","_react","useState","undefined","_useState2","_slicedToArray2","targetElement","setTargetElement","_useLayoutEffect","nextElement","_useState3","_useState4","posInfo","setPosInfo","updatePos","_useEvent","_util","isInViewPort","scrollIntoView","_targetElement$getBou","getBoundingClientRect","nextPosInfo","left","top","width","height","radius","origin","JSON","stringify","getGapOffset","index","_ref","Array","isArray","offset","window","addEventListener","removeEventListener","mergedPosInfo","useMemo","gapOffsetX","gapOffsetY","val","Number","isNaN","gapRadius"]
}
