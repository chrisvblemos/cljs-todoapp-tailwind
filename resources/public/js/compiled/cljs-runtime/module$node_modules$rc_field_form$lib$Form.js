shadow$provide.module$node_modules$rc_field_form$lib$Form=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;module=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),_objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),
_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_objectWithoutProperties2=global(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),React=module(require("module$node_modules$react$index")),_useForm3=global(require("module$node_modules$rc_field_form$lib$useForm")),_FieldContext=module(require("module$node_modules$rc_field_form$lib$FieldContext")),_FormContext=global(require("module$node_modules$rc_field_form$lib$FormContext")),
_valueUtil=require("module$node_modules$rc_field_form$lib$utils$valueUtil"),_ListContext=global(require("module$node_modules$rc_field_form$lib$ListContext")),_excluded="name initialValues fields form preserve children component validateMessages validateTrigger onValuesChange onFieldsChange onFinish onFinishFailed clearOnDestroy".split(" ");exports.default=function(_ref,ref){var name=_ref.name,initialValues=_ref.initialValues,fields=_ref.fields,form=_ref.form,preserve=_ref.preserve,children=_ref.children,
_ref$component=_ref.component;_ref$component=void 0===_ref$component?"form":_ref$component;var validateMessages=_ref.validateMessages,_ref$validateTrigger=_ref.validateTrigger,validateTrigger=void 0===_ref$validateTrigger?"onChange":_ref$validateTrigger;_ref$validateTrigger=_ref.onValuesChange;var _onFieldsChange=_ref.onFieldsChange,_onFinish=_ref.onFinish,onFinishFailed=_ref.onFinishFailed,clearOnDestroy=_ref.clearOnDestroy,restProps=(0,_objectWithoutProperties2.default)(_ref,_excluded),nativeElementRef=
React.useRef(null),formContext=React.useContext(_FormContext.default);_ref=(0,_useForm3.default)(form);var formInstance=(0,_slicedToArray2.default)(_ref,1)[0],_getInternalHooks=formInstance.getInternalHooks(_FieldContext.HOOK_MARK);_ref=_getInternalHooks.useSubscribe;form=_getInternalHooks.setInitialValues;var setCallbacks=_getInternalHooks.setCallbacks,setValidateMessages=_getInternalHooks.setValidateMessages,setPreserve=_getInternalHooks.setPreserve,destroyForm=_getInternalHooks.destroyForm;React.useImperativeHandle(ref,
function(){return(0,_objectSpread2.default)((0,_objectSpread2.default)({},formInstance),{},{nativeElement:nativeElementRef.current})});React.useEffect(function(){formContext.registerForm(name,formInstance);return function(){formContext.unregisterForm(name)}},[formContext,formInstance,name]);setValidateMessages((0,_objectSpread2.default)((0,_objectSpread2.default)({},formContext.validateMessages),validateMessages));setCallbacks({onValuesChange:_ref$validateTrigger,onFieldsChange:function(changedFields){formContext.triggerFormChange(name,
changedFields);if(_onFieldsChange){for(var _len=arguments.length,rest=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)rest[_key-1]=arguments[_key];_onFieldsChange.apply(void 0,[changedFields].concat(rest))}},onFinish:function(values){formContext.triggerFormFinish(name,values);_onFinish&&_onFinish(values)},onFinishFailed});setPreserve(preserve);ref=React.useRef(null);form(initialValues,!ref.current);ref.current||(ref.current=!0);React.useEffect(function(){return function(){return destroyForm(clearOnDestroy)}},
[]);if(initialValues="function"===typeof children)ref=formInstance.getFieldsValue(!0),children=children(ref,formInstance);_ref(!initialValues);var prevFieldsRef=React.useRef();React.useEffect(function(){(0,_valueUtil.isSimilar)(prevFieldsRef.current||[],fields||[])||formInstance.setFields(fields||[]);prevFieldsRef.current=fields},[fields,formInstance]);initialValues=React.useMemo(function(){return(0,_objectSpread2.default)((0,_objectSpread2.default)({},formInstance),{},{validateTrigger})},[formInstance,
validateTrigger]);children=React.createElement(_ListContext.default.Provider,{value:null},React.createElement(_FieldContext.default.Provider,{value:initialValues},children));return!1===_ref$component?children:React.createElement(_ref$component,(0,_extends2.default)({},restProps,{ref:nativeElementRef,onSubmit:function(event){event.preventDefault();event.stopPropagation();formInstance.submit()},onReset:function(event){var _restProps$onReset;event.preventDefault();formInstance.resetFields();null===(_restProps$onReset=
restProps.onReset)||void 0===_restProps$onReset||_restProps$onReset.call(restProps,event)}}),children)}}
//# sourceMappingURL=module$node_modules$rc_field_form$lib$Form.js.map
