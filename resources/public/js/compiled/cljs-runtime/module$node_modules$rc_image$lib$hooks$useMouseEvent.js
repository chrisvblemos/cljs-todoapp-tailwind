shadow$provide.module$node_modules$rc_image$lib$hooks$useMouseEvent=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(imgRef,movable,visible,scaleStep,transform,updateTransform,dispatchZoomChange){var rotate=transform.rotate,scale=transform.scale,x=transform.x,y=transform.y;transform=(0,_react.useState)(!1);transform=(0,_slicedToArray2.default)(transform,
2);var isMoving=transform[0],setMoving=transform[1],startPositionInfo=(0,_react.useRef)({diffX:0,diffY:0,transformX:0,transformY:0}),onMouseMove=function(event){visible&&isMoving&&updateTransform({x:event.pageX-startPositionInfo.current.diffX,y:event.pageY-startPositionInfo.current.diffY},"move")},onMouseUp=function(){if(visible&&isMoving){setMoving(!1);var _startPositionInfo$cu=startPositionInfo.current,transformY=_startPositionInfo$cu.transformY;if(x!==_startPositionInfo$cu.transformX&&y!==transformY){_startPositionInfo$cu=
imgRef.current.offsetWidth*scale;transformY=imgRef.current.offsetHeight*scale;var _imgRef$current$getBo=imgRef.current.getBoundingClientRect(),isRotate=0!==rotate%180;(_startPositionInfo$cu=(0,_getFixScaleEleTransPosition.default)(isRotate?transformY:_startPositionInfo$cu,isRotate?_startPositionInfo$cu:transformY,_imgRef$current$getBo.left,_imgRef$current$getBo.top))&&updateTransform((0,_objectSpread2.default)({},_startPositionInfo$cu),"dragRebound")}}};(0,_react.useEffect)(function(){if(movable){var onMouseUpListener=
(0,_addEventListener.default)(window,"mouseup",onMouseUp,!1);var onMouseMoveListener=(0,_addEventListener.default)(window,"mousemove",onMouseMove,!1);try{if(window.top!==window.self){var onTopMouseUpListener=(0,_addEventListener.default)(window.top,"mouseup",onMouseUp,!1);var onTopMouseMoveListener=(0,_addEventListener.default)(window.top,"mousemove",onMouseMove,!1)}}catch(error){(0,_warning.warning)(!1,"[rc-image] ".concat(error))}}return function(){var _onMouseUpListener,_onMouseMoveListener,_onTopMouseUpListener,
_onTopMouseMoveListen;null===(_onMouseUpListener=onMouseUpListener)||void 0===_onMouseUpListener||_onMouseUpListener.remove();null===(_onMouseMoveListener=onMouseMoveListener)||void 0===_onMouseMoveListener||_onMouseMoveListener.remove();null===(_onTopMouseUpListener=onTopMouseUpListener)||void 0===_onTopMouseUpListener||_onTopMouseUpListener.remove();null===(_onTopMouseMoveListen=onTopMouseMoveListener)||void 0===_onTopMouseMoveListen||_onTopMouseMoveListen.remove()}},[visible,isMoving,x,y,rotate,
movable]);return{isMoving,onMouseDown:function(event){movable&&0===event.button&&(event.preventDefault(),event.stopPropagation(),startPositionInfo.current={diffX:event.pageX-x,diffY:event.pageY-y,transformX:x,transformY:y},setMoving(!0))},onMouseMove,onMouseUp,onWheel:function(event){if(visible&&0!=event.deltaY){var ratio=_previewConfig.BASE_SCALE_RATIO+Math.min(Math.abs(event.deltaY/100),_previewConfig.WHEEL_MAX_SCALE_RATIO)*scaleStep;0<event.deltaY&&(ratio=_previewConfig.BASE_SCALE_RATIO/ratio);
dispatchZoomChange(ratio,"wheel",event.clientX,event.clientY)}}}};var _objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_addEventListener=global(require("module$node_modules$rc_util$lib$Dom$addEventListener")),_warning=require("module$node_modules$rc_util$lib$warning"),_react=require("module$node_modules$react$index"),_getFixScaleEleTransPosition=global(require("module$node_modules$rc_image$lib$getFixScaleEleTransPosition")),
_previewConfig=require("module$node_modules$rc_image$lib$previewConfig")}
//# sourceMappingURL=module$node_modules$rc_image$lib$hooks$useMouseEvent.js.map
