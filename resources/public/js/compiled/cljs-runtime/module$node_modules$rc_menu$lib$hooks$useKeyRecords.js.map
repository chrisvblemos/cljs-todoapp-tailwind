{
"version":3,
"file":"module$node_modules$rc_menu$lib$hooks$useKeyRecords.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/rc-menu/lib/hooks/useKeyRecords.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_menu$lib$hooks$useKeyRecords\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OVERFLOW_KEY = void 0;\nexports.default = useKeyRecords;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar React = _react;\nvar _warning = _interopRequireDefault(require(\"rc-util/lib/warning\"));\nvar _timeUtil = require(\"../utils/timeUtil\");\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\nvar PATH_SPLIT = '__RC_UTIL_PATH_SPLIT__';\nvar getPathStr = function getPathStr(keyPath) {\n  return keyPath.join(PATH_SPLIT);\n};\nvar getPathKeys = function getPathKeys(keyPathStr) {\n  return keyPathStr.split(PATH_SPLIT);\n};\nvar OVERFLOW_KEY = exports.OVERFLOW_KEY = 'rc-menu-more';\nfunction useKeyRecords() {\n  var _React$useState = React.useState({}),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    internalForceUpdate = _React$useState2[1];\n  var key2pathRef = (0, _react.useRef)(new Map());\n  var path2keyRef = (0, _react.useRef)(new Map());\n  var _React$useState3 = React.useState([]),\n    _React$useState4 = (0, _slicedToArray2.default)(_React$useState3, 2),\n    overflowKeys = _React$useState4[0],\n    setOverflowKeys = _React$useState4[1];\n  var updateRef = (0, _react.useRef)(0);\n  var destroyRef = (0, _react.useRef)(false);\n  var forceUpdate = function forceUpdate() {\n    if (!destroyRef.current) {\n      internalForceUpdate({});\n    }\n  };\n  var registerPath = (0, _react.useCallback)(function (key, keyPath) {\n    // Warning for invalidate or duplicated `key`\n    if (process.env.NODE_ENV !== 'production') {\n      (0, _warning.default)(!key2pathRef.current.has(key), \"Duplicated key '\".concat(key, \"' used in Menu by path [\").concat(keyPath.join(' > '), \"]\"));\n    }\n\n    // Fill map\n    var connectedPath = getPathStr(keyPath);\n    path2keyRef.current.set(connectedPath, key);\n    key2pathRef.current.set(key, connectedPath);\n    updateRef.current += 1;\n    var id = updateRef.current;\n    (0, _timeUtil.nextSlice)(function () {\n      if (id === updateRef.current) {\n        forceUpdate();\n      }\n    });\n  }, []);\n  var unregisterPath = (0, _react.useCallback)(function (key, keyPath) {\n    var connectedPath = getPathStr(keyPath);\n    path2keyRef.current.delete(connectedPath);\n    key2pathRef.current.delete(key);\n  }, []);\n  var refreshOverflowKeys = (0, _react.useCallback)(function (keys) {\n    setOverflowKeys(keys);\n  }, []);\n  var getKeyPath = (0, _react.useCallback)(function (eventKey, includeOverflow) {\n    var fullPath = key2pathRef.current.get(eventKey) || '';\n    var keys = getPathKeys(fullPath);\n    if (includeOverflow && overflowKeys.includes(keys[0])) {\n      keys.unshift(OVERFLOW_KEY);\n    }\n    return keys;\n  }, [overflowKeys]);\n  var isSubPathKey = (0, _react.useCallback)(function (pathKeys, eventKey) {\n    return pathKeys.filter(function (item) {\n      return item !== undefined;\n    }).some(function (pathKey) {\n      var pathKeyList = getKeyPath(pathKey, true);\n      return pathKeyList.includes(eventKey);\n    });\n  }, [getKeyPath]);\n  var getKeys = function getKeys() {\n    var keys = (0, _toConsumableArray2.default)(key2pathRef.current.keys());\n    if (overflowKeys.length) {\n      keys.push(OVERFLOW_KEY);\n    }\n    return keys;\n  };\n\n  /**\n   * Find current key related child path keys\n   */\n  var getSubPathKeys = (0, _react.useCallback)(function (key) {\n    var connectedPath = \"\".concat(key2pathRef.current.get(key)).concat(PATH_SPLIT);\n    var pathKeys = new Set();\n    (0, _toConsumableArray2.default)(path2keyRef.current.keys()).forEach(function (pathKey) {\n      if (pathKey.startsWith(connectedPath)) {\n        pathKeys.add(path2keyRef.current.get(pathKey));\n      }\n    });\n    return pathKeys;\n  }, []);\n  React.useEffect(function () {\n    return function () {\n      destroyRef.current = true;\n    };\n  }, []);\n  return {\n    // Register\n    registerPath: registerPath,\n    unregisterPath: unregisterPath,\n    refreshOverflowKeys: refreshOverflowKeys,\n    // Util\n    isSubPathKey: isSubPathKey,\n    getKeyPath: getKeyPath,\n    getKeys: getKeys,\n    getSubPathKeys: getSubPathKeys\n  };\n}\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","e","WeakMap","r","t","_interopRequireDefault","_typeof","Object","defineProperty","value","OVERFLOW_KEY","default","useKeyRecords","_React$useState","React","useState","internalForceUpdate","_React$useState2","_slicedToArray2","key2pathRef","_react","useRef","Map","path2keyRef","_React$useState3","_React$useState4","overflowKeys","setOverflowKeys","updateRef","destroyRef","registerPath","useCallback","key","keyPath","_warning","current","has","concat","join","connectedPath","PATH_SPLIT","set","id","_timeUtil","nextSlice","unregisterPath","delete","refreshOverflowKeys","keys","getKeyPath","eventKey","includeOverflow","split","get","includes","unshift","isSubPathKey","pathKeys","filter","item","undefined","some","pathKey","pathKeyList","getSubPathKeys","Set","_toConsumableArray2","forEach","startsWith","add","useEffect","getKeys","length","push","_interopRequireWildcard","__esModule","n","__proto__","a","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i"]
}
