{
"version":3,
"file":"module$node_modules$rc_virtual_list$lib$hooks$useScrollTo.js",
"lineCount":7,
"mappings":"AAAAA,cAAA,CAAA,yDAAA,CAA8E,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAGlHC,MAAAA,CAA0BH,OAAA,CAAQ,mEAAR,CAAyDI,CAAAA,OACnFC,OAAAA,CAAyBL,OAAA,CAAQ,kEAAR,CAAwDI,CAAAA,OACrFE,OAAOC,CAAAA,cAAP,CAAsBL,OAAtB,CAA+B,YAA/B,CAA6C,CAC3CM,MAAO,CAAA,CADoC,CAA7C,CAGAN,QAAQE,CAAAA,OAAR,CAWAK,QAAoB,CAACC,YAAD,CAAeC,IAAf,CAAqBC,OAArB,CAA8BC,UAA9B,CAA0CC,MAA1C,CAAkDC,aAAlD,CAAiEC,aAAjE,CAAgFC,YAAhF,CAA8F,CAChH,IAAIC,UAAYC,KAAMC,CAAAA,MAAN,EAAhB,CACIC;AAAkBF,KAAMG,CAAAA,QAAN,CAAe,IAAf,CACpBC,gBAAAA,CAAmB,GAAIC,eAAgBpB,CAAAA,OAApB,EAA6BiB,eAA7B,CAA8C,CAA9C,CAH2F,KAI9GI,UAAYF,eAAA,CAAiB,CAAjB,CAJkG,CAK9GG,aAAeH,eAAA,CAAiB,CAAjB,CAGjB,IAAII,gBAAiBvB,CAAAA,OAArB,EAA8B,QAAS,EAAG,CACxC,GAAIqB,SAAJ,EAAiBA,SAAUG,CAAAA,KAA3B,CAAmCC,SAAnC,CAEE,GAAKnB,YAAaoB,CAAAA,OAAlB,CAAA,CAMAf,aAAA,EAR4C,KASxCgB,YAAcN,SAAUM,CAAAA,WATgB,CAU1CC,YAAcP,SAAUO,CAAAA,WAVkB,CAW1CC,MAAQR,SAAUQ,CAAAA,KAXwB,CAY1CC,OAAST,SAAUS,CAAAA,MAZuB,CAaxCC,OAASzB,YAAaoB,CAAAA,OAAQM,CAAAA,YAbU,CAcxCC,kBAAoB,CAAA,CAdoB,CAexCC,eAAiBP,WAfuB,CAgBxCQ,UAAY,IAGhB,IAAIJ,MAAJ,CAAY,CACNK,WAAAA;AAAcT,WAAdS,EAA6BR,WAGjC,KAAIS,SAAW,CAAf,CAEIC,WADAC,WACAD,CADU,CAEVE,MAAAA,CAASC,IAAKC,CAAAA,GAAL,CAASnC,IAAKoC,CAAAA,MAAd,CAAuB,CAAvB,CAA0Bd,KAA1B,CACb,KAAK,IAAIe,EAAI,CAAb,CAAgBA,CAAhB,EAAqBJ,KAArB,CAA6BI,CAA7B,EAAkC,CAAlC,CACMC,UAIJ,CAJUnC,MAAA,CAAOH,IAAA,CAAKqC,CAAL,CAAP,CAIV,CAHAL,WAGA,CAHUF,QAGV,CAFIS,UAEJ,CAFkBtC,OAAQuC,CAAAA,GAAR,CAAYF,UAAZ,CAElB,CAAAR,QAAA,CADAC,UACA,CADaC,WACb,EADwCS,IAAAA,EAAhB,GAAAF,UAAA,CAA4BrC,UAA5B,CAAyCqC,UACjE,CAKF,KADIG,QACJ,CADiC,KAAhB,GAAAb,WAAA,CAAwBN,MAAxB,CAAiCC,MAAjC,CAA0CD,MAC3D,CAA4B,CAA5B,EAAsBoB,KAAtB,CAA+B,EAAAA,KAA/B,CAAwC,CAClCC,CAAAA,CAAOzC,MAAA,CAAOH,IAAA,CAAK2C,KAAL,CAAP,CACPE,EAAAA,CAAe5C,OAAQuC,CAAAA,GAAR,CAAYI,CAAZ,CACnB,IAAqBH,IAAAA,EAArB,GAAII,CAAJ,CAAgC,CAC9BnB,iBAAA,CAAoB,CAAA,CACpB,MAF8B,CAIhCgB,QAAA,EAAcG,CACd,IAAkB,CAAlB,EAAIH,QAAJ,CACE,KAToC,CAcxC,OAAQb,WAAR,EACE,KAAK,KAAL,CACED,SAAA;AAAYI,WAAZ,CAAsBT,MACtB,MACF,MAAK,QAAL,CACEK,SAAA,CAAYG,UAAZ,CAAyBP,MAAzB,CAAkCD,MAClC,MACF,SAEQuB,MAEJ,CAFgB/C,YAAaoB,CAAAA,OAAQ2B,CAAAA,SAErC,CAAId,WAAJ,CAAcc,MAAd,CACEnB,cADF,CACmB,KADnB,CAEWI,UAFX,CADmBe,MACnB,CAD+BtB,MAC/B,GAGEG,cAHF,CAGmB,QAHnB,CAXN,CAkBkB,IAAlB,GAAIC,SAAJ,EACEvB,aAAA,CAAcuB,SAAd,CAIEA,UAAJ,GAAkBd,SAAUiC,CAAAA,OAA5B,GACErB,iBADF,CACsB,CAAA,CADtB,CAvDU,CA6DRA,iBAAJ,EACEX,YAAA,CAAa,GAAIiC,cAAevD,CAAAA,OAAnB,EAA4B,GAAIuD,cAAevD,CAAAA,OAAnB,EAA4B,EAA5B,CAAgCqB,SAAhC,CAA5B,CAAwE,EAAxE,CAA4E,CACvFG,MAAOH,SAAUG,CAAAA,KAAjBA,CAAyB,CAD8D,CAEvFG,YAAaO,cAF0E,CAGvFoB,QAASnB,SAH8E,CAA5E,CAAb,CA/EF,CAAA,IACEb,aAAA,CAAa,QAAS,CAACkC,GAAD,CAAM,CAC1B,MAAO,GAAID,cAAevD,CAAAA,OAAnB,EAA4B,EAA5B;AAAgCwD,GAAhC,CADmB,CAA5B,CAHJ,KAuFO,CAA4D,IAAd,GAAAnC,SAAA,EAAoC,IAAK,EAAzC,GAAsBA,SAAtB,CAA6C,IAAK,EAAlD,CAAsDA,SAAUG,CAAAA,KAA9G,IAAyHC,SAAzH,EACL,GAAIgC,OAAQC,CAAAA,OAAZ,EAAqB,CAAA,CAArB,CAA4B,qGAA5B,CAzFsC,CAA1C,CA2FG,CAACrC,SAAD,CAAYf,YAAaoB,CAAAA,OAAzB,CA3FH,CA8FA,OAAO,SAAS,CAACiC,GAAD,CAAM,CAEpB,GAAY,IAAZ,GAAIA,GAAJ,EAA4BX,IAAAA,EAA5B,GAAoBW,GAApB,CACE9C,YAAA,EADF,KAOA,IADA+C,IAAK5D,CAAAA,OAAQ6D,CAAAA,MAAb,CAAoB/C,SAAUY,CAAAA,OAA9B,CACI,CAAe,QAAf,GAAA,MAAOiC,IAAX,CACE/C,aAAA,CAAc+C,GAAd,CADF,KAEO,IAAIA,GAAJ,EAA0C,QAA1C,GAAW,GAAIG,QAAS9D,CAAAA,OAAb,EAAsB2D,GAAtB,CAAX,CAAoD,CACzD,IACII,MAAQJ,GAAII,CAAAA,KAEd,KAAAlC,MADE,OAAJ,EAAe8B,IAAf,CACUA,GAAI9B,CAAAA,KADd;AAGUtB,IAAKyD,CAAAA,SAAL,CAAe,QAAS,CAACC,IAAD,CAAO,CACrC,MAAOvD,OAAA,CAAOuD,IAAP,CAAP,GAAwBN,GAAId,CAAAA,GADS,CAA/B,CAN+C,KAUrDqB,YAAcP,GAAI7B,CAAAA,MAEtBR,aAAA,CAAa,CACXE,MAAO,CADI,CAEJK,KAFI,CAGXC,OAJyB,IAAK,EAArBA,GAAAoC,WAAApC,CAAyB,CAAzBA,CAA6BoC,WAC3B,CAIXtC,YAAamC,KAJF,CAAb,CAZyD,CAXvC,CAtG0F,CAVlH,KAAID,SAAW7D,MAAA,CAAuBL,OAAA,CAAQ,mDAAR,CAAvB,CAAf,CACI2D,eAAiBtD,MAAA,CAAuBL,OAAA,CAAQ,0DAAR,CAAvB,CADrB,CAEIwB,gBAAkBnB,MAAA,CAAuBL,OAAA,CAAQ,0DAAR,CAAvB,CAFtB,CAGImB,MAAQhB,MAAA,CAAwBH,OAAA,CAAQ,iCAAR,CAAxB,CAHZ;AAIIgE,KAAO3D,MAAA,CAAuBL,OAAA,CAAQ,qCAAR,CAAvB,CAJX,CAKI2B,iBAAmBtB,MAAA,CAAuBL,OAAA,CAAQ,uDAAR,CAAvB,CALvB,CAMI6D,QAAU7D,OAAA,CAAQ,uCAAR,CANd,CASI6B,UAAY,EAlBsG;",
"sources":["node_modules/rc-virtual-list/lib/hooks/useScrollTo.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_virtual_list$lib$hooks$useScrollTo\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useScrollTo;\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _raf = _interopRequireDefault(require(\"rc-util/lib/raf\"));\nvar _useLayoutEffect = _interopRequireDefault(require(\"rc-util/lib/hooks/useLayoutEffect\"));\nvar _rcUtil = require(\"rc-util\");\n/* eslint-disable no-param-reassign */\n\nvar MAX_TIMES = 10;\nfunction useScrollTo(containerRef, data, heights, itemHeight, getKey, collectHeight, syncScrollTop, triggerFlash) {\n  var scrollRef = React.useRef();\n  var _React$useState = React.useState(null),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    syncState = _React$useState2[0],\n    setSyncState = _React$useState2[1];\n\n  // ========================== Sync Scroll ==========================\n  (0, _useLayoutEffect.default)(function () {\n    if (syncState && syncState.times < MAX_TIMES) {\n      // Never reach\n      if (!containerRef.current) {\n        setSyncState(function (ori) {\n          return (0, _objectSpread2.default)({}, ori);\n        });\n        return;\n      }\n      collectHeight();\n      var targetAlign = syncState.targetAlign,\n        originAlign = syncState.originAlign,\n        index = syncState.index,\n        offset = syncState.offset;\n      var height = containerRef.current.clientHeight;\n      var needCollectHeight = false;\n      var newTargetAlign = targetAlign;\n      var targetTop = null;\n\n      // Go to next frame if height not exist\n      if (height) {\n        var mergedAlign = targetAlign || originAlign;\n\n        // Get top & bottom\n        var stackTop = 0;\n        var itemTop = 0;\n        var itemBottom = 0;\n        var maxLen = Math.min(data.length - 1, index);\n        for (var i = 0; i <= maxLen; i += 1) {\n          var key = getKey(data[i]);\n          itemTop = stackTop;\n          var cacheHeight = heights.get(key);\n          itemBottom = itemTop + (cacheHeight === undefined ? itemHeight : cacheHeight);\n          stackTop = itemBottom;\n        }\n\n        // Check if need sync height (visible range has item not record height)\n        var leftHeight = mergedAlign === 'top' ? offset : height - offset;\n        for (var _i = maxLen; _i >= 0; _i -= 1) {\n          var _key = getKey(data[_i]);\n          var _cacheHeight = heights.get(_key);\n          if (_cacheHeight === undefined) {\n            needCollectHeight = true;\n            break;\n          }\n          leftHeight -= _cacheHeight;\n          if (leftHeight <= 0) {\n            break;\n          }\n        }\n\n        // Scroll to\n        switch (mergedAlign) {\n          case 'top':\n            targetTop = itemTop - offset;\n            break;\n          case 'bottom':\n            targetTop = itemBottom - height + offset;\n            break;\n          default:\n            {\n              var scrollTop = containerRef.current.scrollTop;\n              var scrollBottom = scrollTop + height;\n              if (itemTop < scrollTop) {\n                newTargetAlign = 'top';\n              } else if (itemBottom > scrollBottom) {\n                newTargetAlign = 'bottom';\n              }\n            }\n        }\n        if (targetTop !== null) {\n          syncScrollTop(targetTop);\n        }\n\n        // One more time for sync\n        if (targetTop !== syncState.lastTop) {\n          needCollectHeight = true;\n        }\n      }\n\n      // Trigger next effect\n      if (needCollectHeight) {\n        setSyncState((0, _objectSpread2.default)((0, _objectSpread2.default)({}, syncState), {}, {\n          times: syncState.times + 1,\n          targetAlign: newTargetAlign,\n          lastTop: targetTop\n        }));\n      }\n    } else if (process.env.NODE_ENV !== 'production' && (syncState === null || syncState === void 0 ? void 0 : syncState.times) === MAX_TIMES) {\n      (0, _rcUtil.warning)(false, 'Seems `scrollTo` with `rc-virtual-list` reach the max limitation. Please fire issue for us. Thanks.');\n    }\n  }, [syncState, containerRef.current]);\n\n  // =========================== Scroll To ===========================\n  return function (arg) {\n    // When not argument provided, we think dev may want to show the scrollbar\n    if (arg === null || arg === undefined) {\n      triggerFlash();\n      return;\n    }\n\n    // Normal scroll logic\n    _raf.default.cancel(scrollRef.current);\n    if (typeof arg === 'number') {\n      syncScrollTop(arg);\n    } else if (arg && (0, _typeof2.default)(arg) === 'object') {\n      var index;\n      var align = arg.align;\n      if ('index' in arg) {\n        index = arg.index;\n      } else {\n        index = data.findIndex(function (item) {\n          return getKey(item) === arg.key;\n        });\n      }\n      var _arg$offset = arg.offset,\n        offset = _arg$offset === void 0 ? 0 : _arg$offset;\n      setSyncState({\n        times: 0,\n        index: index,\n        offset: offset,\n        originAlign: align\n      });\n    }\n  };\n}\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireWildcard","default","_interopRequireDefault","Object","defineProperty","value","useScrollTo","containerRef","data","heights","itemHeight","getKey","collectHeight","syncScrollTop","triggerFlash","scrollRef","React","useRef","_React$useState","useState","_React$useState2","_slicedToArray2","syncState","setSyncState","_useLayoutEffect","times","MAX_TIMES","current","targetAlign","originAlign","index","offset","height","clientHeight","needCollectHeight","newTargetAlign","targetTop","mergedAlign","stackTop","itemBottom","itemTop","maxLen","Math","min","length","i","key","cacheHeight","get","undefined","leftHeight","_i","_key","_cacheHeight","scrollTop","lastTop","_objectSpread2","ori","_rcUtil","warning","arg","_raf","cancel","_typeof2","align","findIndex","item","_arg$offset"]
}
