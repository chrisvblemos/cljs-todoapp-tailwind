shadow$provide.module$node_modules$$rc_component$async_validator$lib$util=function(global,require,module,exports){function convertFieldsError(errors){if(!errors||!errors.length)return null;var fields={};errors.forEach(function(error){var field=error.field;fields[field]=fields[field]||[];fields[field].push(error)});return fields}function asyncParallelArray(arr,func,callback){function count(errors){results.push.apply(results,(0,_toConsumableArray2.default)(errors||[]));total++;total===arrLength&&callback(results)}
var results=[],total=0,arrLength=arr.length;arr.forEach(function(a){func(a,count)})}function asyncSerialArray(arr,func,callback){function next(errors){errors&&errors.length?callback(errors):(errors=index,index+=1,errors<arrLength?func(arr[errors],next):callback([]))}var index=0,arrLength=arr.length;next([])}function flattenObjArr(objArr){var ret=[];Object.keys(objArr).forEach(function(k){ret.push.apply(ret,(0,_toConsumableArray2.default)(objArr[k]||[]))});return ret}global=require("module$node_modules$process$browser");
"use strict";module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.AsyncValidationError=void 0;exports.asyncMap=function(objArr,option,func,callback,source){if(option.first)return option=new Promise(function(resolve,reject){var flattenArr=flattenObjArr(objArr);asyncSerialArray(flattenArr,func,function(errors){callback(errors);return errors.length?reject(new AsyncValidationError(errors,convertFieldsError(errors))):
resolve(source)})}),option.catch(function(e){return e}),option;var firstFields=!0===option.firstFields?Object.keys(objArr):option.firstFields||[],objArrKeys=Object.keys(objArr),objArrLength=objArrKeys.length,total=0,results=[];option=new Promise(function(resolve,reject){var next=function(errors){results.push.apply(results,errors);total++;if(total===objArrLength)return callback(results),results.length?reject(new AsyncValidationError(results,convertFieldsError(results))):resolve(source)};objArrKeys.length||
(callback(results),resolve(source));objArrKeys.forEach(function(key){var arr=objArr[key];-1!==firstFields.indexOf(key)?asyncSerialArray(arr,func,next):asyncParallelArray(arr,func,next)})});option.catch(function(e){return e});return option};exports.complementError=function(rule,source){return function(oe){if(rule.fullFields)a:{var fieldValue=rule.fullFields;for(var v=source,i=0;i<fieldValue.length;i++){if(void 0==v){fieldValue=v;break a}v=v[fieldValue[i]]}fieldValue=v}else fieldValue=source[oe.field||
rule.fullField];return oe&&void 0!==oe.message?(oe.field=oe.field||rule.fullField,oe.fieldValue=fieldValue,oe):{message:"function"===typeof oe?oe():oe,fieldValue,field:oe.field||rule.fullField}}};exports.convertFieldsError=convertFieldsError;exports.deepMerge=function(target,source){if(source)for(var s in source)if(source.hasOwnProperty(s)){var value=source[s];"object"===(0,_typeof2.default)(value)&&"object"===(0,_typeof2.default)(target[s])?target[s]=(0,_objectSpread2.default)((0,_objectSpread2.default)({},
target[s]),value):target[s]=value}return target};exports.format=function(template){for(var _len=arguments.length,args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var i=0,len=args.length;return"function"===typeof template?template.apply(null,args):"string"===typeof template?template.replace(formatRegExp,function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case "%s":return String(args[i++]);case "%d":return Number(args[i++]);case "%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}}):
template};exports.isEmptyObject=function(obj){return 0===Object.keys(obj).length};exports.isEmptyValue=function(value,type){return void 0===value||null===value||"array"===type&&Array.isArray(value)&&!value.length||("string"===type||"url"===type||"hex"===type||"email"===type||"date"===type||"pattern"===type)&&"string"===typeof value&&!value?!0:!1};exports.warning=void 0;var _objectSpread2=module(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_typeof2=module(require("module$node_modules$$babel$runtime$helpers$typeof")),
_createClass2=module(require("module$node_modules$$babel$runtime$helpers$createClass")),_classCallCheck2=module(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_assertThisInitialized2=module(require("module$node_modules$$babel$runtime$helpers$assertThisInitialized")),_inherits2=module(require("module$node_modules$$babel$runtime$helpers$inherits")),_createSuper2=module(require("module$node_modules$$babel$runtime$helpers$createSuper")),_wrapNativeSuper2=module(require("module$node_modules$$babel$runtime$helpers$wrapNativeSuper")),
_defineProperty2=module(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_toConsumableArray2=module(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),formatRegExp=/%[sdj%]/g;exports.warning=function(){};"undefined"!==typeof global&&global.env&&"undefined"!==typeof window&&"undefined"!==typeof document&&(exports.warning=function(type,errors){"undefined"!==typeof console&&console.warn&&"undefined"===typeof ASYNC_VALIDATOR_NO_WARNING&&errors.every(function(e){return"string"===
typeof e})&&console.warn(type,errors)});var AsyncValidationError=exports.AsyncValidationError=function(_Error){function AsyncValidationError(errors,fields){(0,_classCallCheck2.default)(this,AsyncValidationError);var _this=_super.call(this,"Async Validation Error");(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"errors",void 0);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"fields",void 0);_this.errors=errors;_this.fields=fields;return _this}(0,_inherits2.default)(AsyncValidationError,
_Error);var _super=(0,_createSuper2.default)(AsyncValidationError);return(0,_createClass2.default)(AsyncValidationError)}((0,_wrapNativeSuper2.default)(Error))}
//# sourceMappingURL=module$node_modules$$rc_component$async_validator$lib$util.js.map
