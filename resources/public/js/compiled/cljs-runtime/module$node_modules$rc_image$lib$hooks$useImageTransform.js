shadow$provide.module$node_modules$rc_image$lib$hooks$useImageTransform=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(imgRef,minScale,maxScale,onTransform){var frame=(0,_react.useRef)(null),queue=(0,_react.useRef)([]),_useState=(0,_react.useState)(initialTransform);_useState=(0,_slicedToArray2.default)(_useState,2);var transform=_useState[0],
setTransform=_useState[1],updateTransform=function(newTransform,action){null===frame.current&&(queue.current=[],frame.current=(0,_raf.default)(function(){setTransform(function(preState){var memoState=preState;queue.current.forEach(function(queueState){memoState=(0,_objectSpread2.default)((0,_objectSpread2.default)({},memoState),queueState)});frame.current=null;null===onTransform||void 0===onTransform||onTransform({transform:memoState,action});return memoState})}));queue.current.push((0,_objectSpread2.default)((0,_objectSpread2.default)({},
transform),newTransform))};return{transform,resetTransform:function(action){setTransform(initialTransform);(0,_isEqual.default)(initialTransform,transform)||null===onTransform||void 0===onTransform||onTransform({transform:initialTransform,action})},updateTransform,dispatchZoomChange:function(ratio,action,centerX,centerY,isTouch){var _imgRef$current=imgRef.current,width=_imgRef$current.width,height=_imgRef$current.height,offsetWidth=_imgRef$current.offsetWidth,offsetHeight=_imgRef$current.offsetHeight,
offsetLeft=_imgRef$current.offsetLeft,offsetTop=_imgRef$current.offsetTop,newRatio=ratio;_imgRef$current=transform.scale*ratio;_imgRef$current>maxScale?(_imgRef$current=maxScale,newRatio=maxScale/transform.scale):_imgRef$current<minScale&&(_imgRef$current=isTouch?_imgRef$current:minScale,newRatio=_imgRef$current/transform.scale);isTouch=newRatio-1;centerX=transform.x-(isTouch*((null!==centerX&&void 0!==centerX?centerX:innerWidth/2)-transform.x-offsetLeft)-isTouch*width*.5);centerY=transform.y-(isTouch*
((null!==centerY&&void 0!==centerY?centerY:innerHeight/2)-transform.y-offsetTop)-isTouch*height*.5);1>ratio&&1===_imgRef$current&&(ratio=offsetWidth*_imgRef$current,offsetHeight*=_imgRef$current,offsetWidth=(0,_css.getClientSize)(),height=offsetWidth.height,ratio<=offsetWidth.width&&offsetHeight<=height&&(centerY=centerX=0));updateTransform({x:centerX,y:centerY,scale:_imgRef$current},action)}}};var _objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_slicedToArray2=
global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_css=require("module$node_modules$rc_util$lib$Dom$css"),_isEqual=global(require("module$node_modules$rc_util$lib$isEqual")),_raf=global(require("module$node_modules$rc_util$lib$raf")),_react=require("module$node_modules$react$index"),initialTransform={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1}}
//# sourceMappingURL=module$node_modules$rc_image$lib$hooks$useImageTransform.js.map
