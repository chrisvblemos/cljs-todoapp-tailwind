{
"version":3,
"file":"module$node_modules$antd$lib$modal$useModal$index.js",
"lineCount":6,
"mappings":"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",
"sources":["node_modules/antd/lib/modal/useModal/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$antd$lib$modal$useModal$index\"] = function(global,require,module,exports) {\n\"use strict\";\n\"use client\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _usePatchElement = _interopRequireDefault(require(\"../../_util/hooks/usePatchElement\"));\nvar _confirm = require(\"../confirm\");\nvar _destroyFns = _interopRequireDefault(require(\"../destroyFns\"));\nvar _HookModal = _interopRequireDefault(require(\"./HookModal\"));\nlet uuid = 0;\nconst ElementsHolder = /*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef((_props, ref) => {\n  const [elements, patchElement] = (0, _usePatchElement.default)();\n  React.useImperativeHandle(ref, () => ({\n    patchElement\n  }), []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, elements);\n}));\nfunction useModal() {\n  const holderRef = React.useRef(null);\n  // ========================== Effect ==========================\n  const [actionQueue, setActionQueue] = React.useState([]);\n  React.useEffect(() => {\n    if (actionQueue.length) {\n      const cloneQueue = (0, _toConsumableArray2.default)(actionQueue);\n      cloneQueue.forEach(action => {\n        action();\n      });\n      setActionQueue([]);\n    }\n  }, [actionQueue]);\n  // =========================== Hook ===========================\n  const getConfirmFunc = React.useCallback(withFunc => function hookConfirm(config) {\n    var _a;\n    uuid += 1;\n    const modalRef = /*#__PURE__*/React.createRef();\n    // Proxy to promise with `onClose`\n    let resolvePromise;\n    const promise = new Promise(resolve => {\n      resolvePromise = resolve;\n    });\n    let silent = false;\n    let closeFunc;\n    const modal = /*#__PURE__*/React.createElement(_HookModal.default, {\n      key: `modal-${uuid}`,\n      config: withFunc(config),\n      ref: modalRef,\n      afterClose: () => {\n        closeFunc === null || closeFunc === void 0 ? void 0 : closeFunc();\n      },\n      isSilent: () => silent,\n      onConfirm: confirmed => {\n        resolvePromise(confirmed);\n      }\n    });\n    closeFunc = (_a = holderRef.current) === null || _a === void 0 ? void 0 : _a.patchElement(modal);\n    if (closeFunc) {\n      _destroyFns.default.push(closeFunc);\n    }\n    const instance = {\n      destroy: () => {\n        function destroyAction() {\n          var _a;\n          (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n        }\n        if (modalRef.current) {\n          destroyAction();\n        } else {\n          setActionQueue(prev => [].concat((0, _toConsumableArray2.default)(prev), [destroyAction]));\n        }\n      },\n      update: newConfig => {\n        function updateAction() {\n          var _a;\n          (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.update(newConfig);\n        }\n        if (modalRef.current) {\n          updateAction();\n        } else {\n          setActionQueue(prev => [].concat((0, _toConsumableArray2.default)(prev), [updateAction]));\n        }\n      },\n      then: resolve => {\n        silent = true;\n        return promise.then(resolve);\n      }\n    };\n    return instance;\n  }, []);\n  const fns = React.useMemo(() => ({\n    info: getConfirmFunc(_confirm.withInfo),\n    success: getConfirmFunc(_confirm.withSuccess),\n    error: getConfirmFunc(_confirm.withError),\n    warning: getConfirmFunc(_confirm.withWarn),\n    confirm: getConfirmFunc(_confirm.withConfirm)\n  }), []);\n  return [fns, /*#__PURE__*/React.createElement(ElementsHolder, {\n    key: \"modal-holder\",\n    ref: holderRef\n  })];\n}\nvar _default = exports.default = useModal;\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireWildcard","default","_interopRequireDefault","Object","defineProperty","value","_toConsumableArray2","React","_usePatchElement","_confirm","_destroyFns","_HookModal","uuid","ElementsHolder","memo","forwardRef","_props","ref","elements","patchElement","useImperativeHandle","createElement","Fragment","useModal","holderRef","useRef","actionQueue","setActionQueue","useState","useEffect","length","cloneQueue","forEach","action","getConfirmFunc","useCallback","withFunc","hookConfirm","config","_a","modalRef","createRef","resolvePromise","promise","Promise","resolve","silent","closeFunc","modal","key","afterClose","isSilent","onConfirm","confirmed","current","push","destroy","destroyAction","prev","concat","update","newConfig","updateAction","then","useMemo","fns","info","withInfo","success","withSuccess","error","withError","warning","withWarn","confirm","withConfirm"]
}
