shadow$provide.module$node_modules$rc_virtual_list$lib$hooks$useHeights=function(global,require,module,exports){function parseNumber(value){value=parseFloat(value);return isNaN(value)?0:value}global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard").default;module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(getKey,onItemAdd,onItemRemove){function cancelRaf(){promiseIdRef.current+=
1}function collectHeight(){var sync=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;cancelRaf();var doCollect=function(){var changed=!1;instanceRef.current.forEach(function(element,key){if(element&&element.offsetParent){var htmlElement=(0,_findDOMNode.default)(element);element=htmlElement.offsetHeight;var _getComputedStyle=getComputedStyle(htmlElement);htmlElement=_getComputedStyle.marginBottom;_getComputedStyle=parseNumber(_getComputedStyle.marginTop);htmlElement=parseNumber(htmlElement);
element=element+_getComputedStyle+htmlElement;heightsRef.current.get(key)!==element&&(heightsRef.current.set(key,element),changed=!0)}});changed&&setUpdatedMark(function(c){return c+1})};if(sync)doCollect();else{promiseIdRef.current+=1;var id=promiseIdRef.current;Promise.resolve().then(function(){id===promiseIdRef.current&&doCollect()})}}var _React$useState=React.useState(0);_React$useState=(0,_slicedToArray2.default)(_React$useState,2);var updatedMark=_React$useState[0],setUpdatedMark=_React$useState[1],
instanceRef=(0,_react.useRef)(new Map),heightsRef=(0,_react.useRef)(new _CacheMap.default),promiseIdRef=(0,_react.useRef)(0);(0,_react.useEffect)(function(){return cancelRaf},[]);return[function(item,instance){var key=getKey(item),origin=instanceRef.current.get(key);instance?(instanceRef.current.set(key,instance),collectHeight()):instanceRef.current.delete(key);!origin!==!instance&&(instance?null===onItemAdd||void 0===onItemAdd||onItemAdd(item):null===onItemRemove||void 0===onItemRemove||onItemRemove(item))},
collectHeight,heightsRef.current,updatedMark]};var _slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_findDOMNode=module(require("module$node_modules$rc_util$lib$Dom$findDOMNode")),_react=global(require("module$node_modules$react$index")),React=_react,_CacheMap=module(require("module$node_modules$rc_virtual_list$lib$utils$CacheMap"))}
//# sourceMappingURL=module$node_modules$rc_virtual_list$lib$hooks$useHeights.js.map
