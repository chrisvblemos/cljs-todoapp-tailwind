shadow$provide.module$node_modules$rc_cascader$lib$OptionList$List=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard").default;module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _extends2=module(require("module$node_modules$$babel$runtime$helpers$extends")),_objectSpread2=module(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),
_defineProperty2=module(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_toConsumableArray2=module(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_classnames=module(require("module$node_modules$classnames$index")),React=global(require("module$node_modules$react$index")),_context=module(require("module$node_modules$rc_cascader$lib$context")),_commonUtil=require("module$node_modules$rc_cascader$lib$utils$commonUtil"),
_treeUtil=require("module$node_modules$rc_cascader$lib$utils$treeUtil"),_CacheContent=module(require("module$node_modules$rc_cascader$lib$OptionList$CacheContent")),_Column=global(require("module$node_modules$rc_cascader$lib$OptionList$Column")),_useActive3=module(require("module$node_modules$rc_cascader$lib$OptionList$useActive")),_useKeyboard=module(require("module$node_modules$rc_cascader$lib$OptionList$useKeyboard"));require=React.forwardRef(function(props,ref){var _optionColumns$,_ref3,_classNames,
prefixCls=props.prefixCls,multiple=props.multiple,searchValue=props.searchValue,toggleOpen=props.toggleOpen,notFoundContent=props.notFoundContent,direction=props.direction,open=props.open,disabled=props.disabled,containerRef=React.useRef(null),rtl="rtl"===direction,_React$useContext=React.useContext(_context.default),options=_React$useContext.options,values=_React$useContext.values,halfValues=_React$useContext.halfValues,fieldNames=_React$useContext.fieldNames,changeOnSelect=_React$useContext.changeOnSelect,
onSelect=_React$useContext.onSelect,searchOptions=_React$useContext.searchOptions,loadData=_React$useContext.loadData,expandTrigger=_React$useContext.expandTrigger,mergedPrefixCls=_React$useContext.dropdownPrefixCls||prefixCls;prefixCls=React.useState([]);prefixCls=(0,_slicedToArray2.default)(prefixCls,2);var loadingKeys=prefixCls[0],setLoadingKeys=prefixCls[1],internalLoadData=function(valueCells){if(loadData&&!searchValue){var rawOptions=(0,_treeUtil.toPathOptions)(valueCells,options,fieldNames).map(function(_ref){return _ref.option}),
lastOption=rawOptions[rawOptions.length-1];if(lastOption&&!(0,_commonUtil.isLeaf)(lastOption,fieldNames)){var pathKey=(0,_commonUtil.toPathKey)(valueCells);setLoadingKeys(function(keys){return[].concat((0,_toConsumableArray2.default)(keys),[pathKey])});loadData(rawOptions)}}};React.useEffect(function(){loadingKeys.length&&loadingKeys.forEach(function(loadingKey){var valueStrCells=(0,_commonUtil.toPathValueStr)(loadingKey);valueStrCells=(0,_treeUtil.toPathOptions)(valueStrCells,options,fieldNames,
!0).map(function(_ref2){return _ref2.option});valueStrCells=valueStrCells[valueStrCells.length-1];(!valueStrCells||valueStrCells[fieldNames.children]||(0,_commonUtil.isLeaf)(valueStrCells,fieldNames))&&setLoadingKeys(function(keys){return keys.filter(function(key){return key!==loadingKey})})})},[options,loadingKeys,fieldNames]);prefixCls=React.useMemo(function(){return new Set((0,_commonUtil.toPathKeys)(values))},[values]);_React$useContext=React.useMemo(function(){return new Set((0,_commonUtil.toPathKeys)(halfValues))},
[halfValues]);var _useActive=(0,_useActive3.default)(multiple,open);_useActive=(0,_slicedToArray2.default)(_useActive,2);var activeValueCells=_useActive[0],setActiveValueCells=_useActive[1];_useActive=function(nextValueCells){setActiveValueCells(nextValueCells);internalLoadData(nextValueCells)};var isSelectable=function(option){if(disabled)return!1;var optionDisabled=option.disabled;option=(0,_commonUtil.isLeaf)(option,fieldNames);return!optionDisabled&&(option||changeOnSelect||multiple)},onPathSelect=
function(valuePath,leaf){var fromKeyboard=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;onSelect(valuePath);!multiple&&(leaf||changeOnSelect&&("hover"===expandTrigger||fromKeyboard))&&toggleOpen(!1)},mergedOptions=React.useMemo(function(){return searchValue?searchOptions:options},[searchValue,searchOptions,options]),optionColumns=React.useMemo(function(){for(var optionList=[{options:mergedOptions}],currentList=mergedOptions,fullPathKeys=(0,_commonUtil.getFullPathKeys)(currentList,fieldNames),
_loop=function(){var activeValueCell=activeValueCells[i],currentOption=currentList.find(function(option,index){return(fullPathKeys[index]?(0,_commonUtil.toPathKey)(fullPathKeys[index]):option[fieldNames.value])===activeValueCell});currentOption=null===currentOption||void 0===currentOption?void 0:currentOption[fieldNames.children];if(null===currentOption||void 0===currentOption||!currentOption.length)return 1;currentList=currentOption;optionList.push({options:currentOption})},i=0;i<activeValueCells.length&&
!_loop();i+=1);return optionList},[mergedOptions,activeValueCells,fieldNames]);(0,_useKeyboard.default)(ref,mergedOptions,fieldNames,activeValueCells,_useActive,function(selectValueCells,option){isSelectable(option)&&onPathSelect(selectValueCells,(0,_commonUtil.isLeaf)(option,fieldNames),!0)},{direction,searchValue,toggleOpen,open});React.useEffect(function(){if(!searchValue)for(var i=0;i<activeValueCells.length;i+=1){var _containerRef$current,cellPath=activeValueCells.slice(0,i+1);cellPath=(0,_commonUtil.toPathKey)(cellPath);
var ele=null===(_containerRef$current=containerRef.current)||void 0===_containerRef$current?void 0:_containerRef$current.querySelector('li[data-path-key\x3d"'.concat(cellPath.replace(/\\{0,2}"/g,'\\"'),'"]'));ele&&(0,_commonUtil.scrollIntoParentView)(ele)}},[activeValueCells,searchValue]);ref=!(null!==(_optionColumns$=optionColumns[0])&&void 0!==_optionColumns$&&null!==(_optionColumns$=_optionColumns$.options)&&void 0!==_optionColumns$&&_optionColumns$.length);_optionColumns$=[(_ref3={},(0,_defineProperty2.default)(_ref3,
fieldNames.value,"__EMPTY__"),(0,_defineProperty2.default)(_ref3,_Column.FIX_LABEL,notFoundContent),(0,_defineProperty2.default)(_ref3,"disabled",!0),_ref3)];var columnProps=(0,_objectSpread2.default)((0,_objectSpread2.default)({},props),{},{multiple:!ref&&multiple,onSelect:onPathSelect,onActive:_useActive,onToggleOpen:toggleOpen,checkedSet:prefixCls,halfCheckedSet:_React$useContext,loadingKeys,isSelectable});props=(ref?[{options:_optionColumns$}]:optionColumns).map(function(col,index){var prevValuePath=
activeValueCells.slice(0,index);return React.createElement(_Column.default,(0,_extends2.default)({key:index},columnProps,{prefixCls:mergedPrefixCls,options:col.options,prevValuePath,activeValue:activeValueCells[index]}))});return React.createElement(_CacheContent.default,{open},React.createElement("div",{className:(0,_classnames.default)("".concat(mergedPrefixCls,"-menus"),(_classNames={},(0,_defineProperty2.default)(_classNames,"".concat(mergedPrefixCls,"-menu-empty"),ref),(0,_defineProperty2.default)(_classNames,
"".concat(mergedPrefixCls,"-rtl"),rtl),_classNames)),ref:containerRef},props))});require.displayName="RawOptionList";exports.default=require}
//# sourceMappingURL=module$node_modules$rc_cascader$lib$OptionList$List.js.map
