{
"version":3,
"file":"module$node_modules$rc_cascader$lib$OptionList$useKeyboard.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/rc-cascader/lib/OptionList/useKeyboard.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_cascader$lib$OptionList$useKeyboard\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _KeyCode = _interopRequireDefault(require(\"rc-util/lib/KeyCode\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _useSearchOptions = require(\"../hooks/useSearchOptions\");\nvar _commonUtil = require(\"../utils/commonUtil\");\nvar _default = exports.default = function _default(ref, options, fieldNames, activeValueCells, setActiveValueCells, onKeyBoardSelect, contextProps) {\n  var direction = contextProps.direction,\n    searchValue = contextProps.searchValue,\n    toggleOpen = contextProps.toggleOpen,\n    open = contextProps.open;\n  var rtl = direction === 'rtl';\n  var _React$useMemo = React.useMemo(function () {\n      var activeIndex = -1;\n      var currentOptions = options;\n      var mergedActiveIndexes = [];\n      var mergedActiveValueCells = [];\n      var len = activeValueCells.length;\n      var pathKeys = (0, _commonUtil.getFullPathKeys)(options, fieldNames);\n\n      // Fill validate active value cells and index\n      var _loop = function _loop(i) {\n        // Mark the active index for current options\n        var nextActiveIndex = currentOptions.findIndex(function (option, index) {\n          return (pathKeys[index] ? (0, _commonUtil.toPathKey)(pathKeys[index]) : option[fieldNames.value]) === activeValueCells[i];\n        });\n        if (nextActiveIndex === -1) {\n          return 1; // break\n        }\n        activeIndex = nextActiveIndex;\n        mergedActiveIndexes.push(activeIndex);\n        mergedActiveValueCells.push(activeValueCells[i]);\n        currentOptions = currentOptions[activeIndex][fieldNames.children];\n      };\n      for (var i = 0; i < len && currentOptions; i += 1) {\n        if (_loop(i)) break;\n      }\n\n      // Fill last active options\n      var activeOptions = options;\n      for (var _i = 0; _i < mergedActiveIndexes.length - 1; _i += 1) {\n        activeOptions = activeOptions[mergedActiveIndexes[_i]][fieldNames.children];\n      }\n      return [mergedActiveValueCells, activeIndex, activeOptions, pathKeys];\n    }, [activeValueCells, fieldNames, options]),\n    _React$useMemo2 = (0, _slicedToArray2.default)(_React$useMemo, 4),\n    validActiveValueCells = _React$useMemo2[0],\n    lastActiveIndex = _React$useMemo2[1],\n    lastActiveOptions = _React$useMemo2[2],\n    fullPathKeys = _React$useMemo2[3];\n\n  // Update active value cells and scroll to target element\n  var internalSetActiveValueCells = function internalSetActiveValueCells(next) {\n    setActiveValueCells(next);\n  };\n\n  // Same options offset\n  var offsetActiveOption = function offsetActiveOption(offset) {\n    var len = lastActiveOptions.length;\n    var currentIndex = lastActiveIndex;\n    if (currentIndex === -1 && offset < 0) {\n      currentIndex = len;\n    }\n    for (var i = 0; i < len; i += 1) {\n      currentIndex = (currentIndex + offset + len) % len;\n      var _option = lastActiveOptions[currentIndex];\n      if (_option && !_option.disabled) {\n        var nextActiveCells = validActiveValueCells.slice(0, -1).concat(fullPathKeys[currentIndex] ? (0, _commonUtil.toPathKey)(fullPathKeys[currentIndex]) : _option[fieldNames.value]);\n        internalSetActiveValueCells(nextActiveCells);\n        return;\n      }\n    }\n  };\n\n  // Different options offset\n  var prevColumn = function prevColumn() {\n    if (validActiveValueCells.length > 1) {\n      var nextActiveCells = validActiveValueCells.slice(0, -1);\n      internalSetActiveValueCells(nextActiveCells);\n    } else {\n      toggleOpen(false);\n    }\n  };\n  var nextColumn = function nextColumn() {\n    var _lastActiveOptions$la;\n    var nextOptions = ((_lastActiveOptions$la = lastActiveOptions[lastActiveIndex]) === null || _lastActiveOptions$la === void 0 ? void 0 : _lastActiveOptions$la[fieldNames.children]) || [];\n    var nextOption = nextOptions.find(function (option) {\n      return !option.disabled;\n    });\n    if (nextOption) {\n      var nextActiveCells = [].concat((0, _toConsumableArray2.default)(validActiveValueCells), [nextOption[fieldNames.value]]);\n      internalSetActiveValueCells(nextActiveCells);\n    }\n  };\n  React.useImperativeHandle(ref, function () {\n    return {\n      // scrollTo: treeRef.current?.scrollTo,\n      onKeyDown: function onKeyDown(event) {\n        var which = event.which;\n        switch (which) {\n          // >>> Arrow keys\n          case _KeyCode.default.UP:\n          case _KeyCode.default.DOWN:\n            {\n              var offset = 0;\n              if (which === _KeyCode.default.UP) {\n                offset = -1;\n              } else if (which === _KeyCode.default.DOWN) {\n                offset = 1;\n              }\n              if (offset !== 0) {\n                offsetActiveOption(offset);\n              }\n              break;\n            }\n          case _KeyCode.default.LEFT:\n            {\n              if (searchValue) {\n                break;\n              }\n              if (rtl) {\n                nextColumn();\n              } else {\n                prevColumn();\n              }\n              break;\n            }\n          case _KeyCode.default.RIGHT:\n            {\n              if (searchValue) {\n                break;\n              }\n              if (rtl) {\n                prevColumn();\n              } else {\n                nextColumn();\n              }\n              break;\n            }\n          case _KeyCode.default.BACKSPACE:\n            {\n              if (!searchValue) {\n                prevColumn();\n              }\n              break;\n            }\n\n          // >>> Select\n          case _KeyCode.default.ENTER:\n            {\n              if (validActiveValueCells.length) {\n                var _option2 = lastActiveOptions[lastActiveIndex];\n\n                // Search option should revert back of origin options\n                var originOptions = (_option2 === null || _option2 === void 0 ? void 0 : _option2[_useSearchOptions.SEARCH_MARK]) || [];\n                if (originOptions.length) {\n                  onKeyBoardSelect(originOptions.map(function (opt) {\n                    return opt[fieldNames.value];\n                  }), originOptions[originOptions.length - 1]);\n                } else {\n                  onKeyBoardSelect(validActiveValueCells, lastActiveOptions[lastActiveIndex]);\n                }\n              }\n              break;\n            }\n\n          // >>> Close\n          case _KeyCode.default.ESC:\n            {\n              toggleOpen(false);\n              if (open) {\n                event.stopPropagation();\n              }\n            }\n        }\n      },\n      onKeyUp: function onKeyUp() {}\n    };\n  });\n};\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireWildcard","default","_interopRequireDefault","Object","defineProperty","value","_toConsumableArray2","_slicedToArray2","_KeyCode","React","_useSearchOptions","_commonUtil","exports.default","ref","options","fieldNames","activeValueCells","setActiveValueCells","onKeyBoardSelect","contextProps","searchValue","toggleOpen","open","rtl","direction","_React$useMemo","useMemo","activeIndex","currentOptions","mergedActiveIndexes","mergedActiveValueCells","len","length","pathKeys","getFullPathKeys","_loop","i","nextActiveIndex","findIndex","option","index","toPathKey","push","children","activeOptions","_i","_React$useMemo2","validActiveValueCells","lastActiveIndex","lastActiveOptions","fullPathKeys","offsetActiveOption","offset","currentIndex","_option","disabled","nextActiveCells","slice","concat","prevColumn","nextColumn","_lastActiveOptions$la","nextOption","find","useImperativeHandle","onKeyDown","event","which","UP","DOWN","LEFT","RIGHT","BACKSPACE","ENTER","_option2","originOptions","SEARCH_MARK","map","opt","ESC","stopPropagation","onKeyUp"]
}
