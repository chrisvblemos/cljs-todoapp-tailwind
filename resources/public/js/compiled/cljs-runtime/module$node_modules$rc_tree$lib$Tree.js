shadow$provide.module$node_modules$rc_tree$lib$Tree=function(global,require,module,exports){function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof3(e)&&"function"!=typeof e)return{default:e};if((r=_getRequireWildcardCache(r))&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&
Object.getOwnPropertyDescriptor,u;for(u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}var _interopRequireDefault=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault"),_typeof3=require("module$node_modules$$babel$runtime$helpers$typeof");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _extends2=
_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$extends")),_typeof2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$typeof")),_objectSpread3=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_toConsumableArray2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_classCallCheck2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),
_createClass2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$createClass")),_assertThisInitialized2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$assertThisInitialized")),_inherits2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$inherits")),_createSuper2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$createSuper")),_defineProperty2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$defineProperty")),
_classnames=_interopRequireDefault(require("module$node_modules$classnames$index")),_KeyCode=_interopRequireDefault(require("module$node_modules$rc_util$lib$KeyCode")),_pickAttrs=_interopRequireDefault(require("module$node_modules$rc_util$lib$pickAttrs")),_warning=_interopRequireDefault(require("module$node_modules$rc_util$lib$warning")),React=_interopRequireWildcard(require("module$node_modules$react$index")),_contextTypes=require("module$node_modules$rc_tree$lib$contextTypes");global=_interopRequireDefault(require("module$node_modules$rc_tree$lib$DropIndicator"));
var _NodeList=_interopRequireWildcard(require("module$node_modules$rc_tree$lib$NodeList"));module=_interopRequireDefault(require("module$node_modules$rc_tree$lib$TreeNode"));var _util=require("module$node_modules$rc_tree$lib$util"),_conductUtil=require("module$node_modules$rc_tree$lib$utils$conductUtil"),_keyUtil=_interopRequireDefault(require("module$node_modules$rc_tree$lib$utils$keyUtil")),_treeUtil=require("module$node_modules$rc_tree$lib$utils$treeUtil");require=function(_React$Component){function Tree(){(0,_classCallCheck2.default)(this,
Tree);for(var _len=arguments.length,_args=Array(_len),_key=0;_key<_len;_key++)_args[_key]=arguments[_key];var _this=_super.call.apply(_super,[this].concat(_args));(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"destroyed",!1);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"delayedDragEnterLogic",void 0);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"loadingRetryTimes",{});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),
"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:(0,_treeUtil.fillFieldNames)()});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),
"dragStartMousePosition",null);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"dragNodeProps",null);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"currentMouseOverDroppableNodeKey",null);(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"listRef",React.createRef());(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeDragStart",function(event,nodeProps){var _this$state=_this.state,expandedKeys=_this$state.expandedKeys;
_this$state=_this$state.keyEntities;var onDragStart=_this.props.onDragStart,eventKey=nodeProps.eventKey;_this.dragNodeProps=nodeProps;_this.dragStartMousePosition={x:event.clientX,y:event.clientY};expandedKeys=(0,_util.arrDel)(expandedKeys,eventKey);_this.setState({draggingNodeKey:eventKey,dragChildrenKeys:(0,_util.getDragChildrenKeys)(eventKey,_this$state),indent:_this.listRef.current.getIndentWidth()});_this.setExpandedKeys(expandedKeys);window.addEventListener("dragend",_this.onWindowDragEnd);
null===onDragStart||void 0===onDragStart||onDragStart({event,node:(0,_treeUtil.convertNodePropsToEventData)(nodeProps)})});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeDragEnter",function(event,nodeProps){var _this$state2=_this.state,expandedKeys=_this$state2.expandedKeys,keyEntities=_this$state2.keyEntities,dragChildrenKeys=_this$state2.dragChildrenKeys,flattenNodes=_this$state2.flattenNodes,indent=_this$state2.indent,_this$props=_this.props;_this$state2=_this$props.onDragEnter;
var onExpand=_this$props.onExpand,allowDrop=_this$props.allowDrop,direction=_this$props.direction;_this$props=nodeProps.pos;var eventKey=nodeProps.eventKey;_this.currentMouseOverDroppableNodeKey!==eventKey&&(_this.currentMouseOverDroppableNodeKey=eventKey);if(_this.dragNodeProps){var _calcDropPosition=(0,_util.calcDropPosition)(event,_this.dragNodeProps,nodeProps,indent,_this.dragStartMousePosition,allowDrop,flattenNodes,keyEntities,expandedKeys,direction);flattenNodes=_calcDropPosition.dropPosition;
indent=_calcDropPosition.dropLevelOffset;allowDrop=_calcDropPosition.dropTargetKey;direction=_calcDropPosition.dropContainerKey;eventKey=_calcDropPosition.dropTargetPos;var dropAllowed=_calcDropPosition.dropAllowed;_calcDropPosition=_calcDropPosition.dragOverNodeKey;dragChildrenKeys.includes(allowDrop)||!dropAllowed?_this.resetDragState():(_this.delayedDragEnterLogic||(_this.delayedDragEnterLogic={}),Object.keys(_this.delayedDragEnterLogic).forEach(function(key){clearTimeout(_this.delayedDragEnterLogic[key])}),
_this.dragNodeProps.eventKey!==nodeProps.eventKey&&(event.persist(),_this.delayedDragEnterLogic[_this$props]=window.setTimeout(function(){if(null!==_this.state.draggingNodeKey){var newExpandedKeys=(0,_toConsumableArray2.default)(expandedKeys),entity=(0,_keyUtil.default)(keyEntities,nodeProps.eventKey);entity&&(entity.children||[]).length&&(newExpandedKeys=(0,_util.arrAdd)(expandedKeys,nodeProps.eventKey));_this.props.hasOwnProperty("expandedKeys")||_this.setExpandedKeys(newExpandedKeys);null===onExpand||
void 0===onExpand||onExpand(newExpandedKeys,{node:(0,_treeUtil.convertNodePropsToEventData)(nodeProps),expanded:!0,nativeEvent:event.nativeEvent})}},800)),_this.dragNodeProps.eventKey===allowDrop&&0===indent?_this.resetDragState():(_this.setState({dragOverNodeKey:_calcDropPosition,dropPosition:flattenNodes,dropLevelOffset:indent,dropTargetKey:allowDrop,dropContainerKey:direction,dropTargetPos:eventKey,dropAllowed}),null===_this$state2||void 0===_this$state2||_this$state2({event,node:(0,_treeUtil.convertNodePropsToEventData)(nodeProps),
expandedKeys})))}else _this.resetDragState()});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeDragOver",function(event,nodeProps){var _this$state3=_this.state,dragChildrenKeys=_this$state3.dragChildrenKeys,_this$props2=_this.props,onDragOver=_this$props2.onDragOver;if(_this.dragNodeProps){var _calcDropPosition2=(0,_util.calcDropPosition)(event,_this.dragNodeProps,nodeProps,_this$state3.indent,_this.dragStartMousePosition,_this$props2.allowDrop,_this$state3.flattenNodes,
_this$state3.keyEntities,_this$state3.expandedKeys,_this$props2.direction);_this$state3=_calcDropPosition2.dropPosition;_this$props2=_calcDropPosition2.dropLevelOffset;var dropTargetKey=_calcDropPosition2.dropTargetKey,dropContainerKey=_calcDropPosition2.dropContainerKey,dropTargetPos=_calcDropPosition2.dropTargetPos,dropAllowed=_calcDropPosition2.dropAllowed;_calcDropPosition2=_calcDropPosition2.dragOverNodeKey;!dragChildrenKeys.includes(dropTargetKey)&&dropAllowed&&(_this.dragNodeProps.eventKey===
dropTargetKey&&0===_this$props2?null===_this.state.dropPosition&&null===_this.state.dropLevelOffset&&null===_this.state.dropTargetKey&&null===_this.state.dropContainerKey&&null===_this.state.dropTargetPos&&!1===_this.state.dropAllowed&&null===_this.state.dragOverNodeKey||_this.resetDragState():_this$state3===_this.state.dropPosition&&_this$props2===_this.state.dropLevelOffset&&dropTargetKey===_this.state.dropTargetKey&&dropContainerKey===_this.state.dropContainerKey&&dropTargetPos===_this.state.dropTargetPos&&
dropAllowed===_this.state.dropAllowed&&_calcDropPosition2===_this.state.dragOverNodeKey||_this.setState({dropPosition:_this$state3,dropLevelOffset:_this$props2,dropTargetKey,dropContainerKey,dropTargetPos,dropAllowed,dragOverNodeKey:_calcDropPosition2}),null===onDragOver||void 0===onDragOver||onDragOver({event,node:(0,_treeUtil.convertNodePropsToEventData)(nodeProps)}))}});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeDragLeave",function(event,nodeProps){_this.currentMouseOverDroppableNodeKey!==
nodeProps.eventKey||event.currentTarget.contains(event.relatedTarget)||(_this.resetDragState(),_this.currentMouseOverDroppableNodeKey=null);var onDragLeave=_this.props.onDragLeave;null===onDragLeave||void 0===onDragLeave||onDragLeave({event,node:(0,_treeUtil.convertNodePropsToEventData)(nodeProps)})});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onWindowDragEnd",function(event){_this.onNodeDragEnd(event,null,!0);window.removeEventListener("dragend",_this.onWindowDragEnd)});
(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeDragEnd",function(event,nodeProps){var onDragEnd=_this.props.onDragEnd;_this.setState({dragOverNodeKey:null});_this.cleanDragState();null===onDragEnd||void 0===onDragEnd||onDragEnd({event,node:(0,_treeUtil.convertNodePropsToEventData)(nodeProps)});_this.dragNodeProps=null;window.removeEventListener("dragend",_this.onWindowDragEnd)});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeDrop",function(event,
_){var _this$getActiveItem,outsideTree=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,_this$state4=_this.state,dragChildrenKeys=_this$state4.dragChildrenKeys,dropPosition=_this$state4.dropPosition,dropTargetKey=_this$state4.dropTargetKey,dropTargetPos=_this$state4.dropTargetPos;if(_this$state4.dropAllowed&&(_this$state4=_this.props.onDrop,_this.setState({dragOverNodeKey:null}),_this.cleanDragState(),null!==dropTargetKey)){var abstractDropNodeProps=(0,_objectSpread3.default)((0,_objectSpread3.default)({},
(0,_treeUtil.getTreeNodeProps)(dropTargetKey,_this.getTreeNodeRequiredProps())),{},{active:(null===(_this$getActiveItem=_this.getActiveItem())||void 0===_this$getActiveItem?void 0:_this$getActiveItem.key)===dropTargetKey,data:(0,_keyUtil.default)(_this.state.keyEntities,dropTargetKey).node});_this$getActiveItem=dragChildrenKeys.includes(dropTargetKey);(0,_warning.default)(!_this$getActiveItem,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");dropTargetPos=
(0,_util.posToArr)(dropTargetPos);dragChildrenKeys={event,node:(0,_treeUtil.convertNodePropsToEventData)(abstractDropNodeProps),dragNode:_this.dragNodeProps?(0,_treeUtil.convertNodePropsToEventData)(_this.dragNodeProps):null,dragNodesKeys:[_this.dragNodeProps.eventKey].concat(dragChildrenKeys),dropToGap:0!==dropPosition,dropPosition:dropPosition+Number(dropTargetPos[dropTargetPos.length-1])};outsideTree||null===_this$state4||void 0===_this$state4||_this$state4(dragChildrenKeys);_this.dragNodeProps=
null}});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"cleanDragState",function(){null!==_this.state.draggingNodeKey&&_this.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null});_this.dragStartMousePosition=null;_this.currentMouseOverDroppableNodeKey=null});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"triggerExpandActionExpand",function(e,treeNode){var _this$state5=
_this.state,expandedKeys=_this$state5.expandedKeys,expanded=treeNode.expanded,key=treeNode.key;treeNode.isLeaf||e.shiftKey||e.metaKey||e.ctrlKey||(treeNode=_this$state5.flattenNodes.filter(function(nodeItem){return nodeItem.key===key})[0],treeNode=(0,_treeUtil.convertNodePropsToEventData)((0,_objectSpread3.default)((0,_objectSpread3.default)({},(0,_treeUtil.getTreeNodeProps)(key,_this.getTreeNodeRequiredProps())),{},{data:treeNode.data})),_this.setExpandedKeys(expanded?(0,_util.arrDel)(expandedKeys,
key):(0,_util.arrAdd)(expandedKeys,key)),_this.onNodeExpand(e,treeNode))});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeClick",function(e,treeNode){var _this$props3=_this.props,onClick=_this$props3.onClick;"click"===_this$props3.expandAction&&_this.triggerExpandActionExpand(e,treeNode);null===onClick||void 0===onClick||onClick(e,treeNode)});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeDoubleClick",function(e,treeNode){var _this$props4=
_this.props,onDoubleClick=_this$props4.onDoubleClick;"doubleClick"===_this$props4.expandAction&&_this.triggerExpandActionExpand(e,treeNode);null===onDoubleClick||void 0===onDoubleClick||onDoubleClick(e,treeNode)});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeSelect",function(e,treeNode){var selectedKeys=_this.state.selectedKeys,_this$state6=_this.state,keyEntities=_this$state6.keyEntities,_this$props5=_this.props,onSelect=_this$props5.onSelect;_this$props5=_this$props5.multiple;
var key=treeNode[_this$state6.fieldNames.key];selectedKeys=(_this$state6=!treeNode.selected)?_this$props5?(0,_util.arrAdd)(selectedKeys,key):[key]:(0,_util.arrDel)(selectedKeys,key);_this$props5=selectedKeys.map(function(selectedKey){return(selectedKey=(0,_keyUtil.default)(keyEntities,selectedKey))?selectedKey.node:null}).filter(Boolean);_this.setUncontrolledState({selectedKeys});null===onSelect||void 0===onSelect||onSelect(selectedKeys,{event:"select",selected:_this$state6,node:treeNode,selectedNodes:_this$props5,
nativeEvent:e.nativeEvent})});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeCheck",function(e,treeNode,checked){var _this$state7=_this.state,keyEntities=_this$state7.keyEntities,oriCheckedKeys=_this$state7.checkedKeys,oriHalfCheckedKeys=_this$state7.halfCheckedKeys,_this$props6=_this.props;_this$state7=_this$props6.onCheck;var key=treeNode.key,eventObj={event:"check",node:treeNode,checked,nativeEvent:e.nativeEvent};_this$props6.checkStrictly?(checked=checked?(0,_util.arrAdd)(oriCheckedKeys,
key):(0,_util.arrDel)(oriCheckedKeys,key),key=(0,_util.arrDel)(oriHalfCheckedKeys,key),key={checked,halfChecked:key},eventObj.checkedNodes=checked.map(function(checkedKey){return(0,_keyUtil.default)(keyEntities,checkedKey)}).filter(Boolean).map(function(entity){return entity.node}),_this.setUncontrolledState({checkedKeys:checked})):(treeNode=(0,_conductUtil.conductCheck)([].concat((0,_toConsumableArray2.default)(oriCheckedKeys),[key]),!0,keyEntities),e=treeNode.checkedKeys,treeNode=treeNode.halfCheckedKeys,
checked||(checked=new Set(e),checked.delete(key),key=(0,_conductUtil.conductCheck)(Array.from(checked),{checked:!1,halfCheckedKeys:treeNode},keyEntities),e=key.checkedKeys,treeNode=key.halfCheckedKeys),key=e,eventObj.checkedNodes=[],eventObj.checkedNodesPositions=[],eventObj.halfCheckedKeys=treeNode,e.forEach(function(checkedKey){var entity=(0,_keyUtil.default)(keyEntities,checkedKey);entity&&(checkedKey=entity.node,entity=entity.pos,eventObj.checkedNodes.push(checkedKey),eventObj.checkedNodesPositions.push({node:checkedKey,
pos:entity}))}),_this.setUncontrolledState({checkedKeys:e},!1,{halfCheckedKeys:treeNode}));null===_this$state7||void 0===_this$state7||_this$state7(key,eventObj)});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeLoad",function(treeNode){var _entity$children,key=treeNode.key,entity=(0,_keyUtil.default)(_this.state.keyEntities,key);if(null===entity||void 0===entity||null===(_entity$children=entity.children)||void 0===_entity$children||!_entity$children.length)return _entity$children=
new Promise(function(resolve,reject){_this.setState(function(_ref){var _ref$loadedKeys=_ref.loadedKeys;_ref$loadedKeys=void 0===_ref$loadedKeys?[]:_ref$loadedKeys;_ref=_ref.loadingKeys;_ref=void 0===_ref?[]:_ref;var _this$props7=_this.props,loadData=_this$props7.loadData,onLoad=_this$props7.onLoad;if(!loadData||_ref$loadedKeys.includes(key)||_ref.includes(key))return null;loadData(treeNode).then(function(){var newLoadedKeys=(0,_util.arrAdd)(_this.state.loadedKeys,key);null===onLoad||void 0===onLoad||
onLoad(newLoadedKeys,{event:"load",node:treeNode});_this.setUncontrolledState({loadedKeys:newLoadedKeys});_this.setState(function(prevState){return{loadingKeys:(0,_util.arrDel)(prevState.loadingKeys,key)}});resolve()}).catch(function(e){_this.setState(function(prevState){return{loadingKeys:(0,_util.arrDel)(prevState.loadingKeys,key)}});_this.loadingRetryTimes[key]=(_this.loadingRetryTimes[key]||0)+1;if(10<=_this.loadingRetryTimes[key]){var currentLoadedKeys=_this.state.loadedKeys;(0,_warning.default)(!1,
"Retry for `loadData` many times but still failed. No more retry.");_this.setUncontrolledState({loadedKeys:(0,_util.arrAdd)(currentLoadedKeys,key)});resolve()}reject(e)});return{loadingKeys:(0,_util.arrAdd)(_ref,key)}})}),_entity$children.catch(function(){}),_entity$children});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeMouseEnter",function(event,node){var onMouseEnter=_this.props.onMouseEnter;null===onMouseEnter||void 0===onMouseEnter||onMouseEnter({event,node})});
(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeMouseLeave",function(event,node){var onMouseLeave=_this.props.onMouseLeave;null===onMouseLeave||void 0===onMouseLeave||onMouseLeave({event,node})});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeContextMenu",function(event,node){var onRightClick=_this.props.onRightClick;onRightClick&&(event.preventDefault(),onRightClick({event,node}))});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),
"onFocus",function(){var onFocus=_this.props.onFocus;_this.setState({focused:!0});for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];null===onFocus||void 0===onFocus||onFocus.apply(void 0,args)});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onBlur",function(){var onBlur=_this.props.onBlur;_this.setState({focused:!1});_this.onActiveChange(null);for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=
arguments[_key3];null===onBlur||void 0===onBlur||onBlur.apply(void 0,args)});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"getTreeNodeRequiredProps",function(){var _this$state8=_this.state;return{expandedKeys:_this$state8.expandedKeys||[],selectedKeys:_this$state8.selectedKeys||[],loadedKeys:_this$state8.loadedKeys||[],loadingKeys:_this$state8.loadingKeys||[],checkedKeys:_this$state8.checkedKeys||[],halfCheckedKeys:_this$state8.halfCheckedKeys||[],dragOverNodeKey:_this$state8.dragOverNodeKey,
dropPosition:_this$state8.dropPosition,keyEntities:_this$state8.keyEntities}});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"setExpandedKeys",function(expandedKeys){var _this$state9=_this.state;_this$state9=(0,_treeUtil.flattenTreeData)(_this$state9.treeData,expandedKeys,_this$state9.fieldNames);_this.setUncontrolledState({expandedKeys,flattenNodes:_this$state9},!0)});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onNodeExpand",function(e,treeNode){var expandedKeys=
_this.state.expandedKeys,_this$state10=_this.state,fieldNames=_this$state10.fieldNames,_this$props8=_this.props,onExpand=_this$props8.onExpand;_this$props8=_this$props8.loadData;var expanded=treeNode.expanded,key=treeNode[fieldNames.key];if(!_this$state10.listChanging){_this$state10=expandedKeys.includes(key);var targetExpanded=!expanded;(0,_warning.default)(expanded&&_this$state10||!expanded&&!_this$state10,"Expand state not sync with index check");expandedKeys=targetExpanded?(0,_util.arrAdd)(expandedKeys,
key):(0,_util.arrDel)(expandedKeys,key);_this.setExpandedKeys(expandedKeys);null===onExpand||void 0===onExpand||onExpand(expandedKeys,{node:treeNode,expanded:targetExpanded,nativeEvent:e.nativeEvent});targetExpanded&&_this$props8&&(e=_this.onNodeLoad(treeNode))&&e.then(function(){var newFlattenTreeData=(0,_treeUtil.flattenTreeData)(_this.state.treeData,expandedKeys,fieldNames);_this.setUncontrolledState({flattenNodes:newFlattenTreeData})}).catch(function(){var expandedKeysToRestore=(0,_util.arrDel)(_this.state.expandedKeys,
key);_this.setExpandedKeys(expandedKeysToRestore)})}});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onListChangeStart",function(){_this.setUncontrolledState({listChanging:!0})});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onListChangeEnd",function(){setTimeout(function(){_this.setUncontrolledState({listChanging:!1})})});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onActiveChange",function(newActiveKey){var _this$props9=
_this.props,onActiveChange=_this$props9.onActiveChange;_this$props9=_this$props9.itemScrollOffset;_this$props9=void 0===_this$props9?0:_this$props9;_this.state.activeKey!==newActiveKey&&(_this.setState({activeKey:newActiveKey}),null!==newActiveKey&&_this.scrollTo({key:newActiveKey,offset:_this$props9}),null===onActiveChange||void 0===onActiveChange||onActiveChange(newActiveKey))});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"getActiveItem",function(){var _this$state11=
_this.state,activeKey=_this$state11.activeKey;return null===activeKey?null:_this$state11.flattenNodes.find(function(_ref2){return _ref2.key===activeKey})||null});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"offsetActiveKey",function(offset){var _this$state12=_this.state,flattenNodes=_this$state12.flattenNodes,activeKey=_this$state12.activeKey;_this$state12=flattenNodes.findIndex(function(_ref3){return _ref3.key===activeKey});-1===_this$state12&&0>offset&&(_this$state12=
flattenNodes.length);_this$state12=(_this$state12+offset+flattenNodes.length)%flattenNodes.length;if(offset=flattenNodes[_this$state12])_this.onActiveChange(offset.key);else _this.onActiveChange(null)});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"onKeyDown",function(event){var _this$state13=_this.state,activeKey=_this$state13.activeKey,expandedKeys=_this$state13.expandedKeys,checkedKeys=_this$state13.checkedKeys,fieldNames=_this$state13.fieldNames,_this$props10=_this.props;
_this$state13=_this$props10.onKeyDown;var checkable=_this$props10.checkable;_this$props10=_this$props10.selectable;switch(event.which){case _KeyCode.default.UP:_this.offsetActiveKey(-1);event.preventDefault();break;case _KeyCode.default.DOWN:_this.offsetActiveKey(1),event.preventDefault()}var activeItem=_this.getActiveItem();if(activeItem&&activeItem.data){var treeNodeRequiredProps=_this.getTreeNodeRequiredProps();fieldNames=!1===activeItem.data.isLeaf||!!(activeItem.data[fieldNames.children]||[]).length;
treeNodeRequiredProps=(0,_treeUtil.convertNodePropsToEventData)((0,_objectSpread3.default)((0,_objectSpread3.default)({},(0,_treeUtil.getTreeNodeProps)(activeKey,treeNodeRequiredProps)),{},{data:activeItem.data,active:!0}));switch(event.which){case _KeyCode.default.LEFT:if(fieldNames&&expandedKeys.includes(activeKey))_this.onNodeExpand({},treeNodeRequiredProps);else if(activeItem.parent)_this.onActiveChange(activeItem.parent.key);event.preventDefault();break;case _KeyCode.default.RIGHT:if(fieldNames&&
!expandedKeys.includes(activeKey))_this.onNodeExpand({},treeNodeRequiredProps);else if(activeItem.children&&activeItem.children.length)_this.onActiveChange(activeItem.children[0].key);event.preventDefault();break;case _KeyCode.default.ENTER:case _KeyCode.default.SPACE:if(checkable&&!treeNodeRequiredProps.disabled&&!1!==treeNodeRequiredProps.checkable&&!treeNodeRequiredProps.disableCheckbox)_this.onNodeCheck({},treeNodeRequiredProps,!checkedKeys.includes(activeKey));else if(!checkable&&_this$props10&&
!treeNodeRequiredProps.disabled&&!1!==treeNodeRequiredProps.selectable)_this.onNodeSelect({},treeNodeRequiredProps)}}null===_this$state13||void 0===_this$state13||_this$state13(event)});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"setUncontrolledState",function(state){var atomic=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,forceState=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!_this.destroyed){var needSync=!1,allPassed=!0,newState={};Object.keys(state).forEach(function(name){_this.props.hasOwnProperty(name)?
allPassed=!1:(needSync=!0,newState[name]=state[name])});!needSync||atomic&&!allPassed||_this.setState((0,_objectSpread3.default)((0,_objectSpread3.default)({},newState),forceState))}});(0,_defineProperty2.default)((0,_assertThisInitialized2.default)(_this),"scrollTo",function(scroll){_this.listRef.current.scrollTo(scroll)});return _this}(0,_inherits2.default)(Tree,_React$Component);var _super=(0,_createSuper2.default)(Tree);(0,_createClass2.default)(Tree,[{key:"componentDidMount",value:function(){this.destroyed=
!1;this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var _this$props11=this.props,activeKey=_this$props11.activeKey;_this$props11=_this$props11.itemScrollOffset;_this$props11=void 0===_this$props11?0:_this$props11;void 0!==activeKey&&activeKey!==this.state.activeKey&&(this.setState({activeKey}),null!==activeKey&&this.scrollTo({key:activeKey,offset:_this$props11}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",
this.onWindowDragEnd);this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var _this$state14=this.state,focused=_this$state14.focused,flattenNodes=_this$state14.flattenNodes,keyEntities=_this$state14.keyEntities,draggingNodeKey=_this$state14.draggingNodeKey,activeKey=_this$state14.activeKey,dropLevelOffset=_this$state14.dropLevelOffset,
dropContainerKey=_this$state14.dropContainerKey,dropTargetKey=_this$state14.dropTargetKey,dropPosition=_this$state14.dropPosition,dragOverNodeKey=_this$state14.dragOverNodeKey;_this$state14=_this$state14.indent;var _this$props12=this.props,prefixCls=_this$props12.prefixCls,className=_this$props12.className,style=_this$props12.style,showLine=_this$props12.showLine,focusable=_this$props12.focusable,_this$props12$tabInde=_this$props12.tabIndex;_this$props12$tabInde=void 0===_this$props12$tabInde?0:_this$props12$tabInde;
var selectable=_this$props12.selectable,showIcon=_this$props12.showIcon,icon=_this$props12.icon,switcherIcon=_this$props12.switcherIcon,draggable=_this$props12.draggable,checkable=_this$props12.checkable,checkStrictly=_this$props12.checkStrictly,disabled=_this$props12.disabled,motion=_this$props12.motion,loadData=_this$props12.loadData,filterTreeNode=_this$props12.filterTreeNode,height=_this$props12.height,itemHeight=_this$props12.itemHeight,scrollWidth=_this$props12.scrollWidth,virtual=_this$props12.virtual,
titleRender=_this$props12.titleRender,dropIndicatorRender=_this$props12.dropIndicatorRender,onContextMenu=_this$props12.onContextMenu,onScroll=_this$props12.onScroll,direction=_this$props12.direction,rootClassName=_this$props12.rootClassName;_this$props12=_this$props12.rootStyle;var domProps=(0,_pickAttrs.default)(this.props,{aria:!0,data:!0}),draggableConfig;draggable&&(draggableConfig="object"===(0,_typeof2.default)(draggable)?draggable:"function"===typeof draggable?{nodeDraggable:draggable}:{});
return React.createElement(_contextTypes.TreeContext.Provider,{value:{prefixCls,selectable,showIcon,icon,switcherIcon,draggable:draggableConfig,draggingNodeKey,checkable,checkStrictly,disabled,keyEntities,dropLevelOffset,dropContainerKey,dropTargetKey,dropPosition,dragOverNodeKey,indent:_this$state14,direction,dropIndicatorRender,loadData,filterTreeNode,titleRender,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,
onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},React.createElement("div",{className:(0,_classnames.default)(prefixCls,className,rootClassName,(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},
"".concat(prefixCls,"-show-line"),showLine),"".concat(prefixCls,"-focused"),focused),"".concat(prefixCls,"-active-focused"),null!==activeKey)),style:_this$props12},React.createElement(_NodeList.default,(0,_extends2.default)({ref:this.listRef,prefixCls,style,data:flattenNodes,disabled,selectable,checkable:!!checkable,motion,dragging:null!==draggingNodeKey,height,itemHeight,virtual,focusable,focused,tabIndex:_this$props12$tabInde,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,
onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu,onScroll,scrollWidth},this.getTreeNodeRequiredProps(),domProps))))}}],[{key:"getDerivedStateFromProps",value:function(props,prevState){function needSync(name){return!prevProps&&props.hasOwnProperty(name)||prevProps&&prevProps[name]!==props[name]}var prevProps=prevState.prevProps,newState={prevProps:props},fieldNames=prevState.fieldNames;needSync("fieldNames")&&
(fieldNames=(0,_treeUtil.fillFieldNames)(props.fieldNames),newState.fieldNames=fieldNames);if(needSync("treeData"))var treeData=props.treeData;else needSync("children")&&((0,_warning.default)(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),treeData=(0,_treeUtil.convertTreeToData)(props.children));if(treeData){newState.treeData=treeData;var entitiesMap=(0,_treeUtil.convertDataToEntities)(treeData,{fieldNames});newState.keyEntities=(0,_objectSpread3.default)((0,_defineProperty2.default)({},
_NodeList.MOTION_KEY,_NodeList.MotionEntity),entitiesMap.keyEntities);(0,_treeUtil.warningWithoutKey)(treeData,fieldNames)}entitiesMap=newState.keyEntities||prevState.keyEntities;if(needSync("expandedKeys")||prevProps&&needSync("autoExpandParent"))newState.expandedKeys=props.autoExpandParent||!prevProps&&props.defaultExpandParent?(0,_util.conductExpandParent)(props.expandedKeys,entitiesMap):props.expandedKeys;else if(!prevProps&&props.defaultExpandAll){var cloneKeyEntities=(0,_objectSpread3.default)({},
entitiesMap);delete cloneKeyEntities[_NodeList.MOTION_KEY];var nextExpandedKeys=[];Object.keys(cloneKeyEntities).forEach(function(key){key=cloneKeyEntities[key];key.children&&key.children.length&&nextExpandedKeys.push(key.key)});newState.expandedKeys=nextExpandedKeys}else!prevProps&&props.defaultExpandedKeys&&(newState.expandedKeys=props.autoExpandParent||props.defaultExpandParent?(0,_util.conductExpandParent)(props.defaultExpandedKeys,entitiesMap):props.defaultExpandedKeys);newState.expandedKeys||
delete newState.expandedKeys;if(treeData||newState.expandedKeys)fieldNames=(0,_treeUtil.flattenTreeData)(treeData||prevState.treeData,newState.expandedKeys||prevState.expandedKeys,fieldNames),newState.flattenNodes=fieldNames;props.selectable&&(needSync("selectedKeys")?newState.selectedKeys=(0,_util.calcSelectedKeys)(props.selectedKeys,props):!prevProps&&props.defaultSelectedKeys&&(newState.selectedKeys=(0,_util.calcSelectedKeys)(props.defaultSelectedKeys,props)));if(props.checkable){var checkedKeyEntity;
needSync("checkedKeys")?checkedKeyEntity=(0,_util.parseCheckedKeys)(props.checkedKeys)||{}:!prevProps&&props.defaultCheckedKeys?checkedKeyEntity=(0,_util.parseCheckedKeys)(props.defaultCheckedKeys)||{}:treeData&&(checkedKeyEntity=(0,_util.parseCheckedKeys)(props.checkedKeys)||{checkedKeys:prevState.checkedKeys,halfCheckedKeys:prevState.halfCheckedKeys});checkedKeyEntity&&(treeData=checkedKeyEntity,prevState=treeData.checkedKeys,prevState=void 0===prevState?[]:prevState,treeData=treeData.halfCheckedKeys,
treeData=void 0===treeData?[]:treeData,props.checkStrictly||(entitiesMap=(0,_conductUtil.conductCheck)(prevState,!0,entitiesMap),prevState=entitiesMap.checkedKeys,treeData=entitiesMap.halfCheckedKeys),newState.checkedKeys=prevState,newState.halfCheckedKeys=treeData)}needSync("loadedKeys")&&(newState.loadedKeys=props.loadedKeys);return newState}}]);return Tree}(React.Component);(0,_defineProperty2.default)(require,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,
checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:global.default,allowDrop:function(){return!0},expandAction:!1});(0,_defineProperty2.default)(require,"TreeNode",module.default);exports.default=require}
//# sourceMappingURL=module$node_modules$rc_tree$lib$Tree.js.map
