shadow$provide.module$node_modules$rc_dialog$lib$Dialog$index=function(global,require,module,exports){function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");var _typeof=require("module$node_modules$$babel$runtime$helpers$typeof");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=
void 0;var _extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),_objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_classnames=global(require("module$node_modules$classnames$index")),_contains=global(require("module$node_modules$rc_util$lib$Dom$contains")),_useId=global(require("module$node_modules$rc_util$lib$hooks$useId")),_KeyCode=global(require("module$node_modules$rc_util$lib$KeyCode")),
_pickAttrs=global(require("module$node_modules$rc_util$lib$pickAttrs")),_react=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};if((r=_getRequireWildcardCache(r))&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor,u;for(u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,
u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(require("module$node_modules$react$index")),_util=require("module$node_modules$rc_dialog$lib$util"),_Content=global(require("module$node_modules$rc_dialog$lib$Dialog$Content$index")),_Mask=global(require("module$node_modules$rc_dialog$lib$Dialog$Mask")),_warning=require("module$node_modules$rc_util$lib$warning");exports.default=function(props){function onInternalClose(e){null===onClose||void 0===onClose||onClose(e)}var _props$prefixCls=props.prefixCls;
_props$prefixCls=void 0===_props$prefixCls?"rc-dialog":_props$prefixCls;var zIndex=props.zIndex,_props$visible=props.visible,visible=void 0===_props$visible?!1:_props$visible;_props$visible=props.keyboard;var keyboard=void 0===_props$visible?!0:_props$visible;_props$visible=props.focusTriggerAfterClose;var focusTriggerAfterClose=void 0===_props$visible?!0:_props$visible,wrapStyle=props.wrapStyle;_props$visible=props.wrapClassName;var wrapProps=props.wrapProps,onClose=props.onClose,afterOpenChange=
props.afterOpenChange,afterClose=props.afterClose,transitionName=props.transitionName,animation=props.animation,_props$closable=props.closable;_props$closable=void 0===_props$closable?!0:_props$closable;var _props$mask=props.mask,mask=void 0===_props$mask?!0:_props$mask;_props$mask=props.maskTransitionName;var maskAnimation=props.maskAnimation,_props$maskClosable=props.maskClosable,maskClosable=void 0===_props$maskClosable?!0:_props$maskClosable;_props$maskClosable=props.maskStyle;var maskProps=props.maskProps,
rootClassName=props.rootClassName,modalClassNames=props.classNames,modalStyles=props.styles;["wrapStyle","bodyStyle","maskStyle"].forEach(function(prop){(0,_warning.warning)(!(prop in props),"".concat(prop," is deprecated, please use styles instead."))});"wrapClassName"in props&&(0,_warning.warning)(!1,"wrapClassName is deprecated, please use classNames instead.");var lastOutSideActiveElementRef=(0,_react.useRef)(),wrapperRef=(0,_react.useRef)(),contentRef=(0,_react.useRef)(),_React$useState=_react.useState(visible);
_React$useState=(0,_slicedToArray2.default)(_React$useState,2);var animatedVisible=_React$useState[0],setAnimatedVisible=_React$useState[1];_React$useState=(0,_useId.default)();var contentClickRef=(0,_react.useRef)(!1),contentTimeoutRef=(0,_react.useRef)(),onWrapperClick=null;maskClosable&&(onWrapperClick=function(e){contentClickRef.current?contentClickRef.current=!1:wrapperRef.current===e.target&&onInternalClose(e)});(0,_react.useEffect)(function(){visible&&(setAnimatedVisible(!0),(0,_contains.default)(wrapperRef.current,
document.activeElement)||(lastOutSideActiveElementRef.current=document.activeElement))},[visible]);(0,_react.useEffect)(function(){return function(){clearTimeout(contentTimeoutRef.current)}},[]);wrapStyle=(0,_objectSpread2.default)((0,_objectSpread2.default)((0,_objectSpread2.default)({zIndex},wrapStyle),null===modalStyles||void 0===modalStyles?void 0:modalStyles.wrapper),{},{display:animatedVisible?null:"none"});return _react.createElement("div",(0,_extends2.default)({className:(0,_classnames.default)("".concat(_props$prefixCls,
"-root"),rootClassName)},(0,_pickAttrs.default)(props,{data:!0})),_react.createElement(_Mask.default,{prefixCls:_props$prefixCls,visible:mask&&visible,motionName:(0,_util.getMotionName)(_props$prefixCls,_props$mask,maskAnimation),style:(0,_objectSpread2.default)((0,_objectSpread2.default)({zIndex},_props$maskClosable),null===modalStyles||void 0===modalStyles?void 0:modalStyles.mask),maskProps,className:null===modalClassNames||void 0===modalClassNames?void 0:modalClassNames.mask}),_react.createElement("div",
(0,_extends2.default)({tabIndex:-1,onKeyDown:function(e){keyboard&&e.keyCode===_KeyCode.default.ESC?(e.stopPropagation(),onInternalClose(e)):visible&&e.keyCode===_KeyCode.default.TAB&&contentRef.current.changeActive(!e.shiftKey)},className:(0,_classnames.default)("".concat(_props$prefixCls,"-wrap"),_props$visible,null===modalClassNames||void 0===modalClassNames?void 0:modalClassNames.wrapper),ref:wrapperRef,onClick:onWrapperClick,style:wrapStyle},wrapProps),_react.createElement(_Content.default,(0,_extends2.default)({},
props,{onMouseDown:function(){clearTimeout(contentTimeoutRef.current);contentClickRef.current=!0},onMouseUp:function(){contentTimeoutRef.current=setTimeout(function(){contentClickRef.current=!1})},ref:contentRef,closable:_props$closable,ariaId:_React$useState,prefixCls:_props$prefixCls,visible:visible&&animatedVisible,onClose:onInternalClose,onVisibleChanged:function(newVisible){if(newVisible){if(!(0,_contains.default)(wrapperRef.current,document.activeElement)){var _contentRef$current;null===(_contentRef$current=
contentRef.current)||void 0===_contentRef$current||_contentRef$current.focus()}}else{setAnimatedVisible(!1);if(mask&&lastOutSideActiveElementRef.current&&focusTriggerAfterClose){try{lastOutSideActiveElementRef.current.focus({preventScroll:!0})}catch(e){}lastOutSideActiveElementRef.current=null}animatedVisible&&(null===afterClose||void 0===afterClose||afterClose())}null===afterOpenChange||void 0===afterOpenChange||afterOpenChange(newVisible)},motionName:(0,_util.getMotionName)(_props$prefixCls,transitionName,
animation)}))))}}
//# sourceMappingURL=module$node_modules$rc_dialog$lib$Dialog$index.js.map
