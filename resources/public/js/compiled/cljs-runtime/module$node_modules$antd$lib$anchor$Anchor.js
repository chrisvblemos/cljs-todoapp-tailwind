shadow$provide.module$node_modules$antd$lib$anchor$Anchor=function(global,require,module,exports){function getDefaultContainer(){return window}function getOffsetTop(element,container){if(!element.getClientRects().length)return 0;const rect=element.getBoundingClientRect();return rect.width||rect.height?container===window?rect.top-element.ownerDocument.documentElement.clientTop:rect.top-container.getBoundingClientRect().top:rect.top}"use client";global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard").default;
module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _toConsumableArray2=module(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),React=global(require("module$node_modules$react$index")),_classnames=module(require("module$node_modules$classnames$index")),_useEvent=module(require("module$node_modules$rc_util$lib$hooks$useEvent")),_scrollIntoViewIfNeeded=module(require("module$node_modules$scroll_into_view_if_needed$dist$index_cjs")),
_getScroll=module(require("module$node_modules$antd$lib$_util$getScroll")),_scrollTo=module(require("module$node_modules$antd$lib$_util$scrollTo")),_warning=require("module$node_modules$antd$lib$_util$warning"),_affix=module(require("module$node_modules$antd$lib$affix$index")),_configProvider=require("module$node_modules$antd$lib$config_provider$index"),_useCSSVarCls=module(require("module$node_modules$antd$lib$config_provider$hooks$useCSSVarCls")),_AnchorLink=module(require("module$node_modules$antd$lib$anchor$AnchorLink")),
_context=module(require("module$node_modules$antd$lib$anchor$context")),_style=module(require("module$node_modules$antd$lib$anchor$style$index"));const sharpMatcherRegex=/#([\S ]+)$/;require=props=>{var _a;const {rootClassName,prefixCls:customPrefixCls,className,style,offsetTop,affix=!0,showInkInFixed=!1,children,items,direction:anchorDirection="vertical",bounds,targetOffset,onClick,onChange,getContainer,getCurrentAnchor,replace}=props;var warning=(0,_warning.devUseWarning)("Anchor");warning.deprecated(!children,
"Anchor children","items");warning(!("horizontal"===anchorDirection&&(null===items||void 0===items?0:items.some(n=>"children"in n))),"usage","`Anchor items#children` is not supported when `Anchor` direction is horizontal.");const [links,setLinks]=React.useState([]),[activeLink,setActiveLink]=React.useState(null),activeLinkRef=React.useRef(activeLink),wrapperRef=React.useRef(null),spanLinkNode=React.useRef(null),animating=React.useRef(!1),{direction,anchor,getTargetContainer,getPrefixCls}=React.useContext(_configProvider.ConfigContext),
prefixCls=getPrefixCls("anchor",customPrefixCls);warning=(0,_useCSSVarCls.default)(prefixCls);const [wrapCSSVar,hashId,cssVarCls]=(0,_style.default)(prefixCls,warning),getCurrentContainer=null!==(_a=null!==getContainer&&void 0!==getContainer?getContainer:getTargetContainer)&&void 0!==_a?_a:getDefaultContainer;_a=JSON.stringify(links);const registerLink=(0,_useEvent.default)(link=>{links.includes(link)||setLinks(prev=>[].concat((0,_toConsumableArray2.default)(prev),[link]))}),unregisterLink=(0,_useEvent.default)(link=>
{links.includes(link)&&setLinks(prev=>prev.filter(i=>i!==link))}),getInternalCurrentAnchor=function(_links){let _offsetTop=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,_bounds=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5;const linkSections=[],container=getCurrentContainer();_links.forEach(link=>{var sharpLinkMatch=sharpMatcherRegex.exec(null===link||void 0===link?void 0:link.toString());sharpLinkMatch&&(sharpLinkMatch=document.getElementById(sharpLinkMatch[1]))&&(sharpLinkMatch=
getOffsetTop(sharpLinkMatch,container),sharpLinkMatch<=_offsetTop+_bounds&&linkSections.push({link,top:sharpLinkMatch}))});return linkSections.length?linkSections.reduce((prev,curr)=>curr.top>prev.top?curr:prev).link:""},setCurrentActiveLink=(0,_useEvent.default)(link=>{if(activeLinkRef.current!==link){var newLink="function"===typeof getCurrentAnchor?getCurrentAnchor(link):link;setActiveLink(newLink);activeLinkRef.current=newLink;null===onChange||void 0===onChange?void 0:onChange(link)}}),handleScroll=
React.useCallback(()=>{if(!animating.current){var currentActiveLink=getInternalCurrentAnchor(links,void 0!==targetOffset?targetOffset:offsetTop||0,bounds);setCurrentActiveLink(currentActiveLink)}},[_a,targetOffset,offsetTop]),handleScrollTo=React.useCallback(link=>{setCurrentActiveLink(link);if(link=sharpMatcherRegex.exec(link)){var targetElement=document.getElementById(link[1]);if(targetElement){var container=getCurrentContainer();link=(0,_getScroll.default)(container);targetElement=getOffsetTop(targetElement,
container);link=link+targetElement-(void 0!==targetOffset?targetOffset:offsetTop||0);animating.current=!0;(0,_scrollTo.default)(link,{getContainer:getCurrentContainer,callback(){animating.current=!1}})}}},[targetOffset,offsetTop]);warning=(0,_classnames.default)(hashId,cssVarCls,warning,rootClassName,`${prefixCls}-wrapper`,{[`${prefixCls}-wrapper-horizontal`]:"horizontal"===anchorDirection,[`${prefixCls}-rtl`]:"rtl"===direction},className,null===anchor||void 0===anchor?void 0:anchor.className);const anchorClass=
(0,_classnames.default)(prefixCls,{[`${prefixCls}-fixed`]:!affix&&!showInkInFixed}),inkClass=(0,_classnames.default)(`${prefixCls}-ink`,{[`${prefixCls}-ink-visible`]:activeLink}),wrapperStyle=Object.assign(Object.assign({maxHeight:offsetTop?`calc(100vh - ${offsetTop}px)`:"100vh"},null===anchor||void 0===anchor?void 0:anchor.style),style),createNestedLink=options=>Array.isArray(options)?options.map(item=>React.createElement(_AnchorLink.default,Object.assign({replace},item,{key:item.key}),"vertical"===
anchorDirection&&createNestedLink(item.children))):null;props=React.createElement("div",{ref:wrapperRef,className:warning,style:wrapperStyle},React.createElement("div",{className:anchorClass},React.createElement("span",{className:inkClass,ref:spanLinkNode}),"items"in props?createNestedLink(items):children));React.useEffect(()=>{const scrollContainer=getCurrentContainer();handleScroll();null===scrollContainer||void 0===scrollContainer?void 0:scrollContainer.addEventListener("scroll",handleScroll);
return()=>{null===scrollContainer||void 0===scrollContainer?void 0:scrollContainer.removeEventListener("scroll",handleScroll)}},[_a]);React.useEffect(()=>{"function"===typeof getCurrentAnchor&&setCurrentActiveLink(getCurrentAnchor(activeLinkRef.current||""))},[getCurrentAnchor]);React.useEffect(()=>{var _a;const linkNode=null===(_a=wrapperRef.current)||void 0===_a?void 0:_a.querySelector(`.${prefixCls}-link-title-active`);if(linkNode&&spanLinkNode.current){({style:_a}=spanLinkNode.current);const horizontalAnchor=
"horizontal"===anchorDirection;_a.top=horizontalAnchor?"":`${linkNode.offsetTop+linkNode.clientHeight/2}px`;_a.height=horizontalAnchor?"":`${linkNode.clientHeight}px`;_a.left=horizontalAnchor?`${linkNode.offsetLeft}px`:"";_a.width=horizontalAnchor?`${linkNode.clientWidth}px`:"";horizontalAnchor&&(0,_scrollIntoViewIfNeeded.default)(linkNode,{scrollMode:"if-needed",block:"nearest"})}},[anchorDirection,getCurrentAnchor,_a,activeLink]);_a=React.useMemo(()=>({registerLink,unregisterLink,scrollTo:handleScrollTo,
activeLink,onClick,direction:anchorDirection}),[activeLink,onClick,handleScrollTo,anchorDirection]);return wrapCSSVar(React.createElement(_context.default.Provider,{value:_a},affix?React.createElement(_affix.default,Object.assign({offsetTop,target:getCurrentContainer},affix&&"object"===typeof affix?affix:void 0),props):props))};require.displayName="Anchor";exports.default=require}
//# sourceMappingURL=module$node_modules$antd$lib$anchor$Anchor.js.map
