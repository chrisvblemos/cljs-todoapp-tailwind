shadow$provide.module$node_modules$rc_slider$lib$hooks$useDrag=function(global,require,module,exports){function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}function getPosition(e){e="targetTouches"in e?e.targetTouches[0]:e;return{pageX:e.pageX,pageY:e.pageY}}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");var _typeof=require("module$node_modules$$babel$runtime$helpers$typeof");
Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _toConsumableArray2=global(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),React=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};if((r=_getRequireWildcardCache(r))&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&
Object.getOwnPropertyDescriptor,u;for(u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(require("module$node_modules$react$index")),_useEvent=global(require("module$node_modules$rc_util$lib$hooks$useEvent")),_useLayoutEffect=global(require("module$node_modules$rc_util$lib$hooks$useLayoutEffect")),_context=require("module$node_modules$rc_slider$lib$context");
exports.default=function(containerRef,direction,rawValues,min,max,formatValue,triggerChange,finishChange,offsetValues,editable,minCount){var _React$useState=React.useState(null),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2);_React$useState=_React$useState2[0];var setDraggingValue=_React$useState2[1];_React$useState2=React.useState(-1);_React$useState2=(0,_slicedToArray2.default)(_React$useState2,2);var draggingIndex=_React$useState2[0],setDraggingIndex=_React$useState2[1];_React$useState2=
React.useState(!1);var _React$useState6=(0,_slicedToArray2.default)(_React$useState2,2);_React$useState2=_React$useState6[0];var setDraggingDelete=_React$useState6[1];_React$useState6=React.useState(rawValues);_React$useState6=(0,_slicedToArray2.default)(_React$useState6,2);var cacheValues=_React$useState6[0],setCacheValues=_React$useState6[1];_React$useState6=React.useState(rawValues);_React$useState6=(0,_slicedToArray2.default)(_React$useState6,2);var originValues=_React$useState6[0],setOriginValues=
_React$useState6[1],mouseMoveEventRef=React.useRef(null),mouseUpEventRef=React.useRef(null),touchEventTargetRef=React.useRef(null);_React$useState6=React.useContext(_context.UnstableContext);var onDragStart=_React$useState6.onDragStart,onDragChange=_React$useState6.onDragChange;(0,_useLayoutEffect.default)(function(){-1===draggingIndex&&setCacheValues(rawValues)},[rawValues,draggingIndex]);React.useEffect(function(){return function(){document.removeEventListener("mousemove",mouseMoveEventRef.current);
document.removeEventListener("mouseup",mouseUpEventRef.current);touchEventTargetRef.current&&(touchEventTargetRef.current.removeEventListener("touchmove",mouseMoveEventRef.current),touchEventTargetRef.current.removeEventListener("touchend",mouseUpEventRef.current))}},[]);var flushValues=function(nextValues,nextValue,deleteMark){void 0!==nextValue&&setDraggingValue(nextValue);setCacheValues(nextValues);var changeValues=nextValues;deleteMark&&(changeValues=nextValues.filter(function(_,i){return i!==
draggingIndex}));triggerChange(changeValues);onDragChange&&onDragChange({rawValues:nextValues,deleteIndex:deleteMark?draggingIndex:-1,draggingIndex,draggingValue:nextValue})},updateCacheValue=(0,_useEvent.default)(function(valueIndex,offsetPercent,deleteMark){if(-1===valueIndex){deleteMark=originValues[0];valueIndex=max-originValues[originValues.length-1];var offset=offsetPercent*(max-min);offset=Math.max(offset,min-deleteMark);offset=Math.min(offset,valueIndex);offset=formatValue(deleteMark+offset)-
deleteMark;deleteMark=originValues.map(function(val){return val+offset});flushValues(deleteMark)}else{offsetPercent*=max-min;var cloneValues=(0,_toConsumableArray2.default)(cacheValues);cloneValues[valueIndex]=originValues[valueIndex];valueIndex=offsetValues(cloneValues,offsetPercent,valueIndex,"dist");flushValues(valueIndex.values,valueIndex.value,deleteMark)}});_React$useState6=React.useMemo(function(){var sourceValues=(0,_toConsumableArray2.default)(rawValues).sort(function(a,b){return a-b}),counts=
{};(0,_toConsumableArray2.default)(cacheValues).sort(function(a,b){return a-b}).forEach(function(val){counts[val]=(counts[val]||0)+1});sourceValues.forEach(function(val){counts[val]=(counts[val]||0)-1});sourceValues=editable?1:0;return Object.values(counts).reduce(function(prev,next){return prev+Math.abs(next)},0)<=sourceValues?cacheValues:rawValues},[rawValues,cacheValues,editable]);return[draggingIndex,_React$useState,_React$useState2,_React$useState6,function(e,valueIndex,startValues){e.stopPropagation();
startValues=startValues||rawValues;var originValue=startValues[valueIndex];setDraggingIndex(valueIndex);setDraggingValue(originValue);setOriginValues(startValues);setCacheValues(startValues);setDraggingDelete(!1);var _getPosition=getPosition(e),startX=_getPosition.pageX,startY=_getPosition.pageY,deleteMark=!1;onDragStart&&onDragStart({rawValues:startValues,draggingIndex:valueIndex,draggingValue:originValue});var onMouseMove=function(event){event.preventDefault();var _getPosition2=getPosition(event);
event=_getPosition2.pageX-startX;_getPosition2=_getPosition2.pageY-startY;var _containerRef$current=containerRef.current.getBoundingClientRect(),width=_containerRef$current.width;_containerRef$current=_containerRef$current.height;switch(direction){case "btt":width=-_getPosition2/_containerRef$current;break;case "ttb":width=_getPosition2/_containerRef$current;break;case "rtl":width=-event/width;event=_getPosition2;break;default:width=event/width,event=_getPosition2}deleteMark=editable?130<Math.abs(event)&&
minCount<cacheValues.length:!1;setDraggingDelete(deleteMark);updateCacheValue(valueIndex,width,deleteMark)};startValues=function onMouseUp(event){event.preventDefault();document.removeEventListener("mouseup",onMouseUp);document.removeEventListener("mousemove",onMouseMove);touchEventTargetRef.current&&(touchEventTargetRef.current.removeEventListener("touchmove",mouseMoveEventRef.current),touchEventTargetRef.current.removeEventListener("touchend",mouseUpEventRef.current));mouseMoveEventRef.current=
null;mouseUpEventRef.current=null;touchEventTargetRef.current=null;finishChange(deleteMark);setDraggingIndex(-1);setDraggingDelete(!1)};document.addEventListener("mouseup",startValues);document.addEventListener("mousemove",onMouseMove);e.currentTarget.addEventListener("touchend",startValues);e.currentTarget.addEventListener("touchmove",onMouseMove);mouseMoveEventRef.current=onMouseMove;mouseUpEventRef.current=startValues;touchEventTargetRef.current=e.currentTarget}]}}
//# sourceMappingURL=module$node_modules$rc_slider$lib$hooks$useDrag.js.map
