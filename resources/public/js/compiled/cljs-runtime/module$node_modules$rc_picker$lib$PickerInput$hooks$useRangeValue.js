shadow$provide.module$node_modules$rc_picker$lib$PickerInput$hooks$useRangeValue=function(global,require,module,exports){function useUtil(generateConfig,locale,formatList){return[function(dates){return dates.map(function(date){return(0,_dateUtil.formatValue)(date,{generateConfig,locale,format:formatList[0]})})},function(source,target){for(var maxLen=Math.max(source.length,target.length),diffIndex=-1,i=0;i<maxLen;i+=1){var prev=source[i]||null,next=target[i]||null;if(prev!==next&&!(0,_dateUtil.isSameTimestamp)(generateConfig,
prev,next)){diffIndex=i;break}}return[0>diffIndex,0!==diffIndex]}]}function orderDates(dates,generateConfig){return(0,_toConsumableArray2.default)(dates).sort(function(a,b){return generateConfig.isAfter(a,b)?1:-1})}function useCalendarValue(mergedValue){var _useSyncState=(0,_useSyncState5.default)(mergedValue);_useSyncState=(0,_slicedToArray2.default)(_useSyncState,2);var calendarValue=_useSyncState[0],setCalendarValue=_useSyncState[1],syncWithValue=(0,_rcUtil.useEvent)(function(){setCalendarValue(mergedValue)});
React.useEffect(function(){syncWithValue()},[mergedValue]);return[calendarValue,setCalendarValue]}global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard").default;module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(info,mergedValue,setInnerValue,getCalendarValue,triggerCalendarChange,disabled,formatList,focused,open,isInvalidateDate){var generateConfig=
info.generateConfig,locale=info.locale,picker=info.picker,onChange=info.onChange,allowEmpty=info.allowEmpty,order=info.order,orderOnChange=disabled.some(function(d){return d})?!1:order;info=useUtil(generateConfig,locale,formatList);info=(0,_slicedToArray2.default)(info,2);var getDateTexts=info[0],isSameDates=info[1];info=(0,_useSyncState5.default)(mergedValue);info=(0,_slicedToArray2.default)(info,2);var submitValue=info[0],setSubmitValue=info[1],syncWithValue=(0,_rcUtil.useEvent)(function(){setSubmitValue(mergedValue)});
React.useEffect(function(){syncWithValue()},[mergedValue]);var triggerSubmit=(0,_rcUtil.useEvent)(function(nextValue){var isNullValue=null===nextValue;nextValue=(0,_toConsumableArray2.default)(nextValue||submitValue());if(isNullValue)for(var maxLen=Math.max(disabled.length,nextValue.length),i=0;i<maxLen;i+=1)disabled[i]||(nextValue[i]=null);orderOnChange&&nextValue[0]&&nextValue[1]&&(nextValue=orderDates(nextValue,generateConfig));triggerCalendarChange(nextValue);i=(0,_slicedToArray2.default)(nextValue,
2);maxLen=i[0];var end=i[1],startEmpty=!maxLen,endEmpty=!end;i=allowEmpty?(!startEmpty||allowEmpty[0])&&(!endEmpty||allowEmpty[1]):!0;startEmpty=!order||startEmpty||endEmpty||(0,_dateUtil.isSame)(generateConfig,locale,maxLen,end,picker)||generateConfig.isAfter(end,maxLen);maxLen=(disabled[0]||!maxLen||!isInvalidateDate(maxLen,{activeIndex:0}))&&(disabled[1]||!end||!isInvalidateDate(end,{from:maxLen,activeIndex:1}));if(maxLen=isNullValue||i&&startEmpty&&maxLen)setInnerValue(nextValue),i=isSameDates(nextValue,
mergedValue),i=(0,_slicedToArray2.default)(i,1)[0],onChange&&!i&&onChange(isNullValue&&nextValue.every(function(val){return!val})?null:nextValue,getDateTexts(nextValue));return maxLen});info=(0,_rcUtil.useEvent)(function(index,needTriggerChange){index=(0,_miscUtil.fillIndex)(submitValue(),index,getCalendarValue()[index]);setSubmitValue(index);needTriggerChange&&triggerSubmit()});var interactiveFinished=!focused&&!open;(0,_useLockEffect.default)(!interactiveFinished,function(){interactiveFinished&&
(triggerSubmit(),triggerCalendarChange(mergedValue),syncWithValue())},2);return[info,triggerSubmit]};exports.useInnerValue=function(generateConfig,locale,formatList,rangeValue,order,defaultValue,value,onCalendarChange,onOk){defaultValue=(0,_rcUtil.useMergedState)(defaultValue,{value});value=(0,_slicedToArray2.default)(defaultValue,2);defaultValue=value[1];value=value[0]||EMPTY_VALUE;var _useCalendarValue=useCalendarValue(value);_useCalendarValue=(0,_slicedToArray2.default)(_useCalendarValue,2);var calendarValue=
_useCalendarValue[0],setCalendarValue=_useCalendarValue[1];locale=useUtil(generateConfig,locale,formatList);locale=(0,_slicedToArray2.default)(locale,2);var getDateTexts=locale[0],isSameDates=locale[1];locale=(0,_rcUtil.useEvent)(function(nextCalendarValues){nextCalendarValues=(0,_toConsumableArray2.default)(nextCalendarValues);if(rangeValue)for(var i=0;2>i;i+=1)nextCalendarValues[i]=nextCalendarValues[i]||null;else order&&(nextCalendarValues=orderDates(nextCalendarValues.filter(function(date){return date}),
generateConfig));i=isSameDates(calendarValue(),nextCalendarValues);var _isSameDates2=(0,_slicedToArray2.default)(i,2);i=_isSameDates2[1];_isSameDates2[0]||(setCalendarValue(nextCalendarValues),onCalendarChange&&(_isSameDates2=getDateTexts(nextCalendarValues),onCalendarChange(nextCalendarValues,_isSameDates2,{range:i?"end":"start"})))});return[value,defaultValue,calendarValue,locale,function(){onOk&&onOk(calendarValue())}]};var _slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),
_toConsumableArray2=module(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_rcUtil=require("module$node_modules$rc_util$lib$index"),React=global(require("module$node_modules$react$index")),_useSyncState5=module(require("module$node_modules$rc_picker$lib$hooks$useSyncState")),_dateUtil=require("module$node_modules$rc_picker$lib$utils$dateUtil"),_miscUtil=require("module$node_modules$rc_picker$lib$utils$miscUtil"),_useLockEffect=module(require("module$node_modules$rc_picker$lib$PickerInput$hooks$useLockEffect")),
EMPTY_VALUE=[]}
//# sourceMappingURL=module$node_modules$rc_picker$lib$PickerInput$hooks$useRangeValue.js.map
