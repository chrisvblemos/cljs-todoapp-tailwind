{
"version":3,
"file":"module$node_modules$rc_field_form$lib$List.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/rc-field-form/lib/List.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_field_form$lib$List\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _warning = _interopRequireDefault(require(\"rc-util/lib/warning\"));\nvar _FieldContext = _interopRequireDefault(require(\"./FieldContext\"));\nvar _Field = _interopRequireDefault(require(\"./Field\"));\nvar _valueUtil = require(\"./utils/valueUtil\");\nvar _ListContext = _interopRequireDefault(require(\"./ListContext\"));\nfunction List(_ref) {\n  var name = _ref.name,\n    initialValue = _ref.initialValue,\n    children = _ref.children,\n    rules = _ref.rules,\n    validateTrigger = _ref.validateTrigger,\n    isListField = _ref.isListField;\n  var context = React.useContext(_FieldContext.default);\n  var wrapperListContext = React.useContext(_ListContext.default);\n  var keyRef = React.useRef({\n    keys: [],\n    id: 0\n  });\n  var keyManager = keyRef.current;\n  var prefixName = React.useMemo(function () {\n    var parentPrefixName = (0, _valueUtil.getNamePath)(context.prefixName) || [];\n    return [].concat((0, _toConsumableArray2.default)(parentPrefixName), (0, _toConsumableArray2.default)((0, _valueUtil.getNamePath)(name)));\n  }, [context.prefixName, name]);\n  var fieldContext = React.useMemo(function () {\n    return (0, _objectSpread2.default)((0, _objectSpread2.default)({}, context), {}, {\n      prefixName: prefixName\n    });\n  }, [context, prefixName]);\n\n  // List context\n  var listContext = React.useMemo(function () {\n    return {\n      getKey: function getKey(namePath) {\n        var len = prefixName.length;\n        var pathName = namePath[len];\n        return [keyManager.keys[pathName], namePath.slice(len + 1)];\n      }\n    };\n  }, [prefixName]);\n\n  // User should not pass `children` as other type.\n  if (typeof children !== 'function') {\n    (0, _warning.default)(false, 'Form.List only accepts function as children.');\n    return null;\n  }\n  var shouldUpdate = function shouldUpdate(prevValue, nextValue, _ref2) {\n    var source = _ref2.source;\n    if (source === 'internal') {\n      return false;\n    }\n    return prevValue !== nextValue;\n  };\n  return /*#__PURE__*/React.createElement(_ListContext.default.Provider, {\n    value: listContext\n  }, /*#__PURE__*/React.createElement(_FieldContext.default.Provider, {\n    value: fieldContext\n  }, /*#__PURE__*/React.createElement(_Field.default, {\n    name: [],\n    shouldUpdate: shouldUpdate,\n    rules: rules,\n    validateTrigger: validateTrigger,\n    initialValue: initialValue,\n    isList: true,\n    isListField: isListField !== null && isListField !== void 0 ? isListField : !!wrapperListContext\n  }, function (_ref3, meta) {\n    var _ref3$value = _ref3.value,\n      value = _ref3$value === void 0 ? [] : _ref3$value,\n      onChange = _ref3.onChange;\n    var getFieldValue = context.getFieldValue;\n    var getNewValue = function getNewValue() {\n      var values = getFieldValue(prefixName || []);\n      return values || [];\n    };\n    /**\n     * Always get latest value in case user update fields by `form` api.\n     */\n    var operations = {\n      add: function add(defaultValue, index) {\n        // Mapping keys\n        var newValue = getNewValue();\n        if (index >= 0 && index <= newValue.length) {\n          keyManager.keys = [].concat((0, _toConsumableArray2.default)(keyManager.keys.slice(0, index)), [keyManager.id], (0, _toConsumableArray2.default)(keyManager.keys.slice(index)));\n          onChange([].concat((0, _toConsumableArray2.default)(newValue.slice(0, index)), [defaultValue], (0, _toConsumableArray2.default)(newValue.slice(index))));\n        } else {\n          if (process.env.NODE_ENV !== 'production' && (index < 0 || index > newValue.length)) {\n            (0, _warning.default)(false, 'The second parameter of the add function should be a valid positive number.');\n          }\n          keyManager.keys = [].concat((0, _toConsumableArray2.default)(keyManager.keys), [keyManager.id]);\n          onChange([].concat((0, _toConsumableArray2.default)(newValue), [defaultValue]));\n        }\n        keyManager.id += 1;\n      },\n      remove: function remove(index) {\n        var newValue = getNewValue();\n        var indexSet = new Set(Array.isArray(index) ? index : [index]);\n        if (indexSet.size <= 0) {\n          return;\n        }\n        keyManager.keys = keyManager.keys.filter(function (_, keysIndex) {\n          return !indexSet.has(keysIndex);\n        });\n\n        // Trigger store change\n        onChange(newValue.filter(function (_, valueIndex) {\n          return !indexSet.has(valueIndex);\n        }));\n      },\n      move: function move(from, to) {\n        if (from === to) {\n          return;\n        }\n        var newValue = getNewValue();\n\n        // Do not handle out of range\n        if (from < 0 || from >= newValue.length || to < 0 || to >= newValue.length) {\n          return;\n        }\n        keyManager.keys = (0, _valueUtil.move)(keyManager.keys, from, to);\n\n        // Trigger store change\n        onChange((0, _valueUtil.move)(newValue, from, to));\n      }\n    };\n    var listValue = value || [];\n    if (!Array.isArray(listValue)) {\n      listValue = [];\n      if (process.env.NODE_ENV !== 'production') {\n        (0, _warning.default)(false, \"Current value of '\".concat(prefixName.join(' > '), \"' is not an array type.\"));\n      }\n    }\n    return children(listValue.map(function (__, index) {\n      var key = keyManager.keys[index];\n      if (key === undefined) {\n        keyManager.keys[index] = keyManager.id;\n        key = keyManager.keys[index];\n        keyManager.id += 1;\n      }\n      return {\n        name: index,\n        key: key,\n        isListField: true\n      };\n    }), operations, meta);\n  })));\n}\nvar _default = exports.default = List;\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireWildcard","default","_interopRequireDefault","Object","defineProperty","value","_objectSpread2","_toConsumableArray2","React","_warning","_FieldContext","_Field","_valueUtil","_ListContext","List","_ref","name","initialValue","children","rules","validateTrigger","isListField","context","useContext","wrapperListContext","keyManager","useRef","keyRef","keys","id","current","prefixName","useMemo","parentPrefixName","getNamePath","concat","fieldContext","listContext","getKey","namePath","len","length","pathName","slice","createElement","Provider","shouldUpdate","prevValue","nextValue","_ref2","source","isList","_ref3","meta","_ref3$value","onChange","getFieldValue","listValue","Array","isArray","join","map","__","index","key","undefined","operations","add","defaultValue","newValue","values","remove","indexSet","Set","size","filter","_","keysIndex","has","valueIndex","move","from","to"]
}
