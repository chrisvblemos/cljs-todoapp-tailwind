shadow$provide.module$node_modules$rc_select$lib$OptionList=function(global,require,module,exports){function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}function isTitleType(content){return"string"===typeof content||"number"===typeof content}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");var _typeof=require("module$node_modules$$babel$runtime$helpers$typeof");
Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_objectWithoutProperties2=global(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),_extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_toConsumableArray2=global(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),
_classnames=global(require("module$node_modules$classnames$index")),_KeyCode=global(require("module$node_modules$rc_util$lib$KeyCode")),_useMemo=global(require("module$node_modules$rc_util$lib$hooks$useMemo")),_omit=global(require("module$node_modules$rc_util$lib$omit")),_pickAttrs=global(require("module$node_modules$rc_util$lib$pickAttrs")),_rcVirtualList=global(require("module$node_modules$rc_virtual_list$lib$index")),_react=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&
"function"!=typeof e)return{default:e};if((r=_getRequireWildcardCache(r))&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor,u;for(u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(require("module$node_modules$react$index")),_SelectContext=global(require("module$node_modules$rc_select$lib$SelectContext")),
_TransBtn=global(require("module$node_modules$rc_select$lib$TransBtn")),_useBaseProps2=global(require("module$node_modules$rc_select$lib$hooks$useBaseProps")),_platformUtil=require("module$node_modules$rc_select$lib$utils$platformUtil"),_valueUtil=require("module$node_modules$rc_select$lib$utils$valueUtil"),_excluded=["disabled","title","children","style","className"];require=_react.forwardRef(function(_,ref){function getItemAriaProps(item,index){return{role:item.group?"presentation":"option",id:"".concat(id,
"_list_").concat(index)}}_=(0,_useBaseProps2.default)();var prefixCls=_.prefixCls,id=_.id,open=_.open,multiple=_.multiple,mode=_.mode,searchValue=_.searchValue,toggleOpen=_.toggleOpen,notFoundContent=_.notFoundContent;_=_.onPopupScroll;var _React$useContext=_react.useContext(_SelectContext.default),maxCount=_React$useContext.maxCount,flattenOptions=_React$useContext.flattenOptions,onActiveValue=_React$useContext.onActiveValue,defaultActiveFirstOption=_React$useContext.defaultActiveFirstOption,onSelect=
_React$useContext.onSelect,menuItemSelectedIcon=_React$useContext.menuItemSelectedIcon,rawValues=_React$useContext.rawValues,fieldNames=_React$useContext.fieldNames,virtual=_React$useContext.virtual,direction=_React$useContext.direction,listHeight=_React$useContext.listHeight,listItemHeight=_React$useContext.listItemHeight,optionRender=_React$useContext.optionRender,itemPrefixCls="".concat(prefixCls,"-item"),memoFlattenOptions=(0,_useMemo.default)(function(){return flattenOptions},[open,flattenOptions],
function(prev,next){return next[0]&&prev[1]!==next[1]}),listRef=_react.useRef(null),overMaxCount=_react.useMemo(function(){return multiple&&(0,_valueUtil.isValidCount)(maxCount)&&(null===rawValues||void 0===rawValues?void 0:rawValues.size)>=maxCount},[multiple,maxCount,null===rawValues||void 0===rawValues?void 0:rawValues.size]);prefixCls=function(event){event.preventDefault()};var scrollIntoView=function(args){var _listRef$current;null===(_listRef$current=listRef.current)||void 0===_listRef$current||
_listRef$current.scrollTo("number"===typeof args?{index:args}:args)},isSelected=_react.useCallback(function(value){return"combobox"===mode?!1:rawValues.has(value)},[mode,(0,_toConsumableArray2.default)(rawValues).toString(),rawValues.size]),getEnabledActiveIndex=function(index){for(var offset=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,len=memoFlattenOptions.length,i=0;i<len;i+=1){var current=(index+i*offset+len)%len,_ref=memoFlattenOptions[current]||{},data=_ref.data;if(!(_ref.group||
null!==data&&void 0!==data&&data.disabled||!isSelected(data.value)&&overMaxCount))return current}return-1};_React$useContext=_react.useState(function(){return getEnabledActiveIndex(0)});_React$useContext=(0,_slicedToArray2.default)(_React$useContext,2);var activeIndex=_React$useContext[0],setActiveIndex=_React$useContext[1],setActive=function(index){var fromKeyboard=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;setActiveIndex(index);fromKeyboard={source:fromKeyboard?"keyboard":"mouse"};
var flattenItem=memoFlattenOptions[index];flattenItem?onActiveValue(flattenItem.value,index,fromKeyboard):onActiveValue(null,-1,fromKeyboard)};(0,_react.useEffect)(function(){setActive(!1!==defaultActiveFirstOption?getEnabledActiveIndex(0):-1)},[memoFlattenOptions.length,searchValue]);var isAriaSelected=_react.useCallback(function(value){return"combobox"===mode?String(value).toLowerCase()===searchValue.toLowerCase():rawValues.has(value)},[mode,searchValue,(0,_toConsumableArray2.default)(rawValues).toString(),
rawValues.size]);(0,_react.useEffect)(function(){var timeoutId=setTimeout(function(){if(!multiple&&open&&1===rawValues.size){var value=Array.from(rawValues)[0],index=memoFlattenOptions.findIndex(function(_ref2){return _ref2.data.value===value});-1!==index&&(setActive(index),scrollIntoView(index))}});if(open){var _listRef$current2;null===(_listRef$current2=listRef.current)||void 0===_listRef$current2||_listRef$current2.scrollTo(void 0)}return function(){return clearTimeout(timeoutId)}},[open,searchValue]);
var onSelectValue=function(value){void 0!==value&&onSelect(value,{selected:!rawValues.has(value)});multiple||toggleOpen(!1)};_react.useImperativeHandle(ref,function(){return{onKeyDown:function(event){var which=event.which,ctrlKey=event.ctrlKey;switch(which){case _KeyCode.default.N:case _KeyCode.default.P:case _KeyCode.default.UP:case _KeyCode.default.DOWN:event=0;which===_KeyCode.default.UP?event=-1:which===_KeyCode.default.DOWN?event=1:(0,_platformUtil.isPlatformMac)()&&ctrlKey&&(which===_KeyCode.default.N?
event=1:which===_KeyCode.default.P&&(event=-1));0!==event&&(event=getEnabledActiveIndex(activeIndex+event,event),scrollIntoView(event),setActive(event,!0));break;case _KeyCode.default.TAB:case _KeyCode.default.ENTER:var _item$data;which=memoFlattenOptions[activeIndex];!which||null!==which&&void 0!==which&&null!==(_item$data=which.data)&&void 0!==_item$data&&_item$data.disabled||overMaxCount?onSelectValue(void 0):onSelectValue(which.value);open&&event.preventDefault();break;case _KeyCode.default.ESC:toggleOpen(!1),
open&&event.stopPropagation()}},onKeyUp:function(){},scrollTo:function(index){scrollIntoView(index)}}});if(0===memoFlattenOptions.length)return _react.createElement("div",{role:"listbox",id:"".concat(id,"_list"),className:"".concat(itemPrefixCls,"-empty"),onMouseDown:prefixCls},notFoundContent);var omitFieldNameList=Object.keys(fieldNames).map(function(key){return fieldNames[key]});ref=function(index){var item=memoFlattenOptions[index];if(!item)return null;var itemData=item.data||{},value=itemData.value,
group=item.group;itemData=(0,_pickAttrs.default)(itemData,!0);var mergedLabel=item.label;return item?_react.createElement("div",(0,_extends2.default)({"aria-label":"string"!==typeof mergedLabel||group?null:mergedLabel},itemData,{key:index},getItemAriaProps(item,index),{"aria-selected":isAriaSelected(value)}),value):null};notFoundContent={role:"listbox",id:"".concat(id,"_list")};return _react.createElement(_react.Fragment,null,virtual&&_react.createElement("div",(0,_extends2.default)({},notFoundContent,
{style:{height:0,width:0,overflow:"hidden"}}),ref(activeIndex-1),ref(activeIndex),ref(activeIndex+1)),_react.createElement(_rcVirtualList.default,{itemKey:"key",ref:listRef,data:memoFlattenOptions,height:listHeight,itemHeight:listItemHeight,fullHeight:!1,onMouseDown:prefixCls,onScroll:_,virtual,direction,innerProps:virtual?null:notFoundContent},function(item,itemIndex){var groupOption=item.groupOption,data=item.data,label=item.label,value=item.value,key=data.key;if(item.group){var _data$title;item=
null!==(_data$title=data.title)&&void 0!==_data$title?_data$title:isTitleType(label)?label.toString():void 0;return _react.createElement("div",{className:(0,_classnames.default)(itemPrefixCls,"".concat(itemPrefixCls,"-group"),data.className),title:item},void 0!==label?label:key)}var disabled=data.disabled;label=data.title;key=data.style;var className=data.className;data=(0,_objectWithoutProperties2.default)(data,_excluded);data=(0,_omit.default)(data,omitFieldNameList);_data$title=isSelected(value);
var mergedDisabled=disabled||!_data$title&&overMaxCount;disabled="".concat(itemPrefixCls,"-option");groupOption=(0,_classnames.default)(itemPrefixCls,disabled,className,(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},"".concat(disabled,"-grouped"),groupOption),"".concat(disabled,"-active"),activeIndex===itemIndex&&!mergedDisabled),"".concat(disabled,"-disabled"),mergedDisabled),"".concat(disabled,"-selected"),_data$title));var mergedLabel=
item.label;className=!menuItemSelectedIcon||"function"===typeof menuItemSelectedIcon||_data$title;mergedLabel="number"===typeof mergedLabel?mergedLabel:mergedLabel||value;var optionTitle=isTitleType(mergedLabel)?mergedLabel.toString():void 0;void 0!==label&&(optionTitle=label);return _react.createElement("div",(0,_extends2.default)({},(0,_pickAttrs.default)(data),virtual?{}:getItemAriaProps(item,itemIndex),{"aria-selected":isAriaSelected(value),className:groupOption,title:optionTitle,onMouseMove:function(){activeIndex===
itemIndex||mergedDisabled||setActive(itemIndex)},onClick:function(){mergedDisabled||onSelectValue(value)},style:key}),_react.createElement("div",{className:"".concat(disabled,"-content")},"function"===typeof optionRender?optionRender(item,{index:itemIndex}):mergedLabel),_react.isValidElement(menuItemSelectedIcon)||_data$title,className&&_react.createElement(_TransBtn.default,{className:"".concat(itemPrefixCls,"-option-state"),customizeIcon:menuItemSelectedIcon,customizeIconProps:{value,disabled:mergedDisabled,
isSelected:_data$title}},_data$title?"✓":null))}))});require.displayName="OptionList";exports.default=require}
//# sourceMappingURL=module$node_modules$rc_select$lib$OptionList.js.map
