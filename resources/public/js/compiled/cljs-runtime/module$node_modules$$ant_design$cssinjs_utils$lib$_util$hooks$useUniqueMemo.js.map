{
"version":3,
"file":"module$node_modules$$ant_design$cssinjs_utils$lib$_util$hooks$useUniqueMemo.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/@ant-design/cssinjs-utils/lib/_util/hooks/useUniqueMemo.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$ant_design$cssinjs_utils$lib$_util$hooks$useUniqueMemo\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nvar BEAT_LIMIT = 1000 * 60 * 10;\n\n/**\n * A helper class to map keys to values.\n * It supports both primitive keys and object keys.\n */\nvar ArrayKeyMap = /*#__PURE__*/function () {\n  function ArrayKeyMap() {\n    (0, _classCallCheck2.default)(this, ArrayKeyMap);\n    (0, _defineProperty2.default)(this, \"map\", new Map());\n    // Use WeakMap to avoid memory leak\n    (0, _defineProperty2.default)(this, \"objectIDMap\", new WeakMap());\n    (0, _defineProperty2.default)(this, \"nextID\", 0);\n    (0, _defineProperty2.default)(this, \"lastAccessBeat\", new Map());\n    // We will clean up the cache when reach the limit\n    (0, _defineProperty2.default)(this, \"accessBeat\", 0);\n  }\n  (0, _createClass2.default)(ArrayKeyMap, [{\n    key: \"set\",\n    value: function set(keys, value) {\n      // New set will trigger clear\n      this.clear();\n\n      // Set logic\n      var compositeKey = this.getCompositeKey(keys);\n      this.map.set(compositeKey, value);\n      this.lastAccessBeat.set(compositeKey, Date.now());\n    }\n  }, {\n    key: \"get\",\n    value: function get(keys) {\n      var compositeKey = this.getCompositeKey(keys);\n      var cache = this.map.get(compositeKey);\n      this.lastAccessBeat.set(compositeKey, Date.now());\n      this.accessBeat += 1;\n      return cache;\n    }\n  }, {\n    key: \"getCompositeKey\",\n    value: function getCompositeKey(keys) {\n      var _this = this;\n      var ids = keys.map(function (key) {\n        if (key && (0, _typeof2.default)(key) === 'object') {\n          return \"obj_\".concat(_this.getObjectID(key));\n        }\n        return \"\".concat((0, _typeof2.default)(key), \"_\").concat(key);\n      });\n      return ids.join('|');\n    }\n  }, {\n    key: \"getObjectID\",\n    value: function getObjectID(obj) {\n      if (this.objectIDMap.has(obj)) {\n        return this.objectIDMap.get(obj);\n      }\n      var id = this.nextID;\n      this.objectIDMap.set(obj, id);\n      this.nextID += 1;\n      return id;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var _this2 = this;\n      if (this.accessBeat > 10000) {\n        var now = Date.now();\n        this.lastAccessBeat.forEach(function (beat, key) {\n          if (now - beat > BEAT_LIMIT) {\n            _this2.map.delete(key);\n            _this2.lastAccessBeat.delete(key);\n          }\n        });\n        this.accessBeat = 0;\n      }\n    }\n  }]);\n  return ArrayKeyMap;\n}();\nvar uniqueMap = new ArrayKeyMap();\n\n/**\n * Like `useMemo`, but this hook result will be shared across all instances.\n */\nfunction useUniqueMemo(memoFn, deps) {\n  return _react.default.useMemo(function () {\n    var cachedValue = uniqueMap.get(deps);\n    if (cachedValue) {\n      return cachedValue;\n    }\n    var newValue = memoFn();\n    uniqueMap.set(deps, newValue);\n    return newValue;\n  }, deps);\n}\nvar _default = exports.default = useUniqueMemo;\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","default","Object","defineProperty","value","_typeof2","_classCallCheck2","_createClass2","_defineProperty2","_react","uniqueMap","ArrayKeyMap","Map","WeakMap","key","set","keys","clear","compositeKey","getCompositeKey","map","lastAccessBeat","Date","now","get","cache","accessBeat","_this","ids","concat","getObjectID","join","obj","objectIDMap","has","id","nextID","_this2","forEach","beat","BEAT_LIMIT","delete","useUniqueMemo","memoFn","deps","useMemo","cachedValue","newValue"]
}
