shadow$provide.module$node_modules$$rc_component$trigger$lib$hooks$useWinClick=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(open,clickToHide,targetEle,popupEle,mask,maskClosable,inPopupOrChild,triggerOpen){var openRef=React.useRef(open);openRef.current=open;var popupPointerDownRef=React.useRef(!1);React.useEffect(function(){if(clickToHide&&
popupEle&&(!mask||maskClosable)){var onPointerDown=function(){popupPointerDownRef.current=!1},onTriggerClose=function(e){var _e$composedPath;!openRef.current||inPopupOrChild((null===(_e$composedPath=e.composedPath)||void 0===_e$composedPath||null===(_e$composedPath=_e$composedPath.call(e))||void 0===_e$composedPath?void 0:_e$composedPath[0])||e.target)||popupPointerDownRef.current||triggerOpen(!1)},win=(0,_util.getWin)(popupEle);win.addEventListener("pointerdown",onPointerDown,!0);win.addEventListener("mousedown",
onTriggerClose,!0);win.addEventListener("contextmenu",onTriggerClose,!0);var targetShadowRoot=(0,_shadow.getShadowRoot)(targetEle);targetShadowRoot&&(targetShadowRoot.addEventListener("mousedown",onTriggerClose,!0),targetShadowRoot.addEventListener("contextmenu",onTriggerClose,!0));var _targetEle$getRootNod,_popupEle$getRootNode,targetRoot=null===targetEle||void 0===targetEle||null===(_targetEle$getRootNod=targetEle.getRootNode)||void 0===_targetEle$getRootNod?void 0:_targetEle$getRootNod.call(targetEle);
_targetEle$getRootNod=null===(_popupEle$getRootNode=popupEle.getRootNode)||void 0===_popupEle$getRootNode?void 0:_popupEle$getRootNode.call(popupEle);(0,_warning.warning)(targetRoot===_targetEle$getRootNod,"trigger element and popup element should in same shadow root.");return function(){win.removeEventListener("pointerdown",onPointerDown,!0);win.removeEventListener("mousedown",onTriggerClose,!0);win.removeEventListener("contextmenu",onTriggerClose,!0);targetShadowRoot&&(targetShadowRoot.removeEventListener("mousedown",
onTriggerClose,!0),targetShadowRoot.removeEventListener("contextmenu",onTriggerClose,!0))}}},[clickToHide,targetEle,popupEle,mask,maskClosable]);return function(){popupPointerDownRef.current=!0}};var _shadow=require("module$node_modules$rc_util$lib$Dom$shadow"),_warning=require("module$node_modules$rc_util$lib$warning"),React=global(require("module$node_modules$react$index")),_util=require("module$node_modules$$rc_component$trigger$lib$util")}
//# sourceMappingURL=module$node_modules$$rc_component$trigger$lib$hooks$useWinClick.js.map
