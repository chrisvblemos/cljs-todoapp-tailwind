shadow$provide.module$node_modules$rc_image$lib$Preview=function(global,require,module,exports){function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");var _typeof=require("module$node_modules$$babel$runtime$helpers$typeof");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;
var _objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_objectWithoutProperties2=global(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),_classnames2=global(require("module$node_modules$classnames$index")),
_rcDialog=global(require("module$node_modules$rc_dialog$lib$index")),_addEventListener=global(require("module$node_modules$rc_util$lib$Dom$addEventListener")),_KeyCode=global(require("module$node_modules$rc_util$lib$KeyCode")),_react=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};if((r=_getRequireWildcardCache(r))&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor,u;for(u in e)if("default"!==
u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(require("module$node_modules$react$index")),_Operations=global(require("module$node_modules$rc_image$lib$Operations")),_context=require("module$node_modules$rc_image$lib$context"),_useImageTransform2=global(require("module$node_modules$rc_image$lib$hooks$useImageTransform")),_useMouseEvent2=global(require("module$node_modules$rc_image$lib$hooks$useMouseEvent")),
_useStatus3=global(require("module$node_modules$rc_image$lib$hooks$useStatus")),_useTouchEvent2=global(require("module$node_modules$rc_image$lib$hooks$useTouchEvent")),_previewConfig=require("module$node_modules$rc_image$lib$previewConfig"),_excluded=["fallback","src","imgRef"],_excluded2="prefixCls src alt imageInfo fallback movable onClose visible icons rootClassName closeIcon getContainer current count countRender scaleStep minScale maxScale transitionName maskTransitionName imageRender imgCommonProps toolbarRender onTransform onChange".split(" "),
PreviewImage=function(_ref){var fallback=_ref.fallback,src=_ref.src,imgRef=_ref.imgRef;_ref=(0,_objectWithoutProperties2.default)(_ref,_excluded);fallback=(0,_useStatus3.default)({src,fallback});fallback=(0,_slicedToArray2.default)(fallback,2);var getImgRef=fallback[0];return _react.default.createElement("img",(0,_extends2.default)({ref:function(_ref2){imgRef.current=_ref2;getImgRef(_ref2)}},_ref,fallback[1]))};exports.default=function(props){var prefixCls=props.prefixCls,src=props.src,alt=props.alt,
imageInfo=props.imageInfo,fallback=props.fallback,_props$movable=props.movable,movable=void 0===_props$movable?!0:_props$movable;_props$movable=props.onClose;var visible=props.visible,_props$icons=props.icons;_props$icons=void 0===_props$icons?{}:_props$icons;var rootClassName=props.rootClassName,closeIcon=props.closeIcon,getContainer=props.getContainer,_props$current=props.current,current=void 0===_props$current?0:_props$current;_props$current=props.count;var count=void 0===_props$current?1:_props$current;
_props$current=props.countRender;var _props$scaleStep=props.scaleStep,scaleStep=void 0===_props$scaleStep?.5:_props$scaleStep;_props$scaleStep=props.minScale;_props$scaleStep=void 0===_props$scaleStep?1:_props$scaleStep;var _props$maxScale=props.maxScale;_props$maxScale=void 0===_props$maxScale?50:_props$maxScale;var _props$transitionName=props.transitionName;_props$transitionName=void 0===_props$transitionName?"zoom":_props$transitionName;var _props$maskTransition=props.maskTransitionName;_props$maskTransition=
void 0===_props$maskTransition?"fade":_props$maskTransition;var imageRender=props.imageRender,imgCommonProps=props.imgCommonProps,toolbarRender=props.toolbarRender,onTransform=props.onTransform,onChange=props.onChange,restProps=(0,_objectWithoutProperties2.default)(props,_excluded2),imgRef=(0,_react.useRef)(),groupContext=(0,_react.useContext)(_context.PreviewGroupContext),showLeftOrRightSwitches=groupContext&&1<count,showOperationsProgress=groupContext&&1<=count,_useState=(0,_react.useState)(!0);
_useState=(0,_slicedToArray2.default)(_useState,2);var enableTransition=_useState[0],setEnableTransition=_useState[1];onTransform=(0,_useImageTransform2.default)(imgRef,_props$scaleStep,_props$maxScale,onTransform);var transform=onTransform.transform,resetTransform=onTransform.resetTransform,updateTransform=onTransform.updateTransform,dispatchZoomChange=onTransform.dispatchZoomChange,_useMouseEvent=(0,_useMouseEvent2.default)(imgRef,movable,visible,scaleStep,transform,updateTransform,dispatchZoomChange);
_useState=_useMouseEvent.isMoving;onTransform=_useMouseEvent.onMouseDown;_useMouseEvent=_useMouseEvent.onWheel;var _useTouchEvent=(0,_useTouchEvent2.default)(imgRef,movable,visible,_props$scaleStep,transform,updateTransform,dispatchZoomChange);movable=_useTouchEvent.isTouching;var onTouchStart=_useTouchEvent.onTouchStart,onTouchMove=_useTouchEvent.onTouchMove;_useTouchEvent=_useTouchEvent.onTouchEnd;var rotate=transform.rotate,scale=transform.scale;_useState=(0,_classnames2.default)((0,_defineProperty2.default)({},
"".concat(prefixCls,"-moving"),_useState));(0,_react.useEffect)(function(){enableTransition||setEnableTransition(!0)},[enableTransition]);var onActive=function(offset){var position=current+offset;!Number.isInteger(position)||0>position||position>count-1||(setEnableTransition(!1),resetTransform(0>offset?"prev":"next"),null===onChange||void 0===onChange||onChange(position,current))},onKeyDown=function(event){visible&&showLeftOrRightSwitches&&(event.keyCode===_KeyCode.default.LEFT?onActive(-1):event.keyCode===
_KeyCode.default.RIGHT&&onActive(1))};(0,_react.useEffect)(function(){var onKeyDownListener=(0,_addEventListener.default)(window,"keydown",onKeyDown,!1);return function(){onKeyDownListener.remove()}},[visible,showLeftOrRightSwitches,current]);props=_react.default.createElement(PreviewImage,(0,_extends2.default)({},imgCommonProps,{width:props.width,height:props.height,imgRef,className:"".concat(prefixCls,"-img"),alt,style:{transform:"translate3d(".concat(transform.x,"px, ").concat(transform.y,"px, 0) scale3d(").concat(transform.flipX?
"-":"").concat(scale,", ").concat(transform.flipY?"-":"").concat(scale,", 1) rotate(").concat(rotate,"deg)"),transitionDuration:(!enableTransition||movable)&&"0s"},fallback,src,onWheel:_useMouseEvent,onMouseDown:onTransform,onDoubleClick:function(event){visible&&(1!==scale?updateTransform({x:0,y:0,scale:1},"doubleClick"):dispatchZoomChange(_previewConfig.BASE_SCALE_RATIO+scaleStep,"doubleClick",event.clientX,event.clientY))},onTouchStart,onTouchMove,onTouchEnd:_useTouchEvent,onTouchCancel:_useTouchEvent}));
src=(0,_objectSpread2.default)({url:src,alt},imageInfo);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_rcDialog.default,(0,_extends2.default)({transitionName:_props$transitionName,maskTransitionName:_props$maskTransition,closable:!1,keyboard:!0,prefixCls,onClose:_props$movable,visible,classNames:{wrapper:_useState},rootClassName,getContainer},restProps,{afterClose:function(){resetTransform("close")}}),_react.default.createElement("div",{className:"".concat(prefixCls,
"-img-wrapper")},imageRender?imageRender(props,(0,_objectSpread2.default)({transform,image:src},groupContext?{current}:{})):props)),_react.default.createElement(_Operations.default,{visible,transform,maskTransitionName:_props$maskTransition,closeIcon,getContainer,prefixCls,rootClassName,icons:_props$icons,countRender:_props$current,showSwitch:showLeftOrRightSwitches,showProgress:showOperationsProgress,current,count,scale,minScale:_props$scaleStep,maxScale:_props$maxScale,toolbarRender,onActive,onZoomIn:function(){dispatchZoomChange(_previewConfig.BASE_SCALE_RATIO+
scaleStep,"zoomIn")},onZoomOut:function(){dispatchZoomChange(_previewConfig.BASE_SCALE_RATIO/(_previewConfig.BASE_SCALE_RATIO+scaleStep),"zoomOut")},onRotateRight:function(){updateTransform({rotate:rotate+90},"rotateRight")},onRotateLeft:function(){updateTransform({rotate:rotate-90},"rotateLeft")},onFlipX:function(){updateTransform({flipX:!transform.flipX},"flipX")},onFlipY:function(){updateTransform({flipY:!transform.flipY},"flipY")},onClose:_props$movable,onReset:function(){resetTransform("reset")},
zIndex:void 0!==restProps.zIndex?restProps.zIndex+1:void 0,image:src}))}}
//# sourceMappingURL=module$node_modules$rc_image$lib$Preview.js.map
