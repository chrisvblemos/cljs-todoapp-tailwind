shadow$provide.module$node_modules$rc_table$lib$stickyScrollBar=function(global,require,module,exports){function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");var _typeof=require("module$node_modules$$babel$runtime$helpers$typeof");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=
void 0;var _defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_context=require("module$node_modules$$rc_component$context$lib$index"),_classnames=global(require("module$node_modules$classnames$index")),_addEventListener=global(require("module$node_modules$rc_util$lib$Dom$addEventListener")),
_getScrollBarSize=global(require("module$node_modules$rc_util$lib$getScrollBarSize")),React=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};if((r=_getRequireWildcardCache(r))&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor,u;for(u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,
u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(require("module$node_modules$react$index")),_TableContext=global(require("module$node_modules$rc_table$lib$context$TableContext")),_useFrame=require("module$node_modules$rc_table$lib$hooks$useFrame"),_raf=global(require("module$node_modules$rc_util$lib$raf")),_offsetUtil=require("module$node_modules$rc_table$lib$utils$offsetUtil");exports.default=React.forwardRef(function(_ref,ref){var _scrollBodyRef$curren,_scrollBodyRef$curren2,scrollBodyRef=_ref.scrollBodyRef,
onScroll=_ref.onScroll,offsetScroll=_ref.offsetScroll,container=_ref.container,direction=_ref.direction;_ref=(0,_context.useContext)(_TableContext.default,"prefixCls");var bodyScrollWidth=(null===(_scrollBodyRef$curren=scrollBodyRef.current)||void 0===_scrollBodyRef$curren?void 0:_scrollBodyRef$curren.scrollWidth)||0,bodyWidth=(null===(_scrollBodyRef$curren2=scrollBodyRef.current)||void 0===_scrollBodyRef$curren2?void 0:_scrollBodyRef$curren2.clientWidth)||0,scrollBarWidth=bodyScrollWidth&&bodyWidth/
bodyScrollWidth*bodyWidth;_scrollBodyRef$curren=React.useRef();_scrollBodyRef$curren2=(0,_useFrame.useLayoutState)({scrollLeft:0,isHiddenScrollBar:!0});_scrollBodyRef$curren2=(0,_slicedToArray2.default)(_scrollBodyRef$curren2,2);var scrollState=_scrollBodyRef$curren2[0],setScrollState=_scrollBodyRef$curren2[1],refState=React.useRef({delta:0,x:0});_scrollBodyRef$curren2=React.useState(!1);_scrollBodyRef$curren2=(0,_slicedToArray2.default)(_scrollBodyRef$curren2,2);var isActive=_scrollBodyRef$curren2[0],
setActive=_scrollBodyRef$curren2[1],rafRef=React.useRef(null);React.useEffect(function(){return function(){_raf.default.cancel(rafRef.current)}},[]);var onMouseUp=function(){setActive(!1)},onMouseMove=function(event){var _window,buttons=(event||(null===(_window=window)||void 0===_window?void 0:_window.event)).buttons;if(isActive&&0!==buttons){if(_window=refState.current.x+event.pageX-refState.current.x-refState.current.delta,buttons="rtl"===direction,_window=Math.max(buttons?scrollBarWidth-bodyWidth:
0,Math.min(buttons?0:bodyWidth-scrollBarWidth,_window)),!buttons||Math.abs(_window)+Math.abs(scrollBarWidth)<bodyWidth)onScroll({scrollLeft:_window/bodyWidth*(bodyScrollWidth+2)}),refState.current.x=event.pageX}else isActive&&setActive(!1)},checkScrollBarVisible=function(){rafRef.current=(0,_raf.default)(function(){if(scrollBodyRef.current){var tableOffsetTop=(0,_offsetUtil.getOffset)(scrollBodyRef.current).top,tableBottomOffset=tableOffsetTop+scrollBodyRef.current.offsetHeight,currentClientOffset=
container===window?document.documentElement.scrollTop+window.innerHeight:(0,_offsetUtil.getOffset)(container).top+container.clientHeight;tableBottomOffset-(0,_getScrollBarSize.default)()<=currentClientOffset||tableOffsetTop>=currentClientOffset-offsetScroll?setScrollState(function(state){return(0,_objectSpread2.default)((0,_objectSpread2.default)({},state),{},{isHiddenScrollBar:!0})}):setScrollState(function(state){return(0,_objectSpread2.default)((0,_objectSpread2.default)({},state),{},{isHiddenScrollBar:!1})})}})},
setScrollLeft=function(left){setScrollState(function(state){return(0,_objectSpread2.default)((0,_objectSpread2.default)({},state),{},{scrollLeft:left/bodyScrollWidth*bodyWidth||0})})};React.useImperativeHandle(ref,function(){return{setScrollLeft,checkScrollBarVisible}});React.useEffect(function(){var onMouseUpListener=(0,_addEventListener.default)(document.body,"mouseup",onMouseUp,!1),onMouseMoveListener=(0,_addEventListener.default)(document.body,"mousemove",onMouseMove,!1);checkScrollBarVisible();
return function(){onMouseUpListener.remove();onMouseMoveListener.remove()}},[scrollBarWidth,isActive]);React.useEffect(function(){var onScrollListener=(0,_addEventListener.default)(container,"scroll",checkScrollBarVisible,!1),onResizeListener=(0,_addEventListener.default)(window,"resize",checkScrollBarVisible,!1);return function(){onScrollListener.remove();onResizeListener.remove()}},[container]);React.useEffect(function(){scrollState.isHiddenScrollBar||setScrollState(function(state){var bodyNode=
scrollBodyRef.current;return bodyNode?(0,_objectSpread2.default)((0,_objectSpread2.default)({},state),{},{scrollLeft:bodyNode.scrollLeft/bodyNode.scrollWidth*bodyNode.clientWidth}):state})},[scrollState.isHiddenScrollBar]);return bodyScrollWidth<=bodyWidth||!scrollBarWidth||scrollState.isHiddenScrollBar?null:React.createElement("div",{style:{height:(0,_getScrollBarSize.default)(),width:bodyWidth,bottom:offsetScroll},className:"".concat(_ref,"-sticky-scroll")},React.createElement("div",{onMouseDown:function(event){event.persist();
refState.current.delta=event.pageX-scrollState.scrollLeft;refState.current.x=0;setActive(!0);event.preventDefault()},ref:_scrollBodyRef$curren,className:(0,_classnames.default)("".concat(_ref,"-sticky-scroll-bar"),(0,_defineProperty2.default)({},"".concat(_ref,"-sticky-scroll-bar-active"),isActive)),style:{width:"".concat(scrollBarWidth,"px"),transform:"translate3d(".concat(scrollState.scrollLeft,"px, 0, 0)")}}))})}
//# sourceMappingURL=module$node_modules$rc_table$lib$stickyScrollBar.js.map
