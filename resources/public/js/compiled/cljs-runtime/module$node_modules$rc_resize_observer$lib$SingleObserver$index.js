shadow$provide.module$node_modules$rc_resize_observer$lib$SingleObserver$index=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard").default;module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _objectSpread2=module(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_typeof2=module(require("module$node_modules$$babel$runtime$helpers$typeof")),
_findDOMNode=module(require("module$node_modules$rc_util$lib$Dom$findDOMNode")),_ref=require("module$node_modules$rc_util$lib$ref"),React=global(require("module$node_modules$react$index")),_Collection=require("module$node_modules$rc_resize_observer$lib$Collection"),_observerUtil=require("module$node_modules$rc_resize_observer$lib$utils$observerUtil"),_DomWrapper=module(require("module$node_modules$rc_resize_observer$lib$SingleObserver$DomWrapper"));require=React.forwardRef(function(props,ref){var children=
props.children,disabled=props.disabled,elementRef=React.useRef(null),wrapperRef=React.useRef(null),onCollectionResize=React.useContext(_Collection.CollectionContext),isRenderProps="function"===typeof children;children=isRenderProps?children(elementRef):children;var sizeRef=React.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),originRef=(isRenderProps=!isRenderProps&&React.isValidElement(children)&&(0,_ref.supportRef)(children))?(0,_ref.getNodeRef)(children):null;originRef=(0,_ref.useComposeRef)(originRef,
elementRef);var getDom=function(){var _elementRef$current;return(0,_findDOMNode.default)(elementRef.current)||(elementRef.current&&"object"===(0,_typeof2.default)(elementRef.current)?(0,_findDOMNode.default)(null===(_elementRef$current=elementRef.current)||void 0===_elementRef$current?void 0:_elementRef$current.nativeElement):null)||(0,_findDOMNode.default)(wrapperRef.current)};React.useImperativeHandle(ref,function(){return getDom()});var propsRef=React.useRef(props);propsRef.current=props;var onInternalResize=
React.useCallback(function(target){var _propsRef$current=propsRef.current,onResize=_propsRef$current.onResize;_propsRef$current=_propsRef$current.data;var _target$getBoundingCl=target.getBoundingClientRect(),width=_target$getBoundingCl.width;_target$getBoundingCl=_target$getBoundingCl.height;var offsetWidth=target.offsetWidth,offsetHeight=target.offsetHeight,fixedWidth=Math.floor(width),fixedHeight=Math.floor(_target$getBoundingCl);if(sizeRef.current.width!==fixedWidth||sizeRef.current.height!==fixedHeight||
sizeRef.current.offsetWidth!==offsetWidth||sizeRef.current.offsetHeight!==offsetHeight){fixedWidth={width:fixedWidth,height:fixedHeight,offsetWidth,offsetHeight};sizeRef.current=fixedWidth;width=offsetWidth===Math.round(width)?width:offsetWidth;_target$getBoundingCl=offsetHeight===Math.round(_target$getBoundingCl)?_target$getBoundingCl:offsetHeight;var sizeInfo=(0,_objectSpread2.default)((0,_objectSpread2.default)({},fixedWidth),{},{offsetWidth:width,offsetHeight:_target$getBoundingCl});null===onCollectionResize||
void 0===onCollectionResize||onCollectionResize(sizeInfo,target,_propsRef$current);onResize&&Promise.resolve().then(function(){onResize(sizeInfo,target)})}},[]);React.useEffect(function(){var currentElement=getDom();currentElement&&!disabled&&(0,_observerUtil.observe)(currentElement,onInternalResize);return function(){return(0,_observerUtil.unobserve)(currentElement,onInternalResize)}},[elementRef.current,disabled]);return React.createElement(_DomWrapper.default,{ref:wrapperRef},isRenderProps?React.cloneElement(children,
{ref:originRef}):children)});require.displayName="SingleObserver";exports.default=require}
//# sourceMappingURL=module$node_modules$rc_resize_observer$lib$SingleObserver$index.js.map
