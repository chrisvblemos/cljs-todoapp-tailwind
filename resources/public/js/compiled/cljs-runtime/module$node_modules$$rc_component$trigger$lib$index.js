shadow$provide.module$node_modules$$rc_component$trigger$lib$index=function(global,require,module,exports){function generateTrigger(){var PortalComponent=0<arguments.length&&void 0!==arguments[0]?arguments[0]:_portal.default,Trigger=React.forwardRef(function(props,ref){function wrapperAction(eventName,nextOpen,delay,preEvent){cloneProps[eventName]=function(event){var _originChildProps$eve;null===preEvent||void 0===preEvent||preEvent(event);triggerOpen(nextOpen,delay);for(var _len=arguments.length,
args=Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];null===(_originChildProps$eve=originChildProps[eventName])||void 0===_originChildProps$eve||_originChildProps$eve.call.apply(_originChildProps$eve,[originChildProps,event].concat(args))}}var _props$prefixCls=props.prefixCls,prefixCls=void 0===_props$prefixCls?"rc-trigger-popup":_props$prefixCls,children=props.children,_props$action=props.action,action=void 0===_props$action?"hover":_props$action,showAction=props.showAction,
hideAction=props.hideAction,popupVisible=props.popupVisible,defaultPopupVisible=props.defaultPopupVisible,onPopupVisibleChange=props.onPopupVisibleChange,afterPopupVisibleChange=props.afterPopupVisibleChange,mouseEnterDelay=props.mouseEnterDelay,_props$mouseLeaveDela=props.mouseLeaveDelay,mouseLeaveDelay=void 0===_props$mouseLeaveDela?.1:_props$mouseLeaveDela,focusDelay=props.focusDelay,blurDelay=props.blurDelay,mask=props.mask,_props$maskClosable=props.maskClosable,maskClosable=void 0===_props$maskClosable?
!0:_props$maskClosable,getPopupContainer=props.getPopupContainer,forceRender=props.forceRender,autoDestroy=props.autoDestroy,destroyPopupOnHide=props.destroyPopupOnHide,popup=props.popup,popupClassName=props.popupClassName,popupStyle=props.popupStyle,popupPlacement=props.popupPlacement,_props$builtinPlaceme=props.builtinPlacements,builtinPlacements=void 0===_props$builtinPlaceme?{}:_props$builtinPlaceme,popupAlign=props.popupAlign,zIndex=props.zIndex,stretch=props.stretch,getPopupClassNameFromAlign=
props.getPopupClassNameFromAlign,fresh=props.fresh,alignPoint=props.alignPoint,onPopupClick=props.onPopupClick,onPopupAlign=props.onPopupAlign,arrow=props.arrow,popupMotion=props.popupMotion,maskMotion=props.maskMotion,popupTransitionName=props.popupTransitionName,popupAnimation=props.popupAnimation,maskTransitionName=props.maskTransitionName,maskAnimation=props.maskAnimation,className=props.className,getTriggerDOMNode=props.getTriggerDOMNode,restProps=(0,_objectWithoutProperties2.default)(props,
_excluded),mergedAutoDestroy=autoDestroy||destroyPopupOnHide||!1,_React$useState=React.useState(!1),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),mobile=_React$useState2[0],setMobile=_React$useState2[1];(0,_useLayoutEffect.default)(function(){setMobile((0,_isMobile.default)())},[]);var subPopupElements=React.useRef({}),parentContext=React.useContext(_context.default),context=React.useMemo(function(){return{registerSubPopup:function(id,subPopupEle){subPopupElements.current[id]=subPopupEle;
null===parentContext||void 0===parentContext||parentContext.registerSubPopup(id,subPopupEle)}}},[parentContext]),id=(0,_useId.default)(),_React$useState3=React.useState(null),_React$useState4=(0,_slicedToArray2.default)(_React$useState3,2),popupEle=_React$useState4[0],setPopupEle=_React$useState4[1],externalPopupRef=React.useRef(null),setPopupRef=(0,_useEvent.default)(function(node){externalPopupRef.current=node;(0,_findDOMNode.isDOM)(node)&&popupEle!==node&&setPopupEle(node);null===parentContext||
void 0===parentContext||parentContext.registerSubPopup(id,node)}),_React$useState5=React.useState(null),_React$useState6=(0,_slicedToArray2.default)(_React$useState5,2),targetEle=_React$useState6[0],setTargetEle=_React$useState6[1],externalForwardRef=React.useRef(null),setTargetRef=(0,_useEvent.default)(function(node){(0,_findDOMNode.isDOM)(node)&&targetEle!==node&&(setTargetEle(node),externalForwardRef.current=node)}),child=React.Children.only(children),originChildProps=(null===child||void 0===child?
void 0:child.props)||{},cloneProps={},inPopupOrChild=(0,_useEvent.default)(function(ele){var _getShadowRoot,_getShadowRoot2;return(null===targetEle||void 0===targetEle?void 0:targetEle.contains(ele))||(null===(_getShadowRoot=(0,_shadow.getShadowRoot)(targetEle))||void 0===_getShadowRoot?void 0:_getShadowRoot.host)===ele||ele===targetEle||(null===popupEle||void 0===popupEle?void 0:popupEle.contains(ele))||(null===(_getShadowRoot2=(0,_shadow.getShadowRoot)(popupEle))||void 0===_getShadowRoot2?void 0:
_getShadowRoot2.host)===ele||ele===popupEle||Object.values(subPopupElements.current).some(function(subPopupEle){return(null===subPopupEle||void 0===subPopupEle?void 0:subPopupEle.contains(ele))||ele===subPopupEle})}),mergePopupMotion=(0,_util.getMotion)(prefixCls,popupMotion,popupAnimation,popupTransitionName),mergeMaskMotion=(0,_util.getMotion)(prefixCls,maskMotion,maskAnimation,maskTransitionName),_React$useState7=React.useState(defaultPopupVisible||!1),_React$useState8=(0,_slicedToArray2.default)(_React$useState7,
2),internalOpen=_React$useState8[0],setInternalOpen=_React$useState8[1],mergedOpen=null!==popupVisible&&void 0!==popupVisible?popupVisible:internalOpen,setMergedOpen=(0,_useEvent.default)(function(nextOpen){void 0===popupVisible&&setInternalOpen(nextOpen)});(0,_useLayoutEffect.default)(function(){setInternalOpen(popupVisible||!1)},[popupVisible]);var openRef=React.useRef(mergedOpen);openRef.current=mergedOpen;var lastTriggerRef=React.useRef([]);lastTriggerRef.current=[];var internalTriggerOpen=(0,_useEvent.default)(function(nextOpen){var _lastTriggerRef$curre;
setMergedOpen(nextOpen);(null!==(_lastTriggerRef$curre=lastTriggerRef.current[lastTriggerRef.current.length-1])&&void 0!==_lastTriggerRef$curre?_lastTriggerRef$curre:mergedOpen)!==nextOpen&&(lastTriggerRef.current.push(nextOpen),null===onPopupVisibleChange||void 0===onPopupVisibleChange||onPopupVisibleChange(nextOpen))}),delayRef=React.useRef(),clearDelay=function(){clearTimeout(delayRef.current)},triggerOpen=function(nextOpen){var delay=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;clearDelay();
0===delay?internalTriggerOpen(nextOpen):delayRef.current=setTimeout(function(){internalTriggerOpen(nextOpen)},1E3*delay)};React.useEffect(function(){return clearDelay},[]);var _React$useState9=React.useState(!1),_React$useState10=(0,_slicedToArray2.default)(_React$useState9,2),inMotion=_React$useState10[0],setInMotion=_React$useState10[1];(0,_useLayoutEffect.default)(function(firstMount){firstMount&&!mergedOpen||setInMotion(!0)},[mergedOpen]);var _React$useState11=React.useState(null),_React$useState12=
(0,_slicedToArray2.default)(_React$useState11,2),motionPrepareResolve=_React$useState12[0],setMotionPrepareResolve=_React$useState12[1],_React$useState13=React.useState(null),_React$useState14=(0,_slicedToArray2.default)(_React$useState13,2),mousePos=_React$useState14[0],setMousePos=_React$useState14[1],setMousePosByEvent=function(event){setMousePos([event.clientX,event.clientY])},_useAlign=(0,_useAlign3.default)(mergedOpen,popupEle,alignPoint&&null!==mousePos?mousePos:targetEle,popupPlacement,builtinPlacements,
popupAlign,onPopupAlign),_useAlign2=(0,_slicedToArray2.default)(_useAlign,11),ready=_useAlign2[0],offsetX=_useAlign2[1],offsetY=_useAlign2[2],offsetR=_useAlign2[3],offsetB=_useAlign2[4],arrowX=_useAlign2[5],arrowY=_useAlign2[6],scaleX=_useAlign2[7],scaleY=_useAlign2[8],alignInfo=_useAlign2[9],onAlign=_useAlign2[10],_useAction=(0,_useAction3.default)(mobile,action,showAction,hideAction),_useAction2=(0,_slicedToArray2.default)(_useAction,2),showActions=_useAction2[0],hideActions=_useAction2[1],clickToShow=
showActions.has("click"),clickToHide=hideActions.has("click")||hideActions.has("contextMenu"),triggerAlign=(0,_useEvent.default)(function(){inMotion||onAlign()});(0,_useWatch.default)(mergedOpen,targetEle,popupEle,triggerAlign,function(){openRef.current&&alignPoint&&clickToHide&&triggerOpen(!1)});(0,_useLayoutEffect.default)(function(){triggerAlign()},[mousePos,popupPlacement]);(0,_useLayoutEffect.default)(function(){!mergedOpen||null!==builtinPlacements&&void 0!==builtinPlacements&&builtinPlacements[popupPlacement]||
triggerAlign()},[JSON.stringify(popupAlign)]);var alignedClassName=React.useMemo(function(){var baseClassName=(0,_util.getAlignPopupClassName)(builtinPlacements,prefixCls,alignInfo,alignPoint);return(0,_classnames.default)(baseClassName,null===getPopupClassNameFromAlign||void 0===getPopupClassNameFromAlign?void 0:getPopupClassNameFromAlign(alignInfo))},[alignInfo,getPopupClassNameFromAlign,builtinPlacements,prefixCls,alignPoint]);React.useImperativeHandle(ref,function(){return{nativeElement:externalForwardRef.current,
popupElement:externalPopupRef.current,forceAlign:triggerAlign}});var _React$useState15=React.useState(0),_React$useState16=(0,_slicedToArray2.default)(_React$useState15,2),targetWidth=_React$useState16[0],setTargetWidth=_React$useState16[1],_React$useState17=React.useState(0),_React$useState18=(0,_slicedToArray2.default)(_React$useState17,2),targetHeight=_React$useState18[0],setTargetHeight=_React$useState18[1],syncTargetSize=function(){if(stretch&&targetEle){var rect=targetEle.getBoundingClientRect();
setTargetWidth(rect.width);setTargetHeight(rect.height)}};(0,_useLayoutEffect.default)(function(){motionPrepareResolve&&(onAlign(),motionPrepareResolve(),setMotionPrepareResolve(null))},[motionPrepareResolve]);if(clickToShow||clickToHide)cloneProps.onClick=function(event){var _originChildProps$onC;openRef.current&&clickToHide?triggerOpen(!1):!openRef.current&&clickToShow&&(setMousePosByEvent(event),triggerOpen(!0));for(var _len2=arguments.length,args=Array(1<_len2?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-
1]=arguments[_key2];null===(_originChildProps$onC=originChildProps.onClick)||void 0===_originChildProps$onC||_originChildProps$onC.call.apply(_originChildProps$onC,[originChildProps,event].concat(args))};var onPopupPointerDown=(0,_useWinClick.default)(mergedOpen,clickToHide,targetEle,popupEle,mask,maskClosable,inPopupOrChild,triggerOpen),hoverToShow=showActions.has("hover"),hoverToHide=hideActions.has("hover");if(hoverToShow){wrapperAction("onMouseEnter",!0,mouseEnterDelay,function(event){setMousePosByEvent(event)});
wrapperAction("onPointerEnter",!0,mouseEnterDelay,function(event){setMousePosByEvent(event)});var onPopupMouseEnter=function(event){(mergedOpen||inMotion)&&null!==popupEle&&void 0!==popupEle&&popupEle.contains(event.target)&&triggerOpen(!0,mouseEnterDelay)};alignPoint&&(cloneProps.onMouseMove=function(event){var _originChildProps$onM;null===(_originChildProps$onM=originChildProps.onMouseMove)||void 0===_originChildProps$onM||_originChildProps$onM.call(originChildProps,event)})}if(hoverToHide){wrapperAction("onMouseLeave",
!1,mouseLeaveDelay);wrapperAction("onPointerLeave",!1,mouseLeaveDelay);var onPopupMouseLeave=function(){triggerOpen(!1,mouseLeaveDelay)}}showActions.has("focus")&&wrapperAction("onFocus",!0,focusDelay);hideActions.has("focus")&&wrapperAction("onBlur",!1,blurDelay);showActions.has("contextMenu")&&(cloneProps.onContextMenu=function(event){var _originChildProps$onC2;openRef.current&&hideActions.has("contextMenu")?triggerOpen(!1):(setMousePosByEvent(event),triggerOpen(!0));event.preventDefault();for(var _len3=
arguments.length,args=Array(1<_len3?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];null===(_originChildProps$onC2=originChildProps.onContextMenu)||void 0===_originChildProps$onC2||_originChildProps$onC2.call.apply(_originChildProps$onC2,[originChildProps,event].concat(args))});className&&(cloneProps.className=(0,_classnames.default)(originChildProps.className,className));var mergedChildrenProps=(0,_objectSpread2.default)((0,_objectSpread2.default)({},originChildProps),cloneProps),
passedProps={};"onContextMenu onClick onMouseDown onTouchStart onMouseEnter onMouseLeave onFocus onBlur".split(" ").forEach(function(eventName){restProps[eventName]&&(passedProps[eventName]=function(){for(var _mergedChildrenProps$,_len4=arguments.length,args=Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];null===(_mergedChildrenProps$=mergedChildrenProps[eventName])||void 0===_mergedChildrenProps$||_mergedChildrenProps$.call.apply(_mergedChildrenProps$,[mergedChildrenProps].concat(args));
restProps[eventName].apply(restProps,args)})});var triggerNode=React.cloneElement(child,(0,_objectSpread2.default)((0,_objectSpread2.default)({},mergedChildrenProps),passedProps)),arrowPos={x:arrowX,y:arrowY},innerArrow=arrow?(0,_objectSpread2.default)({},!0!==arrow?arrow:{}):null;return React.createElement(React.Fragment,null,React.createElement(_rcResizeObserver.default,{disabled:!mergedOpen,ref:setTargetRef,onResize:function(){syncTargetSize();triggerAlign()}},React.createElement(_TriggerWrapper.default,
{getTriggerDOMNode},triggerNode)),React.createElement(_context.default.Provider,{value:context},React.createElement(_Popup.default,{portal:PortalComponent,ref:setPopupRef,prefixCls,popup,className:(0,_classnames.default)(popupClassName,alignedClassName),style:popupStyle,target:targetEle,onMouseEnter:onPopupMouseEnter,onMouseLeave:onPopupMouseLeave,onPointerEnter:onPopupMouseEnter,zIndex,open:mergedOpen,keepDom:inMotion,fresh,onClick:onPopupClick,onPointerDownCapture:onPopupPointerDown,mask,motion:mergePopupMotion,
maskMotion:mergeMaskMotion,onVisibleChanged:function(visible){setInMotion(!1);onAlign();null===afterPopupVisibleChange||void 0===afterPopupVisibleChange||afterPopupVisibleChange(visible)},onPrepare:function(){return new Promise(function(resolve){syncTargetSize();setMotionPrepareResolve(function(){return resolve})})},forceRender,autoDestroy:mergedAutoDestroy,getPopupContainer,align:alignInfo,arrow:innerArrow,arrowPos,ready,offsetX,offsetY,offsetR,offsetB,onAlign:triggerAlign,stretch,targetWidth:targetWidth/
scaleX,targetHeight:targetHeight/scaleY})))});Trigger.displayName="Trigger";return Trigger}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;module=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;exports.generateTrigger=generateTrigger;var _objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_slicedToArray2=
global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_objectWithoutProperties2=global(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),_portal=global(require("module$node_modules$$rc_component$portal$lib$index")),_classnames=global(require("module$node_modules$classnames$index")),_rcResizeObserver=global(require("module$node_modules$rc_resize_observer$lib$index")),_findDOMNode=require("module$node_modules$rc_util$lib$Dom$findDOMNode"),_shadow=require("module$node_modules$rc_util$lib$Dom$shadow"),
_useEvent=global(require("module$node_modules$rc_util$lib$hooks$useEvent")),_useId=global(require("module$node_modules$rc_util$lib$hooks$useId")),_useLayoutEffect=global(require("module$node_modules$rc_util$lib$hooks$useLayoutEffect")),_isMobile=global(require("module$node_modules$rc_util$lib$isMobile")),React=module(require("module$node_modules$react$index")),_Popup=global(require("module$node_modules$$rc_component$trigger$lib$Popup$index")),_TriggerWrapper=global(require("module$node_modules$$rc_component$trigger$lib$TriggerWrapper")),
_context=global(require("module$node_modules$$rc_component$trigger$lib$context")),_useAction3=global(require("module$node_modules$$rc_component$trigger$lib$hooks$useAction")),_useAlign3=global(require("module$node_modules$$rc_component$trigger$lib$hooks$useAlign")),_useWatch=global(require("module$node_modules$$rc_component$trigger$lib$hooks$useWatch")),_useWinClick=global(require("module$node_modules$$rc_component$trigger$lib$hooks$useWinClick")),_util=require("module$node_modules$$rc_component$trigger$lib$util"),
_excluded="prefixCls children action showAction hideAction popupVisible defaultPopupVisible onPopupVisibleChange afterPopupVisibleChange mouseEnterDelay mouseLeaveDelay focusDelay blurDelay mask maskClosable getPopupContainer forceRender autoDestroy destroyPopupOnHide popup popupClassName popupStyle popupPlacement builtinPlacements popupAlign zIndex stretch getPopupClassNameFromAlign fresh alignPoint onPopupClick onPopupAlign arrow popupMotion maskMotion popupTransitionName popupAnimation maskTransitionName maskAnimation className getTriggerDOMNode".split(" ");
exports.default=generateTrigger(_portal.default)}
//# sourceMappingURL=module$node_modules$$rc_component$trigger$lib$index.js.map
