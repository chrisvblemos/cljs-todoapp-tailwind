shadow$provide.module$node_modules$rc_tabs$lib$TabNavList$index=function(global,require,module,exports){function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};if((r=_getRequireWildcardCache(r))&&r.has(e))return r.get(e);var n={__proto__:null},
a=Object.defineProperty&&Object.getOwnPropertyDescriptor,u;for(u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");var _typeof=require("module$node_modules$$babel$runtime$helpers$typeof");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;
var _extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),_defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_toConsumableArray2=global(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_classnames=global(require("module$node_modules$classnames$index")),
_rcResizeObserver=global(require("module$node_modules$rc_resize_observer$lib$index")),_useEvent=global(require("module$node_modules$rc_util$lib$hooks$useEvent")),_ref3=require("module$node_modules$rc_util$lib$ref"),_react=_interopRequireWildcard(require("module$node_modules$react$index")),_TabContext=global(require("module$node_modules$rc_tabs$lib$TabContext")),_useIndicator2=global(require("module$node_modules$rc_tabs$lib$hooks$useIndicator")),_useOffsets=global(require("module$node_modules$rc_tabs$lib$hooks$useOffsets")),
_useSyncState5=global(require("module$node_modules$rc_tabs$lib$hooks$useSyncState")),_useTouchMove=global(require("module$node_modules$rc_tabs$lib$hooks$useTouchMove")),_useUpdate=_interopRequireWildcard(require("module$node_modules$rc_tabs$lib$hooks$useUpdate")),_useVisibleRange3=global(require("module$node_modules$rc_tabs$lib$hooks$useVisibleRange")),_util=require("module$node_modules$rc_tabs$lib$util"),_AddButton=global(require("module$node_modules$rc_tabs$lib$TabNavList$AddButton")),_ExtraContent=
global(require("module$node_modules$rc_tabs$lib$TabNavList$ExtraContent")),_OperationNode=global(require("module$node_modules$rc_tabs$lib$TabNavList$OperationNode")),_TabNode=global(require("module$node_modules$rc_tabs$lib$TabNavList$TabNode")),getSize=function(refObj){var _ref=refObj.current||{},_ref$offsetWidth=_ref.offsetWidth;_ref$offsetWidth=void 0===_ref$offsetWidth?0:_ref$offsetWidth;_ref=_ref.offsetHeight;_ref=void 0===_ref?0:_ref;if(refObj.current){var _refObj$current$getBo=refObj.current.getBoundingClientRect();
refObj=_refObj$current$getBo.width;_refObj$current$getBo=_refObj$current$getBo.height;if(1>Math.abs(refObj-_ref$offsetWidth))return[refObj,_refObj$current$getBo]}return[_ref$offsetWidth,_ref]};require=_react.forwardRef(function(props,ref){function alignInRange(value){return value<transformMin?transformMin:value>transformMax?transformMax:value}function clearTouchMoving(){touchMovingRef.current&&clearTimeout(touchMovingRef.current)}var className=props.className,style=props.style,id=props.id,animated=
props.animated,activeKey=props.activeKey,rtl=props.rtl,extra=props.extra,editable=props.editable,locale=props.locale,tabPosition=props.tabPosition,tabBarGutter=props.tabBarGutter,children=props.children,onTabClick=props.onTabClick,onTabScroll=props.onTabScroll,indicator=props.indicator,_React$useContext=_react.useContext(_TabContext.default),prefixCls=_React$useContext.prefixCls,tabs=_React$useContext.tabs,containerRef=(0,_react.useRef)(null),extraLeftRef=(0,_react.useRef)(null),extraRightRef=(0,_react.useRef)(null),
tabsWrapperRef=(0,_react.useRef)(null),tabListRef=(0,_react.useRef)(null),operationsRef=(0,_react.useRef)(null),innerAddButtonRef=(0,_react.useRef)(null),tabPositionTopOrBottom="top"===tabPosition||"bottom"===tabPosition,_useSyncState=(0,_useSyncState5.default)(0,function(next,prev){tabPositionTopOrBottom&&onTabScroll&&onTabScroll({direction:next>prev?"left":"right"})}),_useSyncState2=(0,_slicedToArray2.default)(_useSyncState,2),transformLeft=_useSyncState2[0],setTransformLeft=_useSyncState2[1],_useSyncState3=
(0,_useSyncState5.default)(0,function(next,prev){!tabPositionTopOrBottom&&onTabScroll&&onTabScroll({direction:next>prev?"top":"bottom"})}),_useSyncState4=(0,_slicedToArray2.default)(_useSyncState3,2),transformTop=_useSyncState4[0],setTransformTop=_useSyncState4[1],_useState=(0,_react.useState)([0,0]),_useState2=(0,_slicedToArray2.default)(_useState,2),containerExcludeExtraSize=_useState2[0],setContainerExcludeExtraSize=_useState2[1],_useState3=(0,_react.useState)([0,0]),_useState4=(0,_slicedToArray2.default)(_useState3,
2),tabContentSize=_useState4[0],setTabContentSize=_useState4[1],_useState5=(0,_react.useState)([0,0]),_useState6=(0,_slicedToArray2.default)(_useState5,2),addSize=_useState6[0],setAddSize=_useState6[1],_useState7=(0,_react.useState)([0,0]),_useState8=(0,_slicedToArray2.default)(_useState7,2),operationSize=_useState8[0],setOperationSize=_useState8[1],_useUpdateState=(0,_useUpdate.useUpdateState)(new Map),_useUpdateState2=(0,_slicedToArray2.default)(_useUpdateState,2),setTabSizes=_useUpdateState2[1],
tabOffsets=(0,_useOffsets.default)(tabs,_useUpdateState2[0],tabContentSize[0]),containerExcludeExtraSizeValue=containerExcludeExtraSize[tabPositionTopOrBottom?0:1],tabContentSizeValue=tabContentSize[tabPositionTopOrBottom?0:1],addSizeValue=addSize[tabPositionTopOrBottom?0:1],operationSizeValue=operationSize[tabPositionTopOrBottom?0:1],needScroll=Math.floor(containerExcludeExtraSizeValue)<Math.floor(tabContentSizeValue+addSizeValue),visibleTabContentValue=needScroll?containerExcludeExtraSizeValue-
operationSizeValue:containerExcludeExtraSizeValue-addSizeValue,operationsHiddenClassName="".concat(prefixCls,"-nav-operations-hidden"),transformMin=0,transformMax=0;tabPositionTopOrBottom?rtl?(transformMin=0,transformMax=Math.max(0,tabContentSizeValue-visibleTabContentValue)):(transformMin=Math.min(0,visibleTabContentValue-tabContentSizeValue),transformMax=0):(transformMin=Math.min(0,visibleTabContentValue-tabContentSizeValue),transformMax=0);var touchMovingRef=(0,_react.useRef)(null),_useState9=
(0,_react.useState)(),_useState10=(0,_slicedToArray2.default)(_useState9,2),lockAnimation=_useState10[0],setLockAnimation=_useState10[1];(0,_useTouchMove.default)(tabsWrapperRef,function(offsetX,offsetY){function doMove(setState,offset){setState(function(value){return alignInRange(value+offset)})}if(!needScroll)return!1;tabPositionTopOrBottom?doMove(setTransformLeft,offsetX):doMove(setTransformTop,offsetY);clearTouchMoving();setLockAnimation(Date.now());return!0});(0,_react.useEffect)(function(){clearTouchMoving();
lockAnimation&&(touchMovingRef.current=setTimeout(function(){setLockAnimation(0)},100));return clearTouchMoving},[lockAnimation]);var _useVisibleRange=(0,_useVisibleRange3.default)(tabOffsets,visibleTabContentValue,tabPositionTopOrBottom?transformLeft:transformTop,tabContentSizeValue,addSizeValue,operationSizeValue,(0,_objectSpread2.default)((0,_objectSpread2.default)({},props),{},{tabs})),_useVisibleRange2=(0,_slicedToArray2.default)(_useVisibleRange,2),visibleStart=_useVisibleRange2[0],visibleEnd=
_useVisibleRange2[1],scrollToTab=(0,_useEvent.default)(function(){var tabOffset=tabOffsets.get(0<arguments.length&&void 0!==arguments[0]?arguments[0]:activeKey)||{width:0,height:0,left:0,right:0,top:0};if(tabPositionTopOrBottom){var newTransform=transformLeft;rtl?tabOffset.right<transformLeft?newTransform=tabOffset.right:tabOffset.right+tabOffset.width>transformLeft+visibleTabContentValue&&(newTransform=tabOffset.right+tabOffset.width-visibleTabContentValue):tabOffset.left<-transformLeft?newTransform=
-tabOffset.left:tabOffset.left+tabOffset.width>-transformLeft+visibleTabContentValue&&(newTransform=-(tabOffset.left+tabOffset.width-visibleTabContentValue));setTransformTop(0);setTransformLeft(alignInRange(newTransform))}else newTransform=transformTop,tabOffset.top<-transformTop?newTransform=-tabOffset.top:tabOffset.top+tabOffset.height>-transformTop+visibleTabContentValue&&(newTransform=-(tabOffset.top+tabOffset.height-visibleTabContentValue)),setTransformLeft(0),setTransformTop(alignInRange(newTransform))}),
_useState11=(0,_react.useState)(),_useState12=(0,_slicedToArray2.default)(_useState11,2),focusKey=_useState12[0],setFocusKey=_useState12[1],_useState13=(0,_react.useState)(!1),_useState14=(0,_slicedToArray2.default)(_useState13,2),isMouse=_useState14[0],setIsMouse=_useState14[1],enabledTabs=tabs.filter(function(tab){return!tab.disabled}).map(function(tab){return tab.key}),onOffset=function(offset){var currentIndex=enabledTabs.indexOf(focusKey||activeKey),len=enabledTabs.length;setFocusKey(enabledTabs[(currentIndex+
offset+len)%len])},handleKeyDown=function(e){var isRTL=rtl&&tabPositionTopOrBottom,firstEnabledTab=enabledTabs[0],lastEnabledTab=enabledTabs[enabledTabs.length-1];switch(e.code){case "ArrowLeft":tabPositionTopOrBottom&&onOffset(isRTL?1:-1);break;case "ArrowRight":tabPositionTopOrBottom&&onOffset(isRTL?-1:1);break;case "ArrowUp":e.preventDefault();tabPositionTopOrBottom||onOffset(-1);break;case "ArrowDown":e.preventDefault();tabPositionTopOrBottom||onOffset(1);break;case "Home":e.preventDefault();
setFocusKey(firstEnabledTab);break;case "End":e.preventDefault();setFocusKey(lastEnabledTab);break;case "Enter":case "Space":e.preventDefault();onTabClick(focusKey,e);break;case "Backspace":case "Delete":isRTL=enabledTabs.indexOf(focusKey),firstEnabledTab=tabs.find(function(tab){return tab.key===focusKey}),(0,_util.getRemovable)(null===firstEnabledTab||void 0===firstEnabledTab?void 0:firstEnabledTab.closable,null===firstEnabledTab||void 0===firstEnabledTab?void 0:firstEnabledTab.closeIcon,editable,
null===firstEnabledTab||void 0===firstEnabledTab?void 0:firstEnabledTab.disabled)&&(e.preventDefault(),e.stopPropagation(),editable.onEdit("remove",{key:focusKey,event:e}),isRTL===enabledTabs.length-1?onOffset(-1):onOffset(1))}},tabNodeStyle={};tabPositionTopOrBottom?tabNodeStyle[rtl?"marginRight":"marginLeft"]=tabBarGutter:tabNodeStyle.marginTop=tabBarGutter;var tabNodes=tabs.map(function(tab,i){var key=tab.key;return _react.createElement(_TabNode.default,{id,prefixCls,key,tab,style:0===i?void 0:
tabNodeStyle,closable:tab.closable,editable,active:key===activeKey,focus:key===focusKey,renderWrapper:children,removeAriaLabel:null===locale||void 0===locale?void 0:locale.removeAriaLabel,tabCount:enabledTabs.length,currentPosition:i+1,onClick:function(e){onTabClick(key,e)},onKeyDown:handleKeyDown,onFocus:function(){isMouse||setFocusKey(key);scrollToTab(key);setLockAnimation(Date.now());tabsWrapperRef.current&&(rtl||(tabsWrapperRef.current.scrollLeft=0),tabsWrapperRef.current.scrollTop=0)},onBlur:function(){setFocusKey(void 0)},
onMouseDown:function(){setIsMouse(!0)},onMouseUp:function(){setIsMouse(!1)}})}),updateTabSizes=function(){return setTabSizes(function(){var _tabListRef$current,newSizes=new Map,listRect=null===(_tabListRef$current=tabListRef.current)||void 0===_tabListRef$current?void 0:_tabListRef$current.getBoundingClientRect();tabs.forEach(function(_ref2){var _tabListRef$current2;_ref2=_ref2.key;var btnNode=null===(_tabListRef$current2=tabListRef.current)||void 0===_tabListRef$current2?void 0:_tabListRef$current2.querySelector('[data-node-key\x3d"'.concat((0,_util.genDataNodeKey)(_ref2),
'"]'));if(btnNode){_tabListRef$current2=btnNode.offsetWidth;var offsetHeight=btnNode.offsetHeight,offsetTop=btnNode.offsetTop,offsetLeft=btnNode.offsetLeft,_tab$getBoundingClien=btnNode.getBoundingClientRect();btnNode=_tab$getBoundingClien.width;var height=_tab$getBoundingClien.height,left=_tab$getBoundingClien.left;_tab$getBoundingClien=_tab$getBoundingClien.top;_tabListRef$current2=1>Math.abs(btnNode-_tabListRef$current2)?[btnNode,height,left-listRect.left,_tab$getBoundingClien-listRect.top]:[_tabListRef$current2,
offsetHeight,offsetLeft,offsetTop];_tabListRef$current2=(0,_slicedToArray2.default)(_tabListRef$current2,4);newSizes.set(_ref2,{width:_tabListRef$current2[0],height:_tabListRef$current2[1],left:_tabListRef$current2[2],top:_tabListRef$current2[3]})}});return newSizes})};(0,_react.useEffect)(function(){updateTabSizes()},[tabs.map(function(tab){return tab.key}).join("_")]);var onListHolderResize=(0,_useUpdate.default)(function(){var containerSize=getSize(containerRef),extraLeftSize=getSize(extraLeftRef),
extraRightSize=getSize(extraRightRef);setContainerExcludeExtraSize([containerSize[0]-extraLeftSize[0]-extraRightSize[0],containerSize[1]-extraLeftSize[1]-extraRightSize[1]]);containerSize=getSize(innerAddButtonRef);setAddSize(containerSize);extraLeftSize=getSize(operationsRef);setOperationSize(extraLeftSize);extraLeftSize=getSize(tabListRef);setTabContentSize([extraLeftSize[0]-containerSize[0],extraLeftSize[1]-containerSize[1]]);updateTabSizes()}),startHiddenTabs=tabs.slice(0,visibleStart),endHiddenTabs=
tabs.slice(visibleEnd+1),hiddenTabs=[].concat((0,_toConsumableArray2.default)(startHiddenTabs),(0,_toConsumableArray2.default)(endHiddenTabs)),activeTabOffset=tabOffsets.get(activeKey),indicatorStyle=(0,_useIndicator2.default)({activeTabOffset,horizontal:tabPositionTopOrBottom,indicator,rtl}).style;(0,_react.useEffect)(function(){scrollToTab()},[activeKey,transformMin,transformMax,(0,_util.stringify)(activeTabOffset),(0,_util.stringify)(tabOffsets),tabPositionTopOrBottom]);(0,_react.useEffect)(function(){onListHolderResize()},
[rtl]);var hasDropdown=!!hiddenTabs.length,wrapPrefix="".concat(prefixCls,"-nav-wrap");if(tabPositionTopOrBottom)if(rtl){var pingRight=0<transformLeft;var pingLeft=transformLeft!==transformMax}else pingLeft=0>transformLeft,pingRight=transformLeft!==transformMin;else{var pingTop=0>transformTop;var pingBottom=transformTop!==transformMin}return _react.createElement(_rcResizeObserver.default,{onResize:onListHolderResize},_react.createElement("div",{ref:(0,_ref3.useComposeRef)(ref,containerRef),role:"tablist",
"aria-orientation":tabPositionTopOrBottom?"horizontal":"vertical",className:(0,_classnames.default)("".concat(prefixCls,"-nav"),className),style,onKeyDown:function(){setLockAnimation(Date.now())}},_react.createElement(_ExtraContent.default,{ref:extraLeftRef,position:"left",extra,prefixCls}),_react.createElement(_rcResizeObserver.default,{onResize:onListHolderResize},_react.createElement("div",{className:(0,_classnames.default)(wrapPrefix,(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},
"".concat(wrapPrefix,"-ping-left"),pingLeft),"".concat(wrapPrefix,"-ping-right"),pingRight),"".concat(wrapPrefix,"-ping-top"),pingTop),"".concat(wrapPrefix,"-ping-bottom"),pingBottom)),ref:tabsWrapperRef},_react.createElement(_rcResizeObserver.default,{onResize:onListHolderResize},_react.createElement("div",{ref:tabListRef,className:"".concat(prefixCls,"-nav-list"),style:{transform:"translate(".concat(transformLeft,"px, ").concat(transformTop,"px)"),transition:lockAnimation?"none":void 0}},tabNodes,
_react.createElement(_AddButton.default,{ref:innerAddButtonRef,prefixCls,locale,editable,style:(0,_objectSpread2.default)((0,_objectSpread2.default)({},0===tabNodes.length?void 0:tabNodeStyle),{},{visibility:hasDropdown?"hidden":null})}),_react.createElement("div",{className:(0,_classnames.default)("".concat(prefixCls,"-ink-bar"),(0,_defineProperty2.default)({},"".concat(prefixCls,"-ink-bar-animated"),animated.inkBar)),style:indicatorStyle}))))),_react.createElement(_OperationNode.default,(0,_extends2.default)({},
props,{removeAriaLabel:null===locale||void 0===locale?void 0:locale.removeAriaLabel,ref:operationsRef,prefixCls,tabs:hiddenTabs,className:!hasDropdown&&operationsHiddenClassName,tabMoving:!!lockAnimation})),_react.createElement(_ExtraContent.default,{ref:extraRightRef,position:"right",extra,prefixCls})))});exports.default=require}
//# sourceMappingURL=module$node_modules$rc_tabs$lib$TabNavList$index.js.map
