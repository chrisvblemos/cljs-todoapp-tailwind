{
"version":3,
"file":"module$node_modules$rc_image$lib$hooks$usePreviewItems.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/rc-image/lib/hooks/usePreviewItems.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_image$lib$hooks$usePreviewItems\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = usePreviewItems;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\nvar _objectSpread3 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _common = require(\"../common\");\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\n/**\n * Merge props provided `items` or context collected images\n */\nfunction usePreviewItems(items) {\n  // Context collection image data\n  var _React$useState = React.useState({}),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    images = _React$useState2[0],\n    setImages = _React$useState2[1];\n  var registerImage = React.useCallback(function (id, data) {\n    setImages(function (imgs) {\n      return (0, _objectSpread3.default)((0, _objectSpread3.default)({}, imgs), {}, (0, _defineProperty2.default)({}, id, data));\n    });\n    return function () {\n      setImages(function (imgs) {\n        var cloneImgs = (0, _objectSpread3.default)({}, imgs);\n        delete cloneImgs[id];\n        return cloneImgs;\n      });\n    };\n  }, []);\n\n  // items\n  var mergedItems = React.useMemo(function () {\n    // use `items` first\n    if (items) {\n      return items.map(function (item) {\n        if (typeof item === 'string') {\n          return {\n            data: {\n              src: item\n            }\n          };\n        }\n        var data = {};\n        Object.keys(item).forEach(function (key) {\n          if (['src'].concat((0, _toConsumableArray2.default)(_common.COMMON_PROPS)).includes(key)) {\n            data[key] = item[key];\n          }\n        });\n        return {\n          data: data\n        };\n      });\n    }\n\n    // use registered images secondly\n    return Object.keys(images).reduce(function (total, id) {\n      var _images$id = images[id],\n        canPreview = _images$id.canPreview,\n        data = _images$id.data;\n      if (canPreview) {\n        total.push({\n          data: data,\n          id: id\n        });\n      }\n      return total;\n    }, []);\n  }, [items, images]);\n  return [mergedItems, registerImage, !!items];\n}\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","e","WeakMap","r","t","_interopRequireDefault","_typeof","Object","defineProperty","value","default","usePreviewItems","items","_React$useState","React","useState","_React$useState2","_slicedToArray2","images","setImages","registerImage","useCallback","id","data","imgs","_objectSpread3","_defineProperty2","cloneImgs","useMemo","mergedItems","map","item","src","keys","forEach","key","concat","_toConsumableArray2","_common","COMMON_PROPS","includes","reduce","total","_images$id","canPreview","push","_interopRequireWildcard","__esModule","has","get","n","__proto__","a","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set"]
}
