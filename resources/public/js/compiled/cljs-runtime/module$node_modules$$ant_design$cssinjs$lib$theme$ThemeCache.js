shadow$provide.module$node_modules$$ant_design$cssinjs$lib$theme$ThemeCache=function(global,require,module,exports){function sameDerivativeOption(left,right){if(left.length!==right.length)return!1;for(var i=0;i<left.length;i++)if(left[i]!==right[i])return!1;return!0}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;exports.sameDerivativeOption=sameDerivativeOption;var _slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),
_classCallCheck2=global(require("module$node_modules$$babel$runtime$helpers$classCallCheck")),_createClass2=global(require("module$node_modules$$babel$runtime$helpers$createClass")),_defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty"));require=exports.default=function(){function ThemeCache(){(0,_classCallCheck2.default)(this,ThemeCache);(0,_defineProperty2.default)(this,"cache",void 0);(0,_defineProperty2.default)(this,"keys",void 0);(0,_defineProperty2.default)(this,
"cacheCallTimes",void 0);this.cache=new Map;this.keys=[];this.cacheCallTimes=0}(0,_createClass2.default)(ThemeCache,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(derivativeOption){var _cache2,_cache3,updateCallTimes=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,cache={map:this.cache};derivativeOption.forEach(function(derivative){if(cache){var _cache;cache=null===(_cache=cache)||void 0===_cache||null===(_cache=_cache.map)||void 0===_cache?void 0:
_cache.get(derivative)}else cache=void 0});null!==(_cache2=cache)&&void 0!==_cache2&&_cache2.value&&updateCallTimes&&(cache.value[1]=this.cacheCallTimes++);return null===(_cache3=cache)||void 0===_cache3?void 0:_cache3.value}},{key:"get",value:function(derivativeOption){var _this$internalGet;return null===(_this$internalGet=this.internalGet(derivativeOption,!0))||void 0===_this$internalGet?void 0:_this$internalGet[0]}},{key:"has",value:function(derivativeOption){return!!this.internalGet(derivativeOption)}},
{key:"set",value:function(derivativeOption,value){var _this=this;if(!this.has(derivativeOption)){if(this.size()+1>ThemeCache.MAX_CACHE_SIZE+ThemeCache.MAX_CACHE_OFFSET){var _this$keys$reduce=this.keys.reduce(function(result,key){var callTimes=(0,_slicedToArray2.default)(result,2)[1];return _this.internalGet(key)[1]<callTimes?[key,_this.internalGet(key)[1]]:result},[this.keys[0],this.cacheCallTimes]);_this$keys$reduce=(0,_slicedToArray2.default)(_this$keys$reduce,1)[0];this.delete(_this$keys$reduce)}this.keys.push(derivativeOption)}var cache=
this.cache;derivativeOption.forEach(function(derivative,index){index===derivativeOption.length-1?cache.set(derivative,{value:[value,_this.cacheCallTimes++]}):(index=cache.get(derivative),index?index.map||(index.map=new Map):cache.set(derivative,{map:new Map}),cache=cache.get(derivative).map)})}},{key:"deleteByPath",value:function(currentCache,derivatives){var cache=currentCache.get(derivatives[0]);if(1===derivatives.length){var _cache$value;cache.map?currentCache.set(derivatives[0],{map:cache.map}):
currentCache.delete(derivatives[0]);return null===(_cache$value=cache.value)||void 0===_cache$value?void 0:_cache$value[0]}_cache$value=this.deleteByPath(cache.map,derivatives.slice(1));cache.map&&0!==cache.map.size||cache.value||currentCache.delete(derivatives[0]);return _cache$value}},{key:"delete",value:function(derivativeOption){if(this.has(derivativeOption))return this.keys=this.keys.filter(function(item){return!sameDerivativeOption(item,derivativeOption)}),this.deleteByPath(this.cache,derivativeOption)}}]);
return ThemeCache}();(0,_defineProperty2.default)(require,"MAX_CACHE_SIZE",20);(0,_defineProperty2.default)(require,"MAX_CACHE_OFFSET",5)}
//# sourceMappingURL=module$node_modules$$ant_design$cssinjs$lib$theme$ThemeCache.js.map
