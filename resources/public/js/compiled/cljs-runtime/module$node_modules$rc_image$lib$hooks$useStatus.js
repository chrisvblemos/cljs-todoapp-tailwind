shadow$provide.module$node_modules$rc_image$lib$hooks$useStatus=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(_ref){var src=_ref.src,isCustomPlaceholder=_ref.isCustomPlaceholder;_ref=_ref.fallback;var _useState=(0,_react.useState)(isCustomPlaceholder?"loading":"normal");_useState=(0,_slicedToArray2.default)(_useState,2);var status=_useState[0],
setStatus=_useState[1],isLoaded=(0,_react.useRef)(!1),isError="error"===status;(0,_react.useEffect)(function(){var isCurrentSrc=!0;(0,_util.isImageValid)(src).then(function(isValid){!isValid&&isCurrentSrc&&setStatus("error")});return function(){isCurrentSrc=!1}},[src]);(0,_react.useEffect)(function(){isCustomPlaceholder&&!isLoaded.current?setStatus("loading"):isError&&setStatus("normal")},[src]);var onLoad=function(){setStatus("normal")};return[function(img){isLoaded.current=!1;"loading"===status&&
null!==img&&void 0!==img&&img.complete&&(img.naturalWidth||img.naturalHeight)&&(isLoaded.current=!0,onLoad())},isError&&_ref?{src:_ref}:{onLoad,src},status]};var _slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_react=require("module$node_modules$react$index"),_util=require("module$node_modules$rc_image$lib$util")}
//# sourceMappingURL=module$node_modules$rc_image$lib$hooks$useStatus.js.map
