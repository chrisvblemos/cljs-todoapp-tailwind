shadow$provide.module$node_modules$rc_select$lib$Select=function(global,require,module,exports){function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof3(e)&&"function"!=typeof e)return{default:e};if((r=_getRequireWildcardCache(r))&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&
Object.getOwnPropertyDescriptor,u;for(u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}var _interopRequireDefault=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault"),_typeof3=require("module$node_modules$$babel$runtime$helpers$typeof");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _extends2=
_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$extends")),_toConsumableArray2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_defineProperty2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_objectSpread2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_slicedToArray2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),
_objectWithoutProperties2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),_typeof2=_interopRequireDefault(require("module$node_modules$$babel$runtime$helpers$typeof")),_useMergedState5=_interopRequireDefault(require("module$node_modules$rc_util$lib$hooks$useMergedState")),_warning=_interopRequireDefault(require("module$node_modules$rc_util$lib$warning")),React=_interopRequireWildcard(require("module$node_modules$react$index")),_BaseSelect=_interopRequireWildcard(require("module$node_modules$rc_select$lib$BaseSelect$index"));
global=_interopRequireDefault(require("module$node_modules$rc_select$lib$OptGroup"));module=_interopRequireDefault(require("module$node_modules$rc_select$lib$Option"));var _OptionList=_interopRequireDefault(require("module$node_modules$rc_select$lib$OptionList")),_SelectContext=_interopRequireDefault(require("module$node_modules$rc_select$lib$SelectContext")),_useCache3=_interopRequireDefault(require("module$node_modules$rc_select$lib$hooks$useCache")),_useFilterOptions=_interopRequireDefault(require("module$node_modules$rc_select$lib$hooks$useFilterOptions")),
_useId=_interopRequireDefault(require("module$node_modules$rc_select$lib$hooks$useId")),_useOptions=_interopRequireDefault(require("module$node_modules$rc_select$lib$hooks$useOptions")),_useRefFunc=_interopRequireDefault(require("module$node_modules$rc_select$lib$hooks$useRefFunc")),_commonUtil=require("module$node_modules$rc_select$lib$utils$commonUtil"),_valueUtil=require("module$node_modules$rc_select$lib$utils$valueUtil"),_warningPropsUtil=_interopRequireWildcard(require("module$node_modules$rc_select$lib$utils$warningPropsUtil")),
_excluded="id mode prefixCls backfill fieldNames inputValue searchValue onSearch autoClearSearchValue onSelect onDeselect dropdownMatchSelectWidth filterOption filterSort optionFilterProp optionLabelProp options optionRender children defaultActiveFirstOption menuItemSelectedIcon virtual direction listHeight listItemHeight labelRender value defaultValue labelInValue onChange maxCount".split(" "),OMIT_DOM_PROPS=["inputValue"];require=React.forwardRef(function(props,ref){var id=props.id,mode=props.mode,
_props$prefixCls=props.prefixCls;_props$prefixCls=void 0===_props$prefixCls?"rc-select":_props$prefixCls;var backfill=props.backfill,fieldNames=props.fieldNames,inputValue=props.inputValue,searchValue=props.searchValue,onSearch=props.onSearch,_props$autoClearSearc=props.autoClearSearchValue,autoClearSearchValue=void 0===_props$autoClearSearc?!0:_props$autoClearSearc,onSelect=props.onSelect,onDeselect=props.onDeselect;_props$autoClearSearc=props.dropdownMatchSelectWidth;var dropdownMatchSelectWidth=
void 0===_props$autoClearSearc?!0:_props$autoClearSearc,filterOption=props.filterOption,filterSort=props.filterSort,optionFilterProp=props.optionFilterProp,optionLabelProp=props.optionLabelProp,options=props.options,optionRender=props.optionRender,children=props.children;_props$autoClearSearc=props.defaultActiveFirstOption;var menuItemSelectedIcon=props.menuItemSelectedIcon,virtual=props.virtual,direction=props.direction,_props$listHeight=props.listHeight,listHeight=void 0===_props$listHeight?200:
_props$listHeight;_props$listHeight=props.listItemHeight;var listItemHeight=void 0===_props$listHeight?20:_props$listHeight,labelRender=props.labelRender,value=props.value,defaultValue=props.defaultValue,labelInValue=props.labelInValue,onChange=props.onChange,maxCount=props.maxCount;_props$listHeight=(0,_objectWithoutProperties2.default)(props,_excluded);id=(0,_useId.default)(id);var multiple=(0,_BaseSelect.isMultiple)(mode),childrenAsData=!(options||!children),mergedFilterOption=React.useMemo(function(){return void 0===
filterOption&&"combobox"===mode?!1:filterOption},[filterOption,mode]),mergedFieldNames=React.useMemo(function(){return(0,_valueUtil.fillFieldNames)(fieldNames,childrenAsData)},[JSON.stringify(fieldNames),childrenAsData]);inputValue=(0,_useMergedState5.default)("",{value:void 0!==searchValue?searchValue:inputValue,postState:function(search){return search||""}});inputValue=(0,_slicedToArray2.default)(inputValue,2);var mergedSearchValue=inputValue[0],setSearchValue=inputValue[1],parsedOptions=(0,_useOptions.default)(options,
children,mergedFieldNames,optionFilterProp,optionLabelProp),valueOptions=parsedOptions.valueOptions,labelOptions=parsedOptions.labelOptions,mergedOptions=parsedOptions.options,convert2LabelValues=React.useCallback(function(draftValues){return(0,_commonUtil.toArray)(draftValues).map(function(val){if(val&&"object"===(0,_typeof2.default)(val)){var _val$value;var rawKey=val.key;var rawLabel=val.label;val=null!==(_val$value=val.value)&&void 0!==_val$value?_val$value:rawKey}if(_val$value=valueOptions.get(val)){var _option$key;
void 0===rawLabel&&(rawLabel=null===_val$value||void 0===_val$value?void 0:_val$value[optionLabelProp||mergedFieldNames.label]);void 0===rawKey&&(rawKey=null!==(_option$key=null===_val$value||void 0===_val$value?void 0:_val$value.key)&&void 0!==_option$key?_option$key:val);var rawDisabled=null===_val$value||void 0===_val$value?void 0:_val$value.disabled;var rawTitle=null===_val$value||void 0===_val$value?void 0:_val$value.title;optionLabelProp||(_option$key=null===_val$value||void 0===_val$value?
void 0:_val$value[mergedFieldNames.label],void 0===_option$key||React.isValidElement(_option$key)||React.isValidElement(rawLabel)||_option$key===rawLabel||(0,_warning.default)(!1,"`label` of `value` is not same as `label` in Select options."))}return{label:rawLabel,value:val,key:rawKey,disabled:rawDisabled,title:rawTitle}})},[mergedFieldNames,optionLabelProp,valueOptions]);inputValue=(0,_useMergedState5.default)(defaultValue,{value});inputValue=(0,_slicedToArray2.default)(inputValue,2);var internalValue=
inputValue[0],setInternalValue=inputValue[1];inputValue=React.useMemo(function(){var _values$,values=convert2LabelValues(multiple&&null===internalValue?[]:internalValue);return"combobox"===mode&&(0,_commonUtil.isComboNoValue)(null===(_values$=values[0])||void 0===_values$?void 0:_values$.value)?[]:values},[internalValue,convert2LabelValues,mode,multiple]);inputValue=(0,_useCache3.default)(inputValue,valueOptions);inputValue=(0,_slicedToArray2.default)(inputValue,2);var mergedValues=inputValue[0],
getMixedOption=inputValue[1];inputValue=React.useMemo(function(){if(!mode&&1===mergedValues.length){var firstValue=mergedValues[0];if(null===firstValue.value&&(null===firstValue.label||void 0===firstValue.label))return[]}return mergedValues.map(function(item){var _ref;return(0,_objectSpread2.default)((0,_objectSpread2.default)({},item),{},{label:null!==(_ref="function"===typeof labelRender?labelRender(item):item.label)&&void 0!==_ref?_ref:item.value})})},[mode,mergedValues,labelRender]);var rawValues=
React.useMemo(function(){return new Set(mergedValues.map(function(val){return val.value}))},[mergedValues]);React.useEffect(function(){if("combobox"===mode){var _mergedValues$,strValue=null===(_mergedValues$=mergedValues[0])||void 0===_mergedValues$?void 0:_mergedValues$.value;setSearchValue((0,_commonUtil.hasValue)(strValue)?String(strValue):"")}},[mergedValues]);var createTagOption=(0,_useRefFunc.default)(function(val,label){label=null!==label&&void 0!==label?label:val;return(0,_defineProperty2.default)((0,_defineProperty2.default)({},
mergedFieldNames.value,val),mergedFieldNames.label,label)});searchValue=React.useMemo(function(){if("tags"!==mode)return mergedOptions;var cloneOptions=(0,_toConsumableArray2.default)(mergedOptions);(0,_toConsumableArray2.default)(mergedValues).sort(function(a,b){return a.value<b.value?-1:1}).forEach(function(item){var val=item.value;valueOptions.has(val)||cloneOptions.push(createTagOption(val,item.label))});return cloneOptions},[createTagOption,mergedOptions,valueOptions,mergedValues,mode]);var filteredOptions=
(0,_useFilterOptions.default)(searchValue,mergedFieldNames,mergedSearchValue,mergedFilterOption,optionFilterProp),filledSearchOptions=React.useMemo(function(){return"tags"!==mode||!mergedSearchValue||filteredOptions.some(function(item){return item[optionFilterProp||"value"]===mergedSearchValue})||filteredOptions.some(function(item){return item[mergedFieldNames.value]===mergedSearchValue})?filteredOptions:[createTagOption(mergedSearchValue)].concat((0,_toConsumableArray2.default)(filteredOptions))},
[createTagOption,optionFilterProp,mode,filteredOptions,mergedSearchValue,mergedFieldNames]),sorter=function sorter(inputOptions){return(0,_toConsumableArray2.default)(inputOptions).sort(function(a,b){return filterSort(a,b,{searchValue:mergedSearchValue})}).map(function(item){return Array.isArray(item.options)?(0,_objectSpread2.default)((0,_objectSpread2.default)({},item),{},{options:0<item.options.length?sorter(item.options):item.options}):item})},orderedFilteredOptions=React.useMemo(function(){return filterSort?
sorter(filledSearchOptions):filledSearchOptions},[filledSearchOptions,filterSort,mergedSearchValue]),displayOptions=React.useMemo(function(){return(0,_valueUtil.flattenOptions)(orderedFilteredOptions,{fieldNames:mergedFieldNames,childrenAsData})},[orderedFilteredOptions,mergedFieldNames,childrenAsData]),triggerChange=function(values){var labeledValues=convert2LabelValues(values);setInternalValue(labeledValues);onChange&&(labeledValues.length!==mergedValues.length||labeledValues.some(function(newVal,
index){var _mergedValues$index;return(null===(_mergedValues$index=mergedValues[index])||void 0===_mergedValues$index?void 0:_mergedValues$index.value)!==(null===newVal||void 0===newVal?void 0:newVal.value)}))&&(values=labelInValue?labeledValues:labeledValues.map(function(v){return v.value}),labeledValues=labeledValues.map(function(v){return(0,_valueUtil.injectPropsWithOption)(getMixedOption(v.value))}),onChange(multiple?values:values[0],multiple?labeledValues:labeledValues[0]))};mergedFilterOption=
React.useState(null);searchValue=(0,_slicedToArray2.default)(mergedFilterOption,2);mergedFilterOption=searchValue[0];var setActiveValue=searchValue[1];searchValue=React.useState(0);options=(0,_slicedToArray2.default)(searchValue,2);searchValue=options[0];var setAccessibilityIndex=options[1],mergedDefaultActiveFirstOption=void 0!==_props$autoClearSearc?_props$autoClearSearc:"combobox"!==mode,onActiveValue=React.useCallback(function(active,index){var _ref3$source=(2<arguments.length&&void 0!==arguments[2]?
arguments[2]:{}).source;_ref3$source=void 0===_ref3$source?"keyboard":_ref3$source;setAccessibilityIndex(index);backfill&&"combobox"===mode&&null!==active&&"keyboard"===_ref3$source&&setActiveValue(String(active))},[backfill,mode]),triggerSelect=function(val,selected,type){var getSelectEnt=function(){var _option$key2,option=getMixedOption(val);return[labelInValue?{label:null===option||void 0===option?void 0:option[mergedFieldNames.label],value:val,key:null!==(_option$key2=null===option||void 0===
option?void 0:option.key)&&void 0!==_option$key2?_option$key2:val}:val,(0,_valueUtil.injectPropsWithOption)(option)]};selected&&onSelect?(selected=getSelectEnt(),selected=(0,_slicedToArray2.default)(selected,2),onSelect(selected[0],selected[1])):!selected&&onDeselect&&"clear"!==type&&(selected=getSelectEnt(),selected=(0,_slicedToArray2.default)(selected,2),onDeselect(selected[0],selected[1]))},onInternalSelect=(0,_useRefFunc.default)(function(val,info){var mergedSelect=multiple?info.selected:!0;info=
mergedSelect?multiple?[].concat((0,_toConsumableArray2.default)(mergedValues),[val]):[val]:mergedValues.filter(function(v){return v.value!==val});triggerChange(info);triggerSelect(val,mergedSelect);if("combobox"===mode)setActiveValue("");else if(!_BaseSelect.isMultiple||autoClearSearchValue)setSearchValue(""),setActiveValue("")});_props$autoClearSearc=React.useMemo(function(){var realVirtual=!1!==virtual&&!1!==dropdownMatchSelectWidth;return(0,_objectSpread2.default)((0,_objectSpread2.default)({},
parsedOptions),{},{flattenOptions:displayOptions,onActiveValue,defaultActiveFirstOption:mergedDefaultActiveFirstOption,onSelect:onInternalSelect,menuItemSelectedIcon,rawValues,fieldNames:mergedFieldNames,virtual:realVirtual,direction,listHeight,listItemHeight,childrenAsData,maxCount,optionRender})},[maxCount,parsedOptions,displayOptions,onActiveValue,mergedDefaultActiveFirstOption,onInternalSelect,menuItemSelectedIcon,rawValues,mergedFieldNames,virtual,dropdownMatchSelectWidth,direction,listHeight,
listItemHeight,childrenAsData,optionRender]);(0,_warningPropsUtil.default)(props);(0,_warningPropsUtil.warningNullOptions)(mergedOptions,mergedFieldNames);return React.createElement(_SelectContext.default.Provider,{value:_props$autoClearSearc},React.createElement(_BaseSelect.default,(0,_extends2.default)({},_props$listHeight,{id,prefixCls:_props$prefixCls,ref,omitDomProps:OMIT_DOM_PROPS,mode,displayValues:inputValue,onDisplayValuesChange:function(nextValues,info){triggerChange(nextValues);var type=
info.type;nextValues=info.values;"remove"!==type&&"clear"!==type||nextValues.forEach(function(item){triggerSelect(item.value,!1,type)})},direction,searchValue:mergedSearchValue,onSearch:function(searchText,info){setSearchValue(searchText);setActiveValue(null);if("submit"===info.source){if(searchText=(searchText||"").trim())info=Array.from(new Set([].concat((0,_toConsumableArray2.default)(rawValues),[searchText]))),triggerChange(info),triggerSelect(searchText,!0),setSearchValue("")}else"blur"!==info.source&&
("combobox"===mode&&triggerChange(searchText),null===onSearch||void 0===onSearch||onSearch(searchText))},autoClearSearchValue,onSearchSplit:function(words){var patchValues=words;"tags"!==mode&&(patchValues=words.map(function(word){word=labelOptions.get(word);return null===word||void 0===word?void 0:word.value}).filter(function(val){return void 0!==val}));words=Array.from(new Set([].concat((0,_toConsumableArray2.default)(rawValues),(0,_toConsumableArray2.default)(patchValues))));triggerChange(words);
words.forEach(function(newRawValue){triggerSelect(newRawValue,!0)})},dropdownMatchSelectWidth,OptionList:_OptionList.default,emptyOptions:!displayOptions.length,activeValue:mergedFilterOption,activeDescendantId:"".concat(id,"_list_").concat(searchValue)})))});require.displayName="Select";require.Option=module.default;require.OptGroup=global.default;exports.default=require}
//# sourceMappingURL=module$node_modules$rc_select$lib$Select.js.map
