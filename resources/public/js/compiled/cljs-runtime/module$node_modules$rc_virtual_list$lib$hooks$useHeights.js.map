{
"version":3,
"file":"module$node_modules$rc_virtual_list$lib$hooks$useHeights.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/rc-virtual-list/lib/hooks/useHeights.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_virtual_list$lib$hooks$useHeights\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useHeights;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _findDOMNode = _interopRequireDefault(require(\"rc-util/lib/Dom/findDOMNode\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar React = _react;\nvar _CacheMap = _interopRequireDefault(require(\"../utils/CacheMap\"));\nfunction parseNumber(value) {\n  var num = parseFloat(value);\n  return isNaN(num) ? 0 : num;\n}\nfunction useHeights(getKey, onItemAdd, onItemRemove) {\n  var _React$useState = React.useState(0),\n    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),\n    updatedMark = _React$useState2[0],\n    setUpdatedMark = _React$useState2[1];\n  var instanceRef = (0, _react.useRef)(new Map());\n  var heightsRef = (0, _react.useRef)(new _CacheMap.default());\n  var promiseIdRef = (0, _react.useRef)(0);\n  function cancelRaf() {\n    promiseIdRef.current += 1;\n  }\n  function collectHeight() {\n    var sync = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    cancelRaf();\n    var doCollect = function doCollect() {\n      var changed = false;\n      instanceRef.current.forEach(function (element, key) {\n        if (element && element.offsetParent) {\n          var htmlElement = (0, _findDOMNode.default)(element);\n          var offsetHeight = htmlElement.offsetHeight;\n          var _getComputedStyle = getComputedStyle(htmlElement),\n            marginTop = _getComputedStyle.marginTop,\n            marginBottom = _getComputedStyle.marginBottom;\n          var marginTopNum = parseNumber(marginTop);\n          var marginBottomNum = parseNumber(marginBottom);\n          var totalHeight = offsetHeight + marginTopNum + marginBottomNum;\n          if (heightsRef.current.get(key) !== totalHeight) {\n            heightsRef.current.set(key, totalHeight);\n            changed = true;\n          }\n        }\n      });\n\n      // Always trigger update mark to tell parent that should re-calculate heights when resized\n      if (changed) {\n        setUpdatedMark(function (c) {\n          return c + 1;\n        });\n      }\n    };\n    if (sync) {\n      doCollect();\n    } else {\n      promiseIdRef.current += 1;\n      var id = promiseIdRef.current;\n      Promise.resolve().then(function () {\n        if (id === promiseIdRef.current) {\n          doCollect();\n        }\n      });\n    }\n  }\n  function setInstanceRef(item, instance) {\n    var key = getKey(item);\n    var origin = instanceRef.current.get(key);\n    if (instance) {\n      instanceRef.current.set(key, instance);\n      collectHeight();\n    } else {\n      instanceRef.current.delete(key);\n    }\n\n    // Instance changed\n    if (!origin !== !instance) {\n      if (instance) {\n        onItemAdd === null || onItemAdd === void 0 || onItemAdd(item);\n      } else {\n        onItemRemove === null || onItemRemove === void 0 || onItemRemove(item);\n      }\n    }\n  }\n  (0, _react.useEffect)(function () {\n    return cancelRaf;\n  }, []);\n  return [setInstanceRef, collectHeight, heightsRef.current, updatedMark];\n}\n};"],
"names":["shadow$provide","global","require","module","exports","parseNumber","value","num","parseFloat","isNaN","_interopRequireWildcard","default","_interopRequireDefault","Object","defineProperty","useHeights","getKey","onItemAdd","onItemRemove","cancelRaf","promiseIdRef","current","collectHeight","sync","arguments","length","undefined","doCollect","changed","instanceRef","forEach","element","key","offsetParent","htmlElement","_findDOMNode","offsetHeight","_getComputedStyle","getComputedStyle","marginBottom","marginTopNum","marginTop","marginBottomNum","totalHeight","heightsRef","get","set","setUpdatedMark","c","id","Promise","resolve","then","_React$useState","React","useState","_React$useState2","_slicedToArray2","updatedMark","_react","useRef","Map","_CacheMap","useEffect","setInstanceRef","item","instance","origin","delete"]
}
