shadow$provide.module$node_modules$rc_cascader$lib$OptionList$useKeyboard=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard").default;module=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _toConsumableArray2=module(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_slicedToArray2=module(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),
_KeyCode=module(require("module$node_modules$rc_util$lib$KeyCode")),React=global(require("module$node_modules$react$index")),_useSearchOptions=require("module$node_modules$rc_cascader$lib$hooks$useSearchOptions"),_commonUtil=require("module$node_modules$rc_cascader$lib$utils$commonUtil");exports.default=function(ref,options,fieldNames,activeValueCells,setActiveValueCells,onKeyBoardSelect,contextProps){var searchValue=contextProps.searchValue,toggleOpen=contextProps.toggleOpen,open=contextProps.open,
rtl="rtl"===contextProps.direction;contextProps=React.useMemo(function(){for(var activeIndex=-1,currentOptions=options,mergedActiveIndexes=[],mergedActiveValueCells=[],len=activeValueCells.length,pathKeys=(0,_commonUtil.getFullPathKeys)(options,fieldNames),_loop=function(i){var nextActiveIndex=currentOptions.findIndex(function(option,index){return(pathKeys[index]?(0,_commonUtil.toPathKey)(pathKeys[index]):option[fieldNames.value])===activeValueCells[i]});if(-1===nextActiveIndex)return 1;activeIndex=
nextActiveIndex;mergedActiveIndexes.push(activeIndex);mergedActiveValueCells.push(activeValueCells[i]);currentOptions=currentOptions[activeIndex][fieldNames.children]},i=0;i<len&&currentOptions&&!_loop(i);i+=1);len=options;for(_loop=0;_loop<mergedActiveIndexes.length-1;_loop+=1)len=len[mergedActiveIndexes[_loop]][fieldNames.children];return[mergedActiveValueCells,activeIndex,len,pathKeys]},[activeValueCells,fieldNames,options]);contextProps=(0,_slicedToArray2.default)(contextProps,4);var validActiveValueCells=
contextProps[0],lastActiveIndex=contextProps[1],lastActiveOptions=contextProps[2],fullPathKeys=contextProps[3],offsetActiveOption=function(offset){var len=lastActiveOptions.length,currentIndex=lastActiveIndex;-1===currentIndex&&0>offset&&(currentIndex=len);for(var i=0;i<len;i+=1){currentIndex=(currentIndex+offset+len)%len;var _option=lastActiveOptions[currentIndex];if(_option&&!_option.disabled){offset=validActiveValueCells.slice(0,-1).concat(fullPathKeys[currentIndex]?(0,_commonUtil.toPathKey)(fullPathKeys[currentIndex]):
_option[fieldNames.value]);setActiveValueCells(offset);break}}},prevColumn=function(){if(1<validActiveValueCells.length){var nextActiveCells=validActiveValueCells.slice(0,-1);setActiveValueCells(nextActiveCells)}else toggleOpen(!1)},nextColumn=function(){var _lastActiveOptions$la,nextOption=((null===(_lastActiveOptions$la=lastActiveOptions[lastActiveIndex])||void 0===_lastActiveOptions$la?void 0:_lastActiveOptions$la[fieldNames.children])||[]).find(function(option){return!option.disabled});nextOption&&
(_lastActiveOptions$la=[].concat((0,_toConsumableArray2.default)(validActiveValueCells),[nextOption[fieldNames.value]]),setActiveValueCells(_lastActiveOptions$la))};React.useImperativeHandle(ref,function(){return{onKeyDown:function(event){var which=event.which;switch(which){case _KeyCode.default.UP:case _KeyCode.default.DOWN:event=0;which===_KeyCode.default.UP?event=-1:which===_KeyCode.default.DOWN&&(event=1);0!==event&&offsetActiveOption(event);break;case _KeyCode.default.LEFT:if(searchValue)break;
rtl?nextColumn():prevColumn();break;case _KeyCode.default.RIGHT:if(searchValue)break;rtl?prevColumn():nextColumn();break;case _KeyCode.default.BACKSPACE:searchValue||prevColumn();break;case _KeyCode.default.ENTER:validActiveValueCells.length&&(which=lastActiveOptions[lastActiveIndex],which=(null===which||void 0===which?void 0:which[_useSearchOptions.SEARCH_MARK])||[],which.length?onKeyBoardSelect(which.map(function(opt){return opt[fieldNames.value]}),which[which.length-1]):onKeyBoardSelect(validActiveValueCells,
lastActiveOptions[lastActiveIndex]));break;case _KeyCode.default.ESC:toggleOpen(!1),open&&event.stopPropagation()}},onKeyUp:function(){}}})}}
//# sourceMappingURL=module$node_modules$rc_cascader$lib$OptionList$useKeyboard.js.map
