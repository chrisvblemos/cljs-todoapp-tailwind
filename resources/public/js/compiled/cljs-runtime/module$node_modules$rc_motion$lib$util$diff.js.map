{
"version":3,
"file":"module$node_modules$rc_motion$lib$util$diff.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/rc-motion/lib/util/diff.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_motion$lib$util$diff\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.STATUS_REMOVED = exports.STATUS_REMOVE = exports.STATUS_KEEP = exports.STATUS_ADD = void 0;\nexports.diffKeys = diffKeys;\nexports.parseKeys = parseKeys;\nexports.wrapKeyToObject = wrapKeyToObject;\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nvar STATUS_ADD = exports.STATUS_ADD = 'add';\nvar STATUS_KEEP = exports.STATUS_KEEP = 'keep';\nvar STATUS_REMOVE = exports.STATUS_REMOVE = 'remove';\nvar STATUS_REMOVED = exports.STATUS_REMOVED = 'removed';\nfunction wrapKeyToObject(key) {\n  var keyObj;\n  if (key && (0, _typeof2.default)(key) === 'object' && 'key' in key) {\n    keyObj = key;\n  } else {\n    keyObj = {\n      key: key\n    };\n  }\n  return (0, _objectSpread2.default)((0, _objectSpread2.default)({}, keyObj), {}, {\n    key: String(keyObj.key)\n  });\n}\nfunction parseKeys() {\n  var keys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return keys.map(wrapKeyToObject);\n}\nfunction diffKeys() {\n  var prevKeys = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var currentKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var list = [];\n  var currentIndex = 0;\n  var currentLen = currentKeys.length;\n  var prevKeyObjects = parseKeys(prevKeys);\n  var currentKeyObjects = parseKeys(currentKeys);\n\n  // Check prev keys to insert or keep\n  prevKeyObjects.forEach(function (keyObj) {\n    var hit = false;\n    for (var i = currentIndex; i < currentLen; i += 1) {\n      var currentKeyObj = currentKeyObjects[i];\n      if (currentKeyObj.key === keyObj.key) {\n        // New added keys should add before current key\n        if (currentIndex < i) {\n          list = list.concat(currentKeyObjects.slice(currentIndex, i).map(function (obj) {\n            return (0, _objectSpread2.default)((0, _objectSpread2.default)({}, obj), {}, {\n              status: STATUS_ADD\n            });\n          }));\n          currentIndex = i;\n        }\n        list.push((0, _objectSpread2.default)((0, _objectSpread2.default)({}, currentKeyObj), {}, {\n          status: STATUS_KEEP\n        }));\n        currentIndex += 1;\n        hit = true;\n        break;\n      }\n    }\n\n    // If not hit, it means key is removed\n    if (!hit) {\n      list.push((0, _objectSpread2.default)((0, _objectSpread2.default)({}, keyObj), {}, {\n        status: STATUS_REMOVE\n      }));\n    }\n  });\n\n  // Add rest to the list\n  if (currentIndex < currentLen) {\n    list = list.concat(currentKeyObjects.slice(currentIndex).map(function (obj) {\n      return (0, _objectSpread2.default)((0, _objectSpread2.default)({}, obj), {}, {\n        status: STATUS_ADD\n      });\n    }));\n  }\n\n  /**\n   * Merge same key when it remove and add again:\n   *    [1 - add, 2 - keep, 1 - remove] -> [1 - keep, 2 - keep]\n   */\n  var keys = {};\n  list.forEach(function (_ref) {\n    var key = _ref.key;\n    keys[key] = (keys[key] || 0) + 1;\n  });\n  var duplicatedKeys = Object.keys(keys).filter(function (key) {\n    return keys[key] > 1;\n  });\n  duplicatedKeys.forEach(function (matchKey) {\n    // Remove `STATUS_REMOVE` node.\n    list = list.filter(function (_ref2) {\n      var key = _ref2.key,\n        status = _ref2.status;\n      return key !== matchKey || status !== STATUS_REMOVE;\n    });\n\n    // Update `STATUS_ADD` to `STATUS_KEEP`\n    list.forEach(function (node) {\n      if (node.key === matchKey) {\n        // eslint-disable-next-line no-param-reassign\n        node.status = STATUS_KEEP;\n      }\n    });\n  });\n  return list;\n}\n};"],
"names":["shadow$provide","global","require","module","exports","wrapKeyToObject","key","keyObj","_typeof2","default","_objectSpread2","String","parseKeys","map","keys","arguments","length","undefined","_interopRequireDefault","Object","defineProperty","value","STATUS_REMOVED","STATUS_REMOVE","STATUS_KEEP","STATUS_ADD","diffKeys","currentKeys","list","currentIndex","currentLen","prevKeyObjects","prevKeys","currentKeyObjects","forEach","hit","i","currentKeyObj","concat","slice","obj","status","push","_ref","filter","duplicatedKeys","matchKey","_ref2","node"]
}
