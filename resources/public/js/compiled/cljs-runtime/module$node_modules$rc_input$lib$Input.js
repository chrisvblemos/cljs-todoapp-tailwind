shadow$provide.module$node_modules$rc_input$lib$Input=function(global,require,module,exports){function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");var _typeof=require("module$node_modules$$babel$runtime$helpers$typeof");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;
var _objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),_defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_toConsumableArray2=global(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_objectWithoutProperties2=global(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),
_classnames=global(require("module$node_modules$classnames$index")),_useMergedState3=global(require("module$node_modules$rc_util$lib$hooks$useMergedState")),_omit=global(require("module$node_modules$rc_util$lib$omit")),_react=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};if((r=_getRequireWildcardCache(r))&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor,u;for(u in e)if("default"!==
u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(require("module$node_modules$react$index")),_BaseInput=global(require("module$node_modules$rc_input$lib$BaseInput")),_useCount=global(require("module$node_modules$rc_input$lib$hooks$useCount")),_commonUtils=require("module$node_modules$rc_input$lib$utils$commonUtils"),_excluded="autoComplete onChange onFocus onBlur onPressEnter onKeyDown onKeyUp prefixCls disabled htmlSize className maxLength suffix showCount count type classes classNames styles onCompositionStart onCompositionEnd".split(" ");
require=(0,_react.forwardRef)(function(props,ref){var autoComplete=props.autoComplete,onChange=props.onChange,onFocus=props.onFocus,onBlur=props.onBlur,onPressEnter=props.onPressEnter,onKeyDown=props.onKeyDown,onKeyUp=props.onKeyUp,_props$prefixCls=props.prefixCls,prefixCls=void 0===_props$prefixCls?"rc-input":_props$prefixCls,disabled=props.disabled,htmlSize=props.htmlSize;_props$prefixCls=props.className;var maxLength=props.maxLength,suffix=props.suffix,showCount=props.showCount,count=props.count,
_props$type=props.type,type=void 0===_props$type?"text":_props$type;_props$type=props.classes;var classNames=props.classNames,styles=props.styles,_onCompositionStart=props.onCompositionStart,onCompositionEnd=props.onCompositionEnd,rest=(0,_objectWithoutProperties2.default)(props,_excluded),_useState=(0,_react.useState)(!1),_useState2=(0,_slicedToArray2.default)(_useState,2);_useState=_useState2[0];var setFocused=_useState2[1],compositionRef=(0,_react.useRef)(!1),keyLockRef=(0,_react.useRef)(!1),inputRef=
(0,_react.useRef)(null),holderRef=(0,_react.useRef)(null),focus=function(option){inputRef.current&&(0,_commonUtils.triggerFocus)(inputRef.current,option)};_useState2=(0,_useMergedState3.default)(props.defaultValue,{value:props.value});_useState2=(0,_slicedToArray2.default)(_useState2,2);var value=_useState2[0],setValue=_useState2[1],formatValue=void 0===value||null===value?"":String(value);_useState2=(0,_react.useState)(null);_useState2=(0,_slicedToArray2.default)(_useState2,2);var selection=_useState2[0],
setSelection=_useState2[1],countConfig=(0,_useCount.default)(count,showCount),mergedMax=countConfig.max||maxLength,valueLength=countConfig.strategy(formatValue);maxLength=!!mergedMax&&valueLength>mergedMax;(0,_react.useImperativeHandle)(ref,function(){var _holderRef$current;return{focus,blur:function(){var _inputRef$current;null===(_inputRef$current=inputRef.current)||void 0===_inputRef$current||_inputRef$current.blur()},setSelectionRange:function(start,end,direction){var _inputRef$current2;null===
(_inputRef$current2=inputRef.current)||void 0===_inputRef$current2||_inputRef$current2.setSelectionRange(start,end,direction)},select:function(){var _inputRef$current3;null===(_inputRef$current3=inputRef.current)||void 0===_inputRef$current3||_inputRef$current3.select()},input:inputRef.current,nativeElement:(null===(_holderRef$current=holderRef.current)||void 0===_holderRef$current?void 0:_holderRef$current.nativeElement)||inputRef.current}});(0,_react.useEffect)(function(){keyLockRef.current&&(keyLockRef.current=
!1);setFocused(function(prev){return prev&&disabled?!1:prev})},[disabled]);var triggerChange=function(e,currentValue,info){var cutValue=currentValue;if(!compositionRef.current&&countConfig.exceedFormatter&&countConfig.max&&countConfig.strategy(currentValue)>countConfig.max){if(cutValue=countConfig.exceedFormatter(currentValue,{max:countConfig.max}),currentValue!==cutValue){var _inputRef$current4,_inputRef$current5;setSelection([(null===(_inputRef$current4=inputRef.current)||void 0===_inputRef$current4?
void 0:_inputRef$current4.selectionStart)||0,(null===(_inputRef$current5=inputRef.current)||void 0===_inputRef$current5?void 0:_inputRef$current5.selectionEnd)||0])}}else if("compositionEnd"===info.source)return;setValue(cutValue);inputRef.current&&(0,_commonUtils.resolveOnChange)(inputRef.current,e,onChange,cutValue)};(0,_react.useEffect)(function(){if(selection){var _inputRef$current6;null===(_inputRef$current6=inputRef.current)||void 0===_inputRef$current6||_inputRef$current6.setSelectionRange.apply(_inputRef$current6,
(0,_toConsumableArray2.default)(selection))}},[selection]);var onInternalChange=function(e){triggerChange(e,e.target.value,{source:"change"})},onInternalCompositionEnd=function(e){compositionRef.current=!1;triggerChange(e,e.currentTarget.value,{source:"compositionEnd"});null===onCompositionEnd||void 0===onCompositionEnd||onCompositionEnd(e)},handleKeyDown=function(e){onPressEnter&&"Enter"===e.key&&!keyLockRef.current&&(keyLockRef.current=!0,onPressEnter(e));null===onKeyDown||void 0===onKeyDown||onKeyDown(e)},
handleKeyUp=function(e){"Enter"===e.key&&(keyLockRef.current=!1);null===onKeyUp||void 0===onKeyUp||onKeyUp(e)},handleFocus=function(e){setFocused(!0);null===onFocus||void 0===onFocus||onFocus(e)},handleBlur=function(e){keyLockRef.current&&(keyLockRef.current=!1);setFocused(!1);null===onBlur||void 0===onBlur||onBlur(e)};ref=maxLength&&"".concat(prefixCls,"-out-of-range");return _react.default.createElement(_BaseInput.default,(0,_extends2.default)({},rest,{prefixCls,className:(0,_classnames.default)(_props$prefixCls,
ref),handleReset:function(e){setValue("");focus();inputRef.current&&(0,_commonUtils.resolveOnChange)(inputRef.current,e,onChange)},value:formatValue,focused:_useState,triggerFocus:focus,suffix:function(){var hasMaxLength=0<Number(mergedMax);return suffix||countConfig.show?(hasMaxLength=countConfig.showFormatter?countConfig.showFormatter({value:formatValue,count:valueLength,maxLength:mergedMax}):"".concat(valueLength).concat(hasMaxLength?" / ".concat(mergedMax):""),_react.default.createElement(_react.default.Fragment,
null,countConfig.show&&_react.default.createElement("span",{className:(0,_classnames.default)("".concat(prefixCls,"-show-count-suffix"),(0,_defineProperty2.default)({},"".concat(prefixCls,"-show-count-has-suffix"),!!suffix),null===classNames||void 0===classNames?void 0:classNames.count),style:(0,_objectSpread2.default)({},null===styles||void 0===styles?void 0:styles.count)},hasMaxLength),suffix)):null}(),disabled,classes:_props$type,classNames,styles}),function(){var otherProps=(0,_omit.default)(props,
"prefixCls onPressEnter addonBefore addonAfter prefix suffix allowClear defaultValue showCount count classes htmlSize styles classNames onClear".split(" "));return _react.default.createElement("input",(0,_extends2.default)({autoComplete},otherProps,{onChange:onInternalChange,onFocus:handleFocus,onBlur:handleBlur,onKeyDown:handleKeyDown,onKeyUp:handleKeyUp,className:(0,_classnames.default)(prefixCls,(0,_defineProperty2.default)({},"".concat(prefixCls,"-disabled"),disabled),null===classNames||void 0===
classNames?void 0:classNames.input),style:null===styles||void 0===styles?void 0:styles.input,ref:inputRef,size:htmlSize,type,onCompositionStart:function(e){compositionRef.current=!0;null===_onCompositionStart||void 0===_onCompositionStart||_onCompositionStart(e)},onCompositionEnd:onInternalCompositionEnd}))}())});exports.default=require}
//# sourceMappingURL=module$node_modules$rc_input$lib$Input.js.map
