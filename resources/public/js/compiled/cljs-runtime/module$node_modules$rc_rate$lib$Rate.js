shadow$provide.module$node_modules$rc_rate$lib$Rate=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),_defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),
_objectWithoutProperties2=global(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),_classnames=global(require("module$node_modules$classnames$index")),_useMergedState5=global(require("module$node_modules$rc_util$lib$hooks$useMergedState")),_KeyCode=global(require("module$node_modules$rc_util$lib$KeyCode")),_pickAttrs=global(require("module$node_modules$rc_util$lib$pickAttrs")),_react=global(require("module$node_modules$react$index")),_Star=global(require("module$node_modules$rc_rate$lib$Star")),
_useRefs3=global(require("module$node_modules$rc_rate$lib$useRefs")),_util=require("module$node_modules$rc_rate$lib$util"),_excluded="prefixCls className defaultValue value count allowHalf allowClear keyboard character characterRender disabled direction tabIndex autoFocus onHoverChange onChange onFocus onBlur onKeyDown onMouseLeave".split(" ");exports.default=_react.default.forwardRef(function(props,ref){var _props$prefixCls=props.prefixCls,prefixCls=void 0===_props$prefixCls?"rc-rate":_props$prefixCls;
_props$prefixCls=props.className;var defaultValue=props.defaultValue,propValue=props.value,_props$count=props.count,count=void 0===_props$count?5:_props$count;_props$count=props.allowHalf;var allowHalf=void 0===_props$count?!1:_props$count;_props$count=props.allowClear;var allowClear=void 0===_props$count?!0:_props$count;_props$count=props.keyboard;var keyboard=void 0===_props$count?!0:_props$count;_props$count=props.character;var character=void 0===_props$count?"â˜…":_props$count,characterRender=props.characterRender,
disabled=props.disabled;_props$count=props.direction;var direction=void 0===_props$count?"ltr":_props$count;_props$count=props.tabIndex;_props$count=void 0===_props$count?0:_props$count;var autoFocus=props.autoFocus,onHoverChange=props.onHoverChange,onChange=props.onChange,onFocus=props.onFocus,onBlur=props.onBlur,onKeyDown=props.onKeyDown,onMouseLeave=props.onMouseLeave;props=(0,_objectWithoutProperties2.default)(props,_excluded);var _useRefs=(0,_useRefs3.default)();_useRefs=(0,_slicedToArray2.default)(_useRefs,
2);var getStarRef=_useRefs[0],setStarRef=_useRefs[1],rateRef=_react.default.useRef(null),triggerFocus=function(){if(!disabled){var _rateRef$current;null===(_rateRef$current=rateRef.current)||void 0===_rateRef$current||_rateRef$current.focus()}};_react.default.useImperativeHandle(ref,function(){return{focus:triggerFocus,blur:function(){if(!disabled){var _rateRef$current2;null===(_rateRef$current2=rateRef.current)||void 0===_rateRef$current2||_rateRef$current2.blur()}}}});ref=(0,_useMergedState5.default)(defaultValue||
0,{value:propValue});ref=(0,_slicedToArray2.default)(ref,2);var value=ref[0],setValue=ref[1];ref=(0,_useMergedState5.default)(null);ref=(0,_slicedToArray2.default)(ref,2);var cleanedValue=ref[0],setCleanedValue=ref[1],getStarValue=function(index,x){var reverse="rtl"===direction,starValue=index+1;if(allowHalf){var starEle=getStarRef(index);index=(0,_util.getOffsetLeft)(starEle);starEle=starEle.clientWidth;reverse&&x-index>starEle/2?starValue-=.5:!reverse&&x-index<starEle/2&&(starValue-=.5)}return starValue},
changeValue=function(nextValue){setValue(nextValue);null===onChange||void 0===onChange||onChange(nextValue)};ref=_react.default.useState(!1);ref=(0,_slicedToArray2.default)(ref,2);var focused=ref[0],setFocused=ref[1];ref=function(){setFocused(!0);null===onFocus||void 0===onFocus||onFocus()};defaultValue=function(){setFocused(!1);null===onBlur||void 0===onBlur||onBlur()};propValue=_react.default.useState(null);propValue=(0,_slicedToArray2.default)(propValue,2);var hoverValue=propValue[0],setHoverValue=
propValue[1],onHover=function(event,index){event=getStarValue(index,event.pageX);event!==cleanedValue&&(setHoverValue(event),setCleanedValue(null));null===onHoverChange||void 0===onHoverChange||onHoverChange(event)},onMouseLeaveCallback=function(event){disabled||(setHoverValue(null),setCleanedValue(null),null===onHoverChange||void 0===onHoverChange||onHoverChange(void 0));event&&(null===onMouseLeave||void 0===onMouseLeave||onMouseLeave(event))},onClick=function(event,index){event=getStarValue(index,
event.pageX);index=!1;allowClear&&(index=event===value);onMouseLeaveCallback();changeValue(index?0:event);setCleanedValue(index?event:null)};propValue=function(event){var keyCode=event.keyCode,reverse="rtl"===direction,step=allowHalf?.5:1;keyboard&&(keyCode===_KeyCode.default.RIGHT&&value<count&&!reverse?(changeValue(value+step),event.preventDefault()):keyCode===_KeyCode.default.LEFT&&0<value&&!reverse?(changeValue(value-step),event.preventDefault()):keyCode===_KeyCode.default.RIGHT&&0<value&&reverse?
(changeValue(value-step),event.preventDefault()):keyCode===_KeyCode.default.LEFT&&value<count&&reverse&&(changeValue(value+step),event.preventDefault()));null===onKeyDown||void 0===onKeyDown||onKeyDown(event)};_react.default.useEffect(function(){autoFocus&&!disabled&&triggerFocus()},[]);_useRefs=Array(count).fill(0).map(function(item,index){return _react.default.createElement(_Star.default,{ref:setStarRef(index),index,count,disabled,prefixCls:"".concat(prefixCls,"-star"),allowHalf,value:null===hoverValue?
value:hoverValue,onClick,onHover,key:item||index,character,characterRender,focused})});_props$prefixCls=(0,_classnames.default)(prefixCls,_props$prefixCls,(0,_defineProperty2.default)((0,_defineProperty2.default)({},"".concat(prefixCls,"-disabled"),disabled),"".concat(prefixCls,"-rtl"),"rtl"===direction));return _react.default.createElement("ul",(0,_extends2.default)({className:_props$prefixCls,onMouseLeave:onMouseLeaveCallback,tabIndex:disabled?-1:_props$count,onFocus:disabled?null:ref,onBlur:disabled?
null:defaultValue,onKeyDown:disabled?null:propValue,ref:rateRef,role:"radiogroup"},(0,_pickAttrs.default)(props,{aria:!0,data:!0,attr:!0})),_useRefs)})}
//# sourceMappingURL=module$node_modules$rc_rate$lib$Rate.js.map
