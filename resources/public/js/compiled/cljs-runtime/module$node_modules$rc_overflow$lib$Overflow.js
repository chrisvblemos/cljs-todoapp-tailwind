shadow$provide.module$node_modules$rc_overflow$lib$Overflow=function(global,require,module,exports){function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{default:e};if((r=_getRequireWildcardCache(r))&&r.has(e))return r.get(e);var n={__proto__:null},
a=Object.defineProperty&&Object.getOwnPropertyDescriptor,u;for(u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}function defaultRenderRest(omittedItems){return"+ ".concat(omittedItems.length," ...")}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");var _typeof=require("module$node_modules$$babel$runtime$helpers$typeof");
Object.defineProperty(exports,"__esModule",{value:!0});Object.defineProperty(exports,"OverflowContext",{enumerable:!0,get:function(){return _context.OverflowContext}});exports.default=void 0;var _extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),_objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_objectWithoutProperties2=global(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),
_react=_interopRequireWildcard(require("module$node_modules$react$index")),_classnames=global(require("module$node_modules$classnames$index")),_rcResizeObserver=global(require("module$node_modules$rc_resize_observer$lib$index")),_useLayoutEffect=global(require("module$node_modules$rc_util$lib$hooks$useLayoutEffect")),_Item=global(require("module$node_modules$rc_overflow$lib$Item")),_useEffectState11=_interopRequireWildcard(require("module$node_modules$rc_overflow$lib$hooks$useEffectState"));global=
global(require("module$node_modules$rc_overflow$lib$RawItem"));var _context=require("module$node_modules$rc_overflow$lib$context"),_excluded="prefixCls data renderItem renderRawItem itemKey itemWidth ssr style className maxCount renderRest renderRawRest suffix component itemComponent onVisibleChange".split(" ");require=_react.forwardRef(function(props,ref){function updateDisplayCount(count,suffixFixedStartVal,notReady){if(displayCount!==count||void 0!==suffixFixedStartVal&&suffixFixedStartVal!==suffixFixedStart)setDisplayCount(count),
notReady||(setRestReady(count<data.length-1),null===onVisibleChange||void 0===onVisibleChange||onVisibleChange(count)),void 0!==suffixFixedStartVal&&setSuffixFixedStart(suffixFixedStartVal)}function onOverflowResize(_,element){setContainerWidth(element.clientWidth)}function registerSize(key,width){setItemWidths(function(origin){origin=new Map(origin);null===width?origin.delete(key):origin.set(key,width);return origin})}function registerSuffixSize(_,width){setSuffixWidth(width)}var _props$prefixCls=
props.prefixCls;_props$prefixCls=void 0===_props$prefixCls?"rc-overflow":_props$prefixCls;var _props$data=props.data,data=void 0===_props$data?[]:_props$data,renderItem=props.renderItem,renderRawItem=props.renderRawItem,itemKey=props.itemKey;_props$data=props.itemWidth;var itemWidth=void 0===_props$data?10:_props$data,ssr=props.ssr;_props$data=props.style;var className=props.className,maxCount=props.maxCount,renderRest=props.renderRest,renderRawRest=props.renderRawRest,suffix=props.suffix,_props$component=
props.component;_props$component=void 0===_props$component?"div":_props$component;var itemComponent=props.itemComponent,onVisibleChange=props.onVisibleChange;props=(0,_objectWithoutProperties2.default)(props,_excluded);var fullySSR="full"===ssr,notifyEffectUpdate=(0,_useEffectState11.useBatcher)();ssr=(0,_useEffectState11.default)(notifyEffectUpdate,null);ssr=(0,_slicedToArray2.default)(ssr,2);var containerWidth=ssr[0],setContainerWidth=ssr[1],mergedContainerWidth=containerWidth||0;ssr=(0,_useEffectState11.default)(notifyEffectUpdate,
new Map);ssr=(0,_slicedToArray2.default)(ssr,2);var itemWidths=ssr[0],setItemWidths=ssr[1];ssr=(0,_useEffectState11.default)(notifyEffectUpdate,0);var _useEffectState6=(0,_slicedToArray2.default)(ssr,2);ssr=_useEffectState6[0];var setPrevRestWidth=_useEffectState6[1];_useEffectState6=(0,_useEffectState11.default)(notifyEffectUpdate,0);_useEffectState6=(0,_slicedToArray2.default)(_useEffectState6,2);var restWidth=_useEffectState6[0],setRestWidth=_useEffectState6[1];notifyEffectUpdate=(0,_useEffectState11.default)(notifyEffectUpdate,
0);notifyEffectUpdate=(0,_slicedToArray2.default)(notifyEffectUpdate,2);var suffixWidth=notifyEffectUpdate[0],setSuffixWidth=notifyEffectUpdate[1];notifyEffectUpdate=(0,_react.useState)(null);notifyEffectUpdate=(0,_slicedToArray2.default)(notifyEffectUpdate,2);var suffixFixedStart=notifyEffectUpdate[0],setSuffixFixedStart=notifyEffectUpdate[1];notifyEffectUpdate=(0,_react.useState)(null);notifyEffectUpdate=(0,_slicedToArray2.default)(notifyEffectUpdate,2);var displayCount=notifyEffectUpdate[0],setDisplayCount=
notifyEffectUpdate[1],mergedDisplayCount=_react.useMemo(function(){return null===displayCount&&fullySSR?Number.MAX_SAFE_INTEGER:displayCount||0},[displayCount,containerWidth]);notifyEffectUpdate=(0,_react.useState)(!1);notifyEffectUpdate=(0,_slicedToArray2.default)(notifyEffectUpdate,2);var restReady=notifyEffectUpdate[0],setRestReady=notifyEffectUpdate[1];notifyEffectUpdate="".concat(_props$prefixCls,"-item");var mergedRestWidth=Math.max(ssr,restWidth);ssr="responsive"===maxCount;var shouldResponsive=
data.length&&ssr;_useEffectState6="invalidate"===maxCount;var showRest=shouldResponsive||"number"===typeof maxCount&&data.length>maxCount,mergedData=(0,_react.useMemo)(function(){var items=data;shouldResponsive?items=null===containerWidth&&fullySSR?data:data.slice(0,Math.min(data.length,mergedContainerWidth/itemWidth)):"number"===typeof maxCount&&(items=data.slice(0,maxCount));return items},[data,itemWidth,containerWidth,maxCount,shouldResponsive]),omittedItems=(0,_react.useMemo)(function(){return shouldResponsive?
data.slice(mergedDisplayCount+1):data.slice(mergedData.length)},[data,mergedData,shouldResponsive,mergedDisplayCount]),getKey=(0,_react.useCallback)(function(item,index){var _ref;return"function"===typeof itemKey?itemKey(item):null!==(_ref=itemKey&&(null===item||void 0===item?void 0:item[itemKey]))&&void 0!==_ref?_ref:index},[itemKey]),mergedRenderItem=(0,_react.useCallback)(renderItem||function(item){return item},[renderItem]);(0,_useLayoutEffect.default)(function(){if(mergedContainerWidth&&"number"===
typeof mergedRestWidth&&mergedData){var totalWidth=suffixWidth,len=mergedData.length,lastIndex=len-1;if(len){for(var i=0;i<len;i+=1){var currentItemWidth=itemWidths.get(getKey(mergedData[i],i));fullySSR&&(currentItemWidth=currentItemWidth||0);if(void 0===currentItemWidth){updateDisplayCount(i-1,void 0,!0);break}totalWidth+=currentItemWidth;if(0===lastIndex&&totalWidth<=mergedContainerWidth||i===lastIndex-1&&totalWidth+itemWidths.get(getKey(mergedData[lastIndex],lastIndex))<=mergedContainerWidth){updateDisplayCount(lastIndex,
null);break}else if(totalWidth+mergedRestWidth>mergedContainerWidth){updateDisplayCount(i-1,totalWidth-currentItemWidth-suffixWidth+restWidth);break}}suffix&&itemWidths.get(getKey(mergedData[0],0))+suffixWidth>mergedContainerWidth&&setSuffixFixedStart(null)}else updateDisplayCount(0,null)}},[mergedContainerWidth,itemWidths,restWidth,suffixWidth,getKey,mergedData]);restReady=restReady&&!!omittedItems.length;renderItem={};null!==suffixFixedStart&&shouldResponsive&&(renderItem={position:"absolute",left:suffixFixedStart,
top:0});var itemSharedProps={prefixCls:notifyEffectUpdate,responsive:shouldResponsive,component:itemComponent,invalidate:_useEffectState6};itemComponent=renderRawItem?function(item,index){var key=getKey(item,index);return _react.createElement(_context.OverflowContext.Provider,{key,value:(0,_objectSpread2.default)((0,_objectSpread2.default)({},itemSharedProps),{},{order:index,item,itemKey:key,registerSize,display:index<=mergedDisplayCount})},renderRawItem(item,index))}:function(item,index){var key=
getKey(item,index);return _react.createElement(_Item.default,(0,_extends2.default)({},itemSharedProps,{order:index,key,item,renderItem:mergedRenderItem,itemKey:key,registerSize,display:index<=mergedDisplayCount}))};restReady={order:restReady?mergedDisplayCount:Number.MAX_SAFE_INTEGER,className:"".concat(notifyEffectUpdate,"-rest"),registerSize:function(_,width){setRestWidth(width);setPrevRestWidth(restWidth)},display:restReady};renderRest=renderRest||defaultRenderRest;renderRawRest=renderRawRest?
_react.createElement(_context.OverflowContext.Provider,{value:(0,_objectSpread2.default)((0,_objectSpread2.default)({},itemSharedProps),restReady)},renderRawRest(omittedItems)):_react.createElement(_Item.default,(0,_extends2.default)({},itemSharedProps,restReady),"function"===typeof renderRest?renderRest(omittedItems):renderRest);ref=_react.createElement(_props$component,(0,_extends2.default)({className:(0,_classnames.default)(!_useEffectState6&&_props$prefixCls,className),style:_props$data,ref},
props),mergedData.map(itemComponent),showRest?renderRawRest:null,suffix&&_react.createElement(_Item.default,(0,_extends2.default)({},itemSharedProps,{responsive:ssr,responsiveDisabled:!shouldResponsive,order:mergedDisplayCount,className:"".concat(notifyEffectUpdate,"-suffix"),registerSize:registerSuffixSize,display:!0,style:renderItem}),suffix));return ssr?_react.createElement(_rcResizeObserver.default,{onResize:onOverflowResize,disabled:!shouldResponsive},ref):ref});require.displayName="Overflow";
require.Item=global.default;require.RESPONSIVE="responsive";require.INVALIDATE="invalidate";exports.default=require}
//# sourceMappingURL=module$node_modules$rc_overflow$lib$Overflow.js.map
