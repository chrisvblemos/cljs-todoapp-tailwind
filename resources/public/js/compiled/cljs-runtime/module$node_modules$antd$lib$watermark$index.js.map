{
"version":3,
"file":"module$node_modules$antd$lib$watermark$index.js",
"lineCount":12,
"mappings":"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",
"sources":["node_modules/antd/lib/watermark/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$antd$lib$watermark$index\"] = function(global,require,module,exports) {\n\"use strict\";\n\"use client\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _mutateObserver = require(\"@rc-component/mutate-observer\");\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\nvar _useEvent = _interopRequireDefault(require(\"rc-util/lib/hooks/useEvent\"));\nvar _internal = require(\"../theme/internal\");\nvar _context = _interopRequireDefault(require(\"./context\"));\nvar _useClips = _interopRequireWildcard(require(\"./useClips\"));\nvar _useRafDebounce = _interopRequireDefault(require(\"./useRafDebounce\"));\nvar _useWatermark = _interopRequireDefault(require(\"./useWatermark\"));\nvar _utils = require(\"./utils\");\nvar _toList = _interopRequireDefault(require(\"../_util/toList\"));\n/**\n * Only return `next` when size changed.\n * This is only used for elements compare, not a shallow equal!\n */\nfunction getSizeDiff(prev, next) {\n  return prev.size === next.size ? prev : next;\n}\nconst DEFAULT_GAP_X = 100;\nconst DEFAULT_GAP_Y = 100;\nconst fixedStyle = {\n  position: 'relative',\n  overflow: 'hidden'\n};\nconst Watermark = props => {\n  var _a, _b;\n  const {\n    /**\n     * The antd content layer zIndex is basically below 10\n     * https://github.com/ant-design/ant-design/blob/6192403b2ce517c017f9e58a32d58774921c10cd/components/style/themes/default.less#L335\n     */\n    zIndex = 9,\n    rotate = -22,\n    width,\n    height,\n    image,\n    content,\n    font = {},\n    style,\n    className,\n    rootClassName,\n    gap = [DEFAULT_GAP_X, DEFAULT_GAP_Y],\n    offset,\n    children,\n    inherit = true\n  } = props;\n  const mergedStyle = Object.assign(Object.assign({}, fixedStyle), style);\n  const [, token] = (0, _internal.useToken)();\n  const {\n    color = token.colorFill,\n    fontSize = token.fontSizeLG,\n    fontWeight = 'normal',\n    fontStyle = 'normal',\n    fontFamily = 'sans-serif',\n    textAlign = 'center'\n  } = font;\n  const [gapX = DEFAULT_GAP_X, gapY = DEFAULT_GAP_Y] = gap;\n  const gapXCenter = gapX / 2;\n  const gapYCenter = gapY / 2;\n  const offsetLeft = (_a = offset === null || offset === void 0 ? void 0 : offset[0]) !== null && _a !== void 0 ? _a : gapXCenter;\n  const offsetTop = (_b = offset === null || offset === void 0 ? void 0 : offset[1]) !== null && _b !== void 0 ? _b : gapYCenter;\n  const markStyle = _react.default.useMemo(() => {\n    const mergedMarkStyle = {\n      zIndex,\n      position: 'absolute',\n      left: 0,\n      top: 0,\n      width: '100%',\n      height: '100%',\n      pointerEvents: 'none',\n      backgroundRepeat: 'repeat'\n    };\n    /** Calculate the style of the offset */\n    let positionLeft = offsetLeft - gapXCenter;\n    let positionTop = offsetTop - gapYCenter;\n    if (positionLeft > 0) {\n      mergedMarkStyle.left = `${positionLeft}px`;\n      mergedMarkStyle.width = `calc(100% - ${positionLeft}px)`;\n      positionLeft = 0;\n    }\n    if (positionTop > 0) {\n      mergedMarkStyle.top = `${positionTop}px`;\n      mergedMarkStyle.height = `calc(100% - ${positionTop}px)`;\n      positionTop = 0;\n    }\n    mergedMarkStyle.backgroundPosition = `${positionLeft}px ${positionTop}px`;\n    return mergedMarkStyle;\n  }, [zIndex, offsetLeft, gapXCenter, offsetTop, gapYCenter]);\n  const [container, setContainer] = _react.default.useState();\n  // Used for nest case like Modal, Drawer\n  const [subElements, setSubElements] = _react.default.useState(new Set());\n  // Nest elements should also support watermark\n  const targetElements = _react.default.useMemo(() => {\n    const list = container ? [container] : [];\n    return [].concat(list, (0, _toConsumableArray2.default)(Array.from(subElements)));\n  }, [container, subElements]);\n  // ============================ Content =============================\n  /**\n   * Get the width and height of the watermark. The default values are as follows\n   * Image: [120, 64]; Content: It's calculated by content;\n   */\n  const getMarkSize = ctx => {\n    let defaultWidth = 120;\n    let defaultHeight = 64;\n    if (!image && ctx.measureText) {\n      ctx.font = `${Number(fontSize)}px ${fontFamily}`;\n      const contents = (0, _toList.default)(content);\n      const sizes = contents.map(item => {\n        const metrics = ctx.measureText(item);\n        return [metrics.width, metrics.fontBoundingBoxAscent + metrics.fontBoundingBoxDescent];\n      });\n      defaultWidth = Math.ceil(Math.max.apply(Math, (0, _toConsumableArray2.default)(sizes.map(size => size[0]))));\n      defaultHeight = Math.ceil(Math.max.apply(Math, (0, _toConsumableArray2.default)(sizes.map(size => size[1])))) * contents.length + (contents.length - 1) * _useClips.FontGap;\n    }\n    return [width !== null && width !== void 0 ? width : defaultWidth, height !== null && height !== void 0 ? height : defaultHeight];\n  };\n  const getClips = (0, _useClips.default)();\n  const [watermarkInfo, setWatermarkInfo] = _react.default.useState(null);\n  // Generate new Watermark content\n  const renderWatermark = () => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (ctx) {\n      const ratio = (0, _utils.getPixelRatio)();\n      const [markWidth, markHeight] = getMarkSize(ctx);\n      const drawCanvas = drawContent => {\n        const [nextClips, clipWidth] = getClips(drawContent || '', rotate, ratio, markWidth, markHeight, {\n          color,\n          fontSize,\n          fontStyle,\n          fontWeight,\n          fontFamily,\n          textAlign\n        }, gapX, gapY);\n        setWatermarkInfo([nextClips, clipWidth]);\n      };\n      if (image) {\n        const img = new Image();\n        img.onload = () => {\n          drawCanvas(img);\n        };\n        img.onerror = () => {\n          drawCanvas(content);\n        };\n        img.crossOrigin = 'anonymous';\n        img.referrerPolicy = 'no-referrer';\n        img.src = image;\n      } else {\n        drawCanvas(content);\n      }\n    }\n  };\n  const syncWatermark = (0, _useRafDebounce.default)(renderWatermark);\n  // ============================= Effect =============================\n  // Append watermark to the container\n  const [appendWatermark, removeWatermark, isWatermarkEle] = (0, _useWatermark.default)(markStyle);\n  (0, _react.useEffect)(() => {\n    if (watermarkInfo) {\n      targetElements.forEach(holder => {\n        appendWatermark(watermarkInfo[0], watermarkInfo[1], holder);\n      });\n    }\n  }, [watermarkInfo, targetElements]);\n  // ============================ Observe =============================\n  const onMutate = (0, _useEvent.default)(mutations => {\n    mutations.forEach(mutation => {\n      if ((0, _utils.reRendering)(mutation, isWatermarkEle)) {\n        syncWatermark();\n      } else if (mutation.target === container && mutation.attributeName === 'style') {\n        // We've only force container not modify.\n        // Not consider nest case.\n        const keyStyles = Object.keys(fixedStyle);\n        for (let i = 0; i < keyStyles.length; i += 1) {\n          const key = keyStyles[i];\n          const oriValue = mergedStyle[key];\n          const currentValue = container.style[key];\n          if (oriValue && oriValue !== currentValue) {\n            container.style[key] = oriValue;\n          }\n        }\n      }\n    });\n  });\n  (0, _mutateObserver.useMutateObserver)(targetElements, onMutate);\n  (0, _react.useEffect)(syncWatermark, [rotate, zIndex, width, height, image, content, color, fontSize, fontWeight, fontStyle, fontFamily, textAlign, gapX, gapY, offsetLeft, offsetTop]);\n  // ============================ Context =============================\n  const watermarkContext = _react.default.useMemo(() => ({\n    add: ele => {\n      setSubElements(prev => {\n        const clone = new Set(prev);\n        clone.add(ele);\n        return getSizeDiff(prev, clone);\n      });\n    },\n    remove: ele => {\n      removeWatermark(ele);\n      setSubElements(prev => {\n        const clone = new Set(prev);\n        clone.delete(ele);\n        return getSizeDiff(prev, clone);\n      });\n    }\n  }), []);\n  // ============================= Render =============================\n  const childNode = inherit ? (/*#__PURE__*/_react.default.createElement(_context.default.Provider, {\n    value: watermarkContext\n  }, children)) : children;\n  return /*#__PURE__*/_react.default.createElement(\"div\", {\n    ref: setContainer,\n    className: (0, _classnames.default)(className, rootClassName),\n    style: mergedStyle\n  }, childNode);\n};\nif (process.env.NODE_ENV !== 'production') {\n  Watermark.displayName = 'Watermark';\n}\nvar _default = exports.default = Watermark;\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireWildcard","default","_interopRequireDefault","Object","defineProperty","value","_toConsumableArray2","_react","_mutateObserver","_classnames","_useEvent","_internal","_context","_useClips","_useRafDebounce","_useWatermark","_utils","_toList","fixedStyle","position","overflow","Watermark","props","_a","_b","zIndex","rotate","width","height","image","content","font","style","className","rootClassName","gap","DEFAULT_GAP_X","DEFAULT_GAP_Y","offset","children","inherit","mergedStyle","assign","token","useToken","color","colorFill","fontSize","fontSizeLG","fontWeight","fontStyle","fontFamily","textAlign","gapX","gapY","gapXCenter","gapYCenter","offsetLeft","offsetTop","markStyle","useMemo","mergedMarkStyle","left","top","pointerEvents","backgroundRepeat","positionLeft","positionTop","backgroundPosition","container","setContainer","useState","subElements","setSubElements","Set","targetElements","concat","list","Array","from","getMarkSize","ctx","defaultWidth","defaultHeight","measureText","Number","contents","sizes","map","item","metrics","fontBoundingBoxAscent","fontBoundingBoxDescent","Math","ceil","max","apply","size","length","FontGap","getClips","watermarkInfo","setWatermarkInfo","syncWatermark","renderWatermark","document","createElement","canvas","getContext","ratio","getPixelRatio","markWidth","markHeight","drawCanvas","drawContent","nextClips","clipWidth","img","Image","onload","img.onload","onerror","img.onerror","crossOrigin","referrerPolicy","src","appendWatermark","removeWatermark","isWatermarkEle","useEffect","forEach","holder","onMutate","mutations","mutation","reRendering","target","attributeName","keyStyles","keys","i","key","oriValue","currentValue","useMutateObserver","watermarkContext","add","ele","prev","clone","remove","delete","childNode","Provider","ref","displayName"]
}
