shadow$provide.module$node_modules$antd$lib$affix$index=function(global,require,module,exports){function getDefaultTarget(){return"undefined"!==typeof window?window:null}"use client";global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _react=global(require("module$node_modules$react$index")),_classnames=global(require("module$node_modules$classnames$index")),_rcResizeObserver=global(require("module$node_modules$rc_resize_observer$lib$index")),
_omit=global(require("module$node_modules$rc_util$lib$omit")),_throttleByAnimationFrame=global(require("module$node_modules$antd$lib$_util$throttleByAnimationFrame")),_configProvider=require("module$node_modules$antd$lib$config_provider$index"),_style=global(require("module$node_modules$antd$lib$affix$style$index")),_utils=require("module$node_modules$antd$lib$affix$utils");const TRIGGER_EVENTS="resize scroll touchstart touchmove touchend pageshow load".split(" ");require=_react.default.forwardRef((props,
ref)=>{var _a;const {style,offsetTop,offsetBottom,prefixCls,className,rootClassName,children,target,onChange}=props,{getPrefixCls,getTargetContainer}=_react.default.useContext(_configProvider.ConfigContext),affixPrefixCls=getPrefixCls("affix",prefixCls),[lastAffix,setLastAffix]=_react.default.useState(!1),[affixStyle,setAffixStyle]=_react.default.useState(),[placeholderStyle,setPlaceholderStyle]=_react.default.useState(),status=_react.default.useRef(0),prevTarget=_react.default.useRef(null),prevListener=
_react.default.useRef(null),placeholderNodeRef=_react.default.useRef(null),fixedNodeRef=_react.default.useRef(null),timer=_react.default.useRef(null),targetFunc=null!==(_a=null!==target&&void 0!==target?target:getTargetContainer)&&void 0!==_a?_a:getDefaultTarget,internalOffsetTop=void 0===offsetBottom&&void 0===offsetTop?0:offsetTop,prepareMeasure=()=>{status.current=1;if(1===status.current&&fixedNodeRef.current&&placeholderNodeRef.current&&targetFunc){var targetNode=targetFunc();if(targetNode){var JSCompiler_object_inline_lastAffix_1956=
(0,_utils.getTargetRect)(placeholderNodeRef.current);if(0!==JSCompiler_object_inline_lastAffix_1956.top||0!==JSCompiler_object_inline_lastAffix_1956.left||0!==JSCompiler_object_inline_lastAffix_1956.width||0!==JSCompiler_object_inline_lastAffix_1956.height){var targetRect=(0,_utils.getTargetRect)(targetNode);targetNode=(0,_utils.getFixedTop)(JSCompiler_object_inline_lastAffix_1956,targetRect,internalOffsetTop);targetRect=(0,_utils.getFixedBottom)(JSCompiler_object_inline_lastAffix_1956,targetRect,
offsetBottom);if(void 0!==targetNode){var JSCompiler_object_inline_affixStyle_1954={position:"fixed",top:targetNode,width:JSCompiler_object_inline_lastAffix_1956.width,height:JSCompiler_object_inline_lastAffix_1956.height};var JSCompiler_object_inline_placeholderStyle_1955={width:JSCompiler_object_inline_lastAffix_1956.width,height:JSCompiler_object_inline_lastAffix_1956.height}}else void 0!==targetRect&&(JSCompiler_object_inline_affixStyle_1954={position:"fixed",bottom:targetRect,width:JSCompiler_object_inline_lastAffix_1956.width,
height:JSCompiler_object_inline_lastAffix_1956.height},JSCompiler_object_inline_placeholderStyle_1955={width:JSCompiler_object_inline_lastAffix_1956.width,height:JSCompiler_object_inline_lastAffix_1956.height});JSCompiler_object_inline_lastAffix_1956=!!JSCompiler_object_inline_affixStyle_1954;lastAffix!==JSCompiler_object_inline_lastAffix_1956&&(null===onChange||void 0===onChange?void 0:onChange(JSCompiler_object_inline_lastAffix_1956));status.current=0;setAffixStyle(JSCompiler_object_inline_affixStyle_1954);
setPlaceholderStyle(JSCompiler_object_inline_placeholderStyle_1955);setLastAffix(JSCompiler_object_inline_lastAffix_1956)}}}},updatePosition=(0,_throttleByAnimationFrame.default)(()=>{prepareMeasure()}),lazyUpdatePosition=(0,_throttleByAnimationFrame.default)(()=>{if(targetFunc&&affixStyle){var targetNode=targetFunc();if(targetNode&&placeholderNodeRef.current){var targetRect=(0,_utils.getTargetRect)(targetNode);const placeholderRect=(0,_utils.getTargetRect)(placeholderNodeRef.current);targetNode=
(0,_utils.getFixedTop)(placeholderRect,targetRect,internalOffsetTop);targetRect=(0,_utils.getFixedBottom)(placeholderRect,targetRect,offsetBottom);if(void 0!==targetNode&&affixStyle.top===targetNode||void 0!==targetRect&&affixStyle.bottom===targetRect)return}}prepareMeasure()}),addListeners=()=>{const listenerTarget=null===targetFunc||void 0===targetFunc?void 0:targetFunc();listenerTarget&&(TRIGGER_EVENTS.forEach(eventName=>{var _a;prevListener.current&&(null===(_a=prevTarget.current)||void 0===_a?
void 0:_a.removeEventListener(eventName,prevListener.current));null===listenerTarget||void 0===listenerTarget?void 0:listenerTarget.addEventListener(eventName,lazyUpdatePosition)}),prevTarget.current=listenerTarget,prevListener.current=lazyUpdatePosition)},removeListeners=()=>{timer.current&&(clearTimeout(timer.current),timer.current=null);const newTarget=null===targetFunc||void 0===targetFunc?void 0:targetFunc();TRIGGER_EVENTS.forEach(eventName=>{var _a;null===newTarget||void 0===newTarget?void 0:
newTarget.removeEventListener(eventName,lazyUpdatePosition);prevListener.current&&(null===(_a=prevTarget.current)||void 0===_a?void 0:_a.removeEventListener(eventName,prevListener.current))});updatePosition.cancel();lazyUpdatePosition.cancel()};_react.default.useImperativeHandle(ref,()=>({updatePosition}));_react.default.useEffect(()=>{timer.current=setTimeout(addListeners);return()=>removeListeners()},[]);_react.default.useEffect(()=>{addListeners()},[target,affixStyle]);_react.default.useEffect(()=>
{updatePosition()},[target,offsetTop,offsetBottom]);const [wrapCSSVar,hashId,cssVarCls]=(0,_style.default)(affixPrefixCls);ref=(0,_classnames.default)(rootClassName,hashId,affixPrefixCls,cssVarCls);ref=(0,_classnames.default)({[ref]:affixStyle});props=(0,_omit.default)(props,"prefixCls offsetTop offsetBottom target onChange rootClassName".split(" "));return wrapCSSVar(_react.default.createElement(_rcResizeObserver.default,{onResize:updatePosition},_react.default.createElement("div",Object.assign({style,
className,ref:placeholderNodeRef},props),affixStyle&&_react.default.createElement("div",{style:placeholderStyle,"aria-hidden":"true"}),_react.default.createElement("div",{className:ref,ref:fixedNodeRef,style:affixStyle},_react.default.createElement(_rcResizeObserver.default,{onResize:updatePosition},children)))))});require.displayName="Affix";exports.default=require}
//# sourceMappingURL=module$node_modules$antd$lib$affix$index.js.map
