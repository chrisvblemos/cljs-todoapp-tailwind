shadow$provide.module$node_modules$rc_table$lib$hooks$useColumns$index=function(global,require,module,exports){function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function(e){return e?t:r})(e)}function convertChildrenToColumns(children){return(0,_toArray.default)(children).filter(function(node){return React.isValidElement(node)}).map(function(_ref){var key=_ref.key,props=_ref.props;_ref=props.children;props=
(0,_objectWithoutProperties2.default)(props,_excluded);key=(0,_objectSpread2.default)({key},props);_ref&&(key.children=convertChildrenToColumns(_ref));return key})}function filterHiddenColumns(columns){return columns.filter(function(column){return column&&"object"===(0,_typeof2.default)(column)&&!column.hidden}).map(function(column){var subColumns=column.children;return subColumns&&0<subColumns.length?(0,_objectSpread2.default)((0,_objectSpread2.default)({},column),{},{children:filterHiddenColumns(subColumns)}):
column})}function flatColumns(columns){var parentKey=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"key";return columns.filter(function(column){return column&&"object"===(0,_typeof2.default)(column)}).reduce(function(list,column,index){var fixed=column.fixed,parsedFixed=!0===fixed?"left":fixed;index="".concat(parentKey,"-").concat(index);return(fixed=column.children)&&0<fixed.length?[].concat((0,_toConsumableArray2.default)(list),(0,_toConsumableArray2.default)(flatColumns(fixed,index).map(function(subColum){return(0,_objectSpread2.default)({fixed:parsedFixed},
subColum)}))):[].concat((0,_toConsumableArray2.default)(list),[(0,_objectSpread2.default)((0,_objectSpread2.default)({key:index},column),{},{fixed:parsedFixed})])},[])}function revertForRtl(columns){return columns.map(function(column){var fixed=column.fixed;column=(0,_objectWithoutProperties2.default)(column,_excluded2);var parsedFixed=fixed;"left"===fixed?parsedFixed="right":"right"===fixed&&(parsedFixed="left");return(0,_objectSpread2.default)({fixed:parsedFixed},column)})}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");
var _typeof3=require("module$node_modules$$babel$runtime$helpers$typeof");Object.defineProperty(exports,"__esModule",{value:!0});exports.convertChildrenToColumns=convertChildrenToColumns;exports.default=void 0;var _slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_defineProperty2=global(require("module$node_modules$$babel$runtime$helpers$defineProperty")),_toConsumableArray2=global(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_typeof2=
global(require("module$node_modules$$babel$runtime$helpers$typeof")),_objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_objectWithoutProperties2=global(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),_toArray=global(require("module$node_modules$rc_util$lib$Children$toArray")),_warning=global(require("module$node_modules$rc_util$lib$warning")),React=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof3(e)&&
"function"!=typeof e)return{default:e};if((r=_getRequireWildcardCache(r))&&r.has(e))return r.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor,u;for(u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}(require("module$node_modules$react$index")),_constant=require("module$node_modules$rc_table$lib$constant"),
_legacyUtil=require("module$node_modules$rc_table$lib$utils$legacyUtil"),_useWidthColumns3=global(require("module$node_modules$rc_table$lib$hooks$useColumns$useWidthColumns")),_excluded=["children"],_excluded2=["fixed"];exports.default=function(_ref2,transformColumns){var prefixCls=_ref2.prefixCls,columns=_ref2.columns,children=_ref2.children,expandable=_ref2.expandable,expandedKeys=_ref2.expandedKeys,columnTitle=_ref2.columnTitle,getRowKey=_ref2.getRowKey,onTriggerExpand=_ref2.onTriggerExpand,expandIcon=
_ref2.expandIcon,rowExpandable=_ref2.rowExpandable,expandIconColumnIndex=_ref2.expandIconColumnIndex,direction=_ref2.direction,expandRowByClick=_ref2.expandRowByClick,columnWidth=_ref2.columnWidth,fixed=_ref2.fixed,scrollWidth=_ref2.scrollWidth,clientWidth=_ref2.clientWidth,baseColumns=React.useMemo(function(){var newColumns=columns||convertChildrenToColumns(children)||[];return filterHiddenColumns(newColumns.slice())},[columns,children]),withExpandColumns=React.useMemo(function(){if(expandable){var cloneColumns=
baseColumns.slice();0<=expandIconColumnIndex&&(0,_warning.default)(!1,"`expandIconColumnIndex` is deprecated. Please use `Table.EXPAND_COLUMN` in `columns` instead.");if(!cloneColumns.includes(_constant.EXPAND_COLUMN)){var expandColIndex=expandIconColumnIndex||0;0<=expandColIndex&&(expandColIndex||"left"===fixed||!fixed)&&cloneColumns.splice(expandColIndex,0,_constant.EXPAND_COLUMN);"right"===fixed&&cloneColumns.splice(baseColumns.length,0,_constant.EXPAND_COLUMN)}1<cloneColumns.filter(function(c){return c===
_constant.EXPAND_COLUMN}).length&&(0,_warning.default)(!1,"There exist more than one `EXPAND_COLUMN` in `columns`.");var expandColumnIndex=cloneColumns.indexOf(_constant.EXPAND_COLUMN);cloneColumns=cloneColumns.filter(function(column,index){return column!==_constant.EXPAND_COLUMN||index===expandColumnIndex});expandColIndex=baseColumns[expandColumnIndex];expandColIndex=fixed?fixed:expandColIndex?expandColIndex.fixed:null;var expandColumn=(0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)((0,_defineProperty2.default)({},
_legacyUtil.INTERNAL_COL_DEFINE,{className:"".concat(prefixCls,"-expand-icon-col"),columnType:"EXPAND_COLUMN"}),"title",columnTitle),"fixed",expandColIndex),"className","".concat(prefixCls,"-row-expand-icon-cell")),"width",columnWidth),"render",function(_,record,index){_=getRowKey(record,index);_=expandedKeys.has(_);index=rowExpandable?rowExpandable(record):!0;record=expandIcon({prefixCls,expanded:_,expandable:index,record,onExpand:onTriggerExpand});return expandRowByClick?React.createElement("span",
{onClick:function(e){return e.stopPropagation()}},record):record});return cloneColumns.map(function(col){return col===_constant.EXPAND_COLUMN?expandColumn:col})}baseColumns.includes(_constant.EXPAND_COLUMN)&&(0,_warning.default)(!1,"`expandable` is not config but there exist `EXPAND_COLUMN` in `columns`.");return baseColumns.filter(function(col){return col!==_constant.EXPAND_COLUMN})},[expandable,baseColumns,getRowKey,expandedKeys,expandIcon,direction]),mergedColumns=React.useMemo(function(){var finalColumns=
withExpandColumns;transformColumns&&(finalColumns=transformColumns(finalColumns));finalColumns.length||(finalColumns=[{render:function(){return null}}]);return finalColumns},[transformColumns,withExpandColumns,direction]),flattenColumns=React.useMemo(function(){return"rtl"===direction?revertForRtl(flatColumns(mergedColumns)):flatColumns(mergedColumns)},[mergedColumns,direction,scrollWidth]);_ref2=React.useMemo(function(){for(var lastLeftIndex=-1,i=flattenColumns.length-1;0<=i;--i){var colFixed=flattenColumns[i].fixed;
if("left"===colFixed||!0===colFixed){lastLeftIndex=i;break}}if(0<=lastLeftIndex)for(i=0;i<=lastLeftIndex;i+=1)if(colFixed=flattenColumns[i].fixed,"left"!==colFixed&&!0!==colFixed)return!0;lastLeftIndex=flattenColumns.findIndex(function(_ref3){return"right"===_ref3.fixed});if(0<=lastLeftIndex)for(;lastLeftIndex<flattenColumns.length;lastLeftIndex+=1)if("right"!==flattenColumns[lastLeftIndex].fixed)return!0;return!1},[flattenColumns]);scrollWidth=(0,_useWidthColumns3.default)(flattenColumns,scrollWidth,
clientWidth);scrollWidth=(0,_slicedToArray2.default)(scrollWidth,2);return[mergedColumns,scrollWidth[0],scrollWidth[1],_ref2]}}
//# sourceMappingURL=module$node_modules$rc_table$lib$hooks$useColumns$index.js.map
