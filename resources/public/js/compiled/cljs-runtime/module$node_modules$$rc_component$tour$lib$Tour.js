shadow$provide.module$node_modules$$rc_component$tour$lib$Tour=function(global,require,module,exports){global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault").default;module=require("module$node_modules$$babel$runtime$helpers$interopRequireWildcard").default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;var _objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_extends2=global(require("module$node_modules$$babel$runtime$helpers$extends")),
_typeof2=global(require("module$node_modules$$babel$runtime$helpers$typeof")),_slicedToArray2=global(require("module$node_modules$$babel$runtime$helpers$slicedToArray")),_objectWithoutProperties2=global(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),React=module(require("module$node_modules$react$index")),_portal=global(require("module$node_modules$$rc_component$portal$lib$index")),_trigger=global(require("module$node_modules$$rc_component$trigger$lib$index")),_classnames=
global(require("module$node_modules$classnames$index")),_useLayoutEffect=global(require("module$node_modules$rc_util$lib$hooks$useLayoutEffect")),_useMergedState5=global(require("module$node_modules$rc_util$lib$hooks$useMergedState")),_useClosable=require("module$node_modules$$rc_component$tour$lib$hooks$useClosable"),_useTarget3=global(require("module$node_modules$$rc_component$tour$lib$hooks$useTarget")),_Mask=global(require("module$node_modules$$rc_component$tour$lib$Mask")),_placements=require("module$node_modules$$rc_component$tour$lib$placements"),
_TourStep=global(require("module$node_modules$$rc_component$tour$lib$TourStep$index")),_util=require("module$node_modules$$rc_component$tour$lib$util"),_excluded="prefixCls steps defaultCurrent current onChange onClose onFinish open mask arrow rootClassName placement renderPanel gap animated scrollIntoViewOptions zIndex closeIcon closable builtinPlacements disabledInteraction".split(" "),CENTER_PLACEHOLDER={left:"50%",top:"50%",width:1,height:1},defaultScrollIntoViewOptions={block:"center",inline:"center"};
exports.default=function(props){var _props$prefixCls=props.prefixCls,prefixCls=void 0===_props$prefixCls?"rc-tour":_props$prefixCls;_props$prefixCls=props.steps;var steps=void 0===_props$prefixCls?[]:_props$prefixCls,defaultCurrent=props.defaultCurrent,current=props.current,onChange=props.onChange,onClose=props.onClose,_onFinish=props.onFinish,open=props.open;_props$prefixCls=props.mask;var mask=void 0===_props$prefixCls?!0:_props$prefixCls;_props$prefixCls=props.arrow;var arrow=void 0===_props$prefixCls?
!0:_props$prefixCls;_props$prefixCls=props.rootClassName;var placement=props.placement,renderPanel=props.renderPanel,gap=props.gap,animated=props.animated,_props$scrollIntoView=props.scrollIntoViewOptions,scrollIntoViewOptions=void 0===_props$scrollIntoView?defaultScrollIntoViewOptions:_props$scrollIntoView;_props$scrollIntoView=props.zIndex;_props$scrollIntoView=void 0===_props$scrollIntoView?1001:_props$scrollIntoView;var closeIcon=props.closeIcon,closable=props.closable,builtinPlacements=props.builtinPlacements,
disabledInteraction=props.disabledInteraction;props=(0,_objectWithoutProperties2.default)(props,_excluded);var triggerRef=React.useRef();defaultCurrent=(0,_useMergedState5.default)(0,{value:current,defaultValue:defaultCurrent});defaultCurrent=(0,_slicedToArray2.default)(defaultCurrent,2);var mergedCurrent=defaultCurrent[0],setMergedCurrent=defaultCurrent[1];defaultCurrent=(0,_useMergedState5.default)(void 0,{value:open,postState:function(origin){return 0>mergedCurrent||mergedCurrent>=steps.length?
!1:null!==origin&&void 0!==origin?origin:!0}});defaultCurrent=(0,_slicedToArray2.default)(defaultCurrent,2);var mergedOpen=defaultCurrent[0],setMergedOpen=defaultCurrent[1];defaultCurrent=React.useState(mergedOpen);current=(0,_slicedToArray2.default)(defaultCurrent,2);defaultCurrent=current[0];var setHasOpened=current[1],openRef=React.useRef(mergedOpen);(0,_useLayoutEffect.default)(function(){mergedOpen&&(openRef.current||setMergedCurrent(0),setHasOpened(!0));openRef.current=mergedOpen},[mergedOpen]);
var _ref=steps[mergedCurrent]||{},target=_ref.target,stepPlacement=_ref.placement;current=_ref.style;var stepArrow=_ref.arrow,stepClassName=_ref.className,stepMask=_ref.mask,_ref$scrollIntoViewOp=_ref.scrollIntoViewOptions;_ref$scrollIntoViewOp=void 0===_ref$scrollIntoViewOp?defaultScrollIntoViewOptions:_ref$scrollIntoViewOp;var mergedClosable=(0,_useClosable.useClosable)(_ref.closable,_ref.closeIcon,closable,closeIcon);mask=mergedOpen&&(null!==stepMask&&void 0!==stepMask?stepMask:mask);open=(0,_useTarget3.default)(target,
open,gap,null!==_ref$scrollIntoViewOp&&void 0!==_ref$scrollIntoViewOp?_ref$scrollIntoViewOp:scrollIntoViewOptions);gap=(0,_slicedToArray2.default)(open,2);open=gap[0];var targetElement=gap[1];placement=(0,_util.getPlacement)(targetElement,placement,stepPlacement);var mergedArrow=targetElement?"undefined"===typeof stepArrow?arrow:stepArrow:!1,arrowPointAtCenter="object"===(0,_typeof2.default)(mergedArrow)?mergedArrow.pointAtCenter:!1;(0,_useLayoutEffect.default)(function(){var _triggerRef$current;
null===(_triggerRef$current=triggerRef.current)||void 0===_triggerRef$current?void 0:_triggerRef$current.forceAlign()},[arrowPointAtCenter,mergedCurrent]);var onInternalChange=function(nextCurrent){setMergedCurrent(nextCurrent);null===onChange||void 0===onChange?void 0:onChange(nextCurrent)};arrow=(0,React.useMemo)(function(){return builtinPlacements?"function"===typeof builtinPlacements?builtinPlacements({arrowPointAtCenter}):builtinPlacements:(0,_placements.getPlacements)(arrowPointAtCenter)},[builtinPlacements,
arrowPointAtCenter]);if(void 0===targetElement||!defaultCurrent)return null;var handleClose=function(){setMergedOpen(!1);null===onClose||void 0===onClose?void 0:onClose(mergedCurrent)};gap="boolean"===typeof mask?void 0:mask;return React.createElement(React.Fragment,null,React.createElement(_Mask.default,{zIndex:_props$scrollIntoView,prefixCls,pos:open,showMask:"boolean"===typeof mask?mask:!!mask,style:null===gap||void 0===gap?void 0:gap.style,fill:null===gap||void 0===gap?void 0:gap.color,open:mergedOpen,
animated,rootClassName:_props$prefixCls,disabledInteraction}),React.createElement(_trigger.default,(0,_extends2.default)({},props,{builtinPlacements:arrow,ref:triggerRef,popupStyle:current,popupPlacement:placement,popupVisible:mergedOpen,popupClassName:(0,_classnames.default)(_props$prefixCls,stepClassName),prefixCls,popup:function(){return React.createElement(_TourStep.default,(0,_extends2.default)({arrow:mergedArrow,key:"content",prefixCls,total:steps.length,renderPanel,onPrev:function(){onInternalChange(mergedCurrent-
1)},onNext:function(){onInternalChange(mergedCurrent+1)},onClose:handleClose,current:mergedCurrent,onFinish:function(){handleClose();null===_onFinish||void 0===_onFinish?void 0:_onFinish()}},steps[mergedCurrent],{closable:mergedClosable}))},forceRender:!1,destroyPopupOnHide:!0,zIndex:_props$scrollIntoView,getTriggerDOMNode:function(node){return node||targetElement||document.body},arrow:!!mergedArrow}),React.createElement(_portal.default,{open:mergedOpen,autoLock:!0},React.createElement("div",{className:(0,_classnames.default)(_props$prefixCls,
"".concat(prefixCls,"-target-placeholder")),style:(0,_objectSpread2.default)((0,_objectSpread2.default)({},open||CENTER_PLACEHOLDER),{},{position:"fixed",pointerEvents:"none"})}))))}}
//# sourceMappingURL=module$node_modules$$rc_component$tour$lib$Tour.js.map
