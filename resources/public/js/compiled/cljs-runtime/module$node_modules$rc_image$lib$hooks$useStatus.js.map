{
"version":3,
"file":"module$node_modules$rc_image$lib$hooks$useStatus.js",
"lineCount":3,
"mappings":"AAAAA,cAAA,CAAA,gDAAA,CAAqE,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAGzGC,MAAAA,CAAyBH,OAAA,CAAQ,kEAAR,CAC7BI,OAAOC,CAAAA,cAAP,CAAsBH,OAAtB,CAA+B,YAA/B,CAA6C,CAC3CI,MAAO,CAAA,CADoC,CAA7C,CAGAJ,QAAQK,CAAAA,OAAR,CAIAC,QAAkB,CAACC,IAAD,CAAO,CAAA,IACnBC,IAAMD,IAAKC,CAAAA,GADQ,CAErBC,oBAAsBF,IAAKE,CAAAA,mBAC3BC,KAAAA,CAAWH,IAAKG,CAAAA,QAHK,KAInBC,UAAY,GAAIC,MAAOC,CAAAA,QAAX,EAAqBJ,mBAAA,CAAsB,SAAtB,CAAkC,QAAvD,CACdK,UAAAA,CAAa,GAAIC,eAAgBV,CAAAA,OAApB,EAA6BM,SAA7B,CAAwC,CAAxC,CALQ,KAMrBK,OAASF,SAAA,CAAW,CAAX,CANY;AAOrBG,UAAYH,SAAA,CAAW,CAAX,CAPS,CAQnBI,SAAW,GAAIN,MAAOO,CAAAA,MAAX,EAAmB,CAAA,CAAnB,CARQ,CASnBC,QAAqB,OAArBA,GAAUJ,MAGd,IAAIJ,MAAOS,CAAAA,SAAX,EAAsB,QAAS,EAAG,CAChC,IAAIC,aAAe,CAAA,CACnB,IAAIC,KAAMC,CAAAA,YAAV,EAAwBhB,GAAxB,CAA6BiB,CAAAA,IAA7B,CAAkC,QAAS,CAACC,OAAD,CAAU,CAG/C,CAACA,OAAL,EAAgBJ,YAAhB,EACEL,SAAA,CAAU,OAAV,CAJiD,CAArD,CAOA,OAAO,SAAS,EAAG,CACjBK,YAAA,CAAe,CAAA,CADE,CATa,CAAlC,CAYG,CAACd,GAAD,CAZH,CAaA,IAAII,MAAOS,CAAAA,SAAX,EAAsB,QAAS,EAAG,CAC5BZ,mBAAJ,EAA2B,CAACS,QAASS,CAAAA,OAArC,CACEV,SAAA,CAAU,SAAV,CADF,CAEWG,OAFX,EAGEH,SAAA,CAAU,QAAV,CAJ8B,CAAlC,CAMG,CAACT,GAAD,CANH,CAOA,KAAIoB,OAASA,QAAe,EAAG,CAC7BX,SAAA,CAAU,QAAV,CAD6B,CAgB/B,OAAO,CAbSY,QAAkB,CAACC,GAAD,CAAM,CACtCZ,QAASS,CAAAA,OAAT,CAAmB,CAAA,CACJ,UAAf,GAAIX,MAAJ;AAAoC,IAApC,GAA4Bc,GAA5B,EAAoD,IAAK,EAAzD,GAA4CA,GAA5C,EAA8DA,GAAIC,CAAAA,QAAlE,GAA+ED,GAAIE,CAAAA,YAAnF,EAAmGF,GAAIG,CAAAA,aAAvG,IACEf,QAASS,CAAAA,OACT,CADmB,CAAA,CACnB,CAAAC,MAAA,EAFF,CAFsC,CAajC,CANYR,OAAAc,EAAWxB,IAAXwB,CAAsB,CACvC1B,IAAKE,IADkC,CAAtBwB,CAEf,CACMN,MADN,CAEGpB,GAFH,CAIG,CAA0BQ,MAA1B,CAhDgB,CAHzB,KAAID,gBAAkBd,MAAA,CAAuBH,OAAA,CAAQ,0DAAR,CAAvB,CAAtB,CACIc,OAASd,OAAA,CAAQ,iCAAR,CADb,CAEIyB,MAAQzB,OAAA,CAAQ,uCAAR,CAViG;",
"sources":["node_modules/rc-image/lib/hooks/useStatus.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_image$lib$hooks$useStatus\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useStatus;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _react = require(\"react\");\nvar _util = require(\"../util\");\nfunction useStatus(_ref) {\n  var src = _ref.src,\n    isCustomPlaceholder = _ref.isCustomPlaceholder,\n    fallback = _ref.fallback;\n  var _useState = (0, _react.useState)(isCustomPlaceholder ? 'loading' : 'normal'),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    status = _useState2[0],\n    setStatus = _useState2[1];\n  var isLoaded = (0, _react.useRef)(false);\n  var isError = status === 'error';\n\n  // https://github.com/react-component/image/pull/187\n  (0, _react.useEffect)(function () {\n    var isCurrentSrc = true;\n    (0, _util.isImageValid)(src).then(function (isValid) {\n      // https://github.com/ant-design/ant-design/issues/44948\n      // If src changes, the previous setStatus should not be triggered\n      if (!isValid && isCurrentSrc) {\n        setStatus('error');\n      }\n    });\n    return function () {\n      isCurrentSrc = false;\n    };\n  }, [src]);\n  (0, _react.useEffect)(function () {\n    if (isCustomPlaceholder && !isLoaded.current) {\n      setStatus('loading');\n    } else if (isError) {\n      setStatus('normal');\n    }\n  }, [src]);\n  var onLoad = function onLoad() {\n    setStatus('normal');\n  };\n  var getImgRef = function getImgRef(img) {\n    isLoaded.current = false;\n    if (status === 'loading' && img !== null && img !== void 0 && img.complete && (img.naturalWidth || img.naturalHeight)) {\n      isLoaded.current = true;\n      onLoad();\n    }\n  };\n  var srcAndOnload = isError && fallback ? {\n    src: fallback\n  } : {\n    onLoad: onLoad,\n    src: src\n  };\n  return [getImgRef, srcAndOnload, status];\n}\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","Object","defineProperty","value","default","useStatus","_ref","src","isCustomPlaceholder","fallback","_useState","_react","useState","_useState2","_slicedToArray2","status","setStatus","isLoaded","useRef","isError","useEffect","isCurrentSrc","_util","isImageValid","then","isValid","current","onLoad","getImgRef","img","complete","naturalWidth","naturalHeight","srcAndOnload"]
}
