shadow$provide.module$node_modules$rc_tree$lib$utils$treeUtil=function(global,require,module,exports){function getPosition(level,index){return"".concat(level,"-").concat(index)}function isTreeNode(node){return node&&node.type&&node.type.isTreeNode}function getKey(key,pos){return null!==key&&void 0!==key?key:pos}function fillFieldNames(fieldNames){fieldNames=fieldNames||{};var mergedTitle=fieldNames.title||"title";return{title:mergedTitle,_title:fieldNames._title||[mergedTitle],key:fieldNames.key||
"key",children:fieldNames.children||"children"}}function traverseDataNodes(dataNodes,callback,config){function processNode(node,index,parent,pathNodes){var children=node?node[mergeChildrenPropName]:dataNodes,pos=node?getPosition(parent.pos,index):"0",connectNodes=node?[].concat((0,_toConsumableArray2.default)(pathNodes),[node]):[];node&&(pathNodes=syntheticGetKey(node,pos),callback({node,index,pos,key:pathNodes,parentPos:parent.node?parent.pos:null,level:parent.level+1,nodes:connectNodes}));children&&
children.forEach(function(subNode,subIndex){processNode(subNode,subIndex,{node,pos,level:parent?parent.level+1:-1},connectNodes)})}var mergedConfig={};mergedConfig=(mergedConfig="object"===(0,_typeof2.default)(config)?config:{externalGetKey:config})||{};config=mergedConfig.childrenPropName;var externalGetKey=mergedConfig.externalGetKey;mergedConfig=fillFieldNames(mergedConfig.fieldNames);var fieldKey=mergedConfig.key;mergedConfig=mergedConfig.children;var mergeChildrenPropName=config||mergedConfig,
syntheticGetKey;externalGetKey?"string"===typeof externalGetKey?syntheticGetKey=function(node){return node[externalGetKey]}:"function"===typeof externalGetKey&&(syntheticGetKey=function(node){return externalGetKey(node)}):syntheticGetKey=function(node,pos){return getKey(node[fieldKey],pos)};processNode(null)}global=require("module$node_modules$$babel$runtime$helpers$interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});exports.convertDataToEntities=function(dataNodes){var _ref2=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},initWrapper=_ref2.initWrapper,processEntity=_ref2.processEntity,onProcessFinished=_ref2.onProcessFinished,childrenPropName=_ref2.childrenPropName,fieldNames=_ref2.fieldNames,legacyExternalGetKey=2<arguments.length?arguments[2]:void 0;_ref2=_ref2.externalGetKey||legacyExternalGetKey;var posEntities={},keyEntities={},wrapper={posEntities,keyEntities};initWrapper&&(wrapper=initWrapper(wrapper)||wrapper);traverseDataNodes(dataNodes,function(item){var pos=
item.pos,key=item.key,parentPos=item.parentPos;item={node:item.node,nodes:item.nodes,index:item.index,key,pos,level:item.level};key=getKey(key,pos);posEntities[pos]=item;keyEntities[key]=item;item.parent=posEntities[parentPos];item.parent&&(item.parent.children=item.parent.children||[],item.parent.children.push(item));processEntity&&processEntity(item,wrapper)},{externalGetKey:_ref2,childrenPropName,fieldNames});onProcessFinished&&onProcessFinished(wrapper);return wrapper};exports.convertNodePropsToEventData=
function(props){var expanded=props.expanded,selected=props.selected,checked=props.checked,loaded=props.loaded,loading=props.loading,halfChecked=props.halfChecked,dragOver=props.dragOver,dragOverGapTop=props.dragOverGapTop,dragOverGapBottom=props.dragOverGapBottom,pos=props.pos,active=props.active,eventKey=props.eventKey;expanded=(0,_objectSpread2.default)((0,_objectSpread2.default)({},props.data),{},{expanded,selected,checked,loaded,loading,halfChecked,dragOver,dragOverGapTop,dragOverGapBottom,pos,
active,key:eventKey});"props"in expanded||Object.defineProperty(expanded,"props",{get:function(){(0,_warning.default)(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`.");return props}});return expanded};exports.convertTreeToData=function(rootNodes){function dig(node){return(0,_toArray.default)(node).map(function(treeNode){if(!isTreeNode(treeNode))return(0,_warning.default)(!treeNode,"Tree/TreeNode can only accept TreeNode as children."),
null;var key=treeNode.key,_treeNode$props=treeNode.props;treeNode=_treeNode$props.children;_treeNode$props=(0,_objectWithoutProperties2.default)(_treeNode$props,_excluded);key=(0,_objectSpread2.default)({key},_treeNode$props);treeNode=dig(treeNode);treeNode.length&&(key.children=treeNode);return key}).filter(function(dataNode){return dataNode})}return dig(rootNodes)};exports.fillFieldNames=fillFieldNames;exports.flattenTreeData=function(treeNodeList,expandedKeys,fieldNames){function dig(list){var parent=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return list.map(function(treeNode,index){for(var pos=getPosition(parent?parent.pos:"0",index),mergedKey=getKey(treeNode[fieldKey],pos),mergedTitle,i=0;i<fieldTitles.length;i+=1){var fieldTitle=fieldTitles[i];if(void 0!==treeNode[fieldTitle]){mergedTitle=treeNode[fieldTitle];break}}index=Object.assign((0,_omit.default)(treeNode,[].concat((0,_toConsumableArray2.default)(fieldTitles),[fieldKey,fieldChildren])),{title:mergedTitle,key:mergedKey,
parent,pos,children:null,data:treeNode,isStart:[].concat((0,_toConsumableArray2.default)(parent?parent.isStart:[]),[0===index]),isEnd:[].concat((0,_toConsumableArray2.default)(parent?parent.isEnd:[]),[index===list.length-1])});flattenList.push(index);!0===expandedKeys||expandedKeySet.has(mergedKey)?index.children=dig(treeNode[fieldChildren]||[],index):index.children=[];return index})}fieldNames=fillFieldNames(fieldNames);var fieldTitles=fieldNames._title,fieldKey=fieldNames.key,fieldChildren=fieldNames.children,
expandedKeySet=new Set(!0===expandedKeys?[]:expandedKeys),flattenList=[];dig(treeNodeList);return flattenList};exports.getKey=getKey;exports.getPosition=getPosition;exports.getTreeNodeProps=function(key,_ref3){var expandedKeys=_ref3.expandedKeys,selectedKeys=_ref3.selectedKeys,loadedKeys=_ref3.loadedKeys,loadingKeys=_ref3.loadingKeys,checkedKeys=_ref3.checkedKeys,halfCheckedKeys=_ref3.halfCheckedKeys,dragOverNodeKey=_ref3.dragOverNodeKey,dropPosition=_ref3.dropPosition;_ref3=(0,_keyUtil.default)(_ref3.keyEntities,
key);return{eventKey:key,expanded:-1!==expandedKeys.indexOf(key),selected:-1!==selectedKeys.indexOf(key),loaded:-1!==loadedKeys.indexOf(key),loading:-1!==loadingKeys.indexOf(key),checked:-1!==checkedKeys.indexOf(key),halfChecked:-1!==halfCheckedKeys.indexOf(key),pos:String(_ref3?_ref3.pos:""),dragOver:dragOverNodeKey===key&&0===dropPosition,dragOverGapTop:dragOverNodeKey===key&&-1===dropPosition,dragOverGapBottom:dragOverNodeKey===key&&1===dropPosition}};exports.isTreeNode=isTreeNode;exports.traverseDataNodes=
traverseDataNodes;exports.warningWithoutKey=function(treeData,fieldNames){function dig(list){var path=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";(list||[]).forEach(function(treeNode){var key=treeNode[fieldNames.key];treeNode=treeNode[fieldNames.children];(0,_warning.default)(null!==key&&void 0!==key,"Tree node must have a certain key: [".concat(path).concat(key,"]"));var recordKey=String(key);(0,_warning.default)(!keys.has(recordKey)||null===key||void 0===key,"Same 'key' exist in the Tree: ".concat(recordKey));
keys.set(recordKey,!0);dig(treeNode,"".concat(path).concat(recordKey," \x3e "))})}var keys=new Map;dig(treeData)};var _typeof2=global(require("module$node_modules$$babel$runtime$helpers$typeof")),_toConsumableArray2=global(require("module$node_modules$$babel$runtime$helpers$toConsumableArray")),_objectSpread2=global(require("module$node_modules$$babel$runtime$helpers$objectSpread2")),_objectWithoutProperties2=global(require("module$node_modules$$babel$runtime$helpers$objectWithoutProperties")),_toArray=
global(require("module$node_modules$rc_util$lib$Children$toArray")),_omit=global(require("module$node_modules$rc_util$lib$omit")),_warning=global(require("module$node_modules$rc_util$lib$warning")),_keyUtil=global(require("module$node_modules$rc_tree$lib$utils$keyUtil")),_excluded=["children"]}
//# sourceMappingURL=module$node_modules$rc_tree$lib$utils$treeUtil.js.map
