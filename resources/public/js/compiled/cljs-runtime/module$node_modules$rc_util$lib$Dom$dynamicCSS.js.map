{
"version":3,
"file":"module$node_modules$rc_util$lib$Dom$dynamicCSS.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/rc-util/lib/Dom/dynamicCSS.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_util$lib$Dom$dynamicCSS\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clearContainerCache = clearContainerCache;\nexports.injectCSS = injectCSS;\nexports.removeCSS = removeCSS;\nexports.updateCSS = updateCSS;\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\nvar _canUseDom = _interopRequireDefault(require(\"./canUseDom\"));\nvar _contains = _interopRequireDefault(require(\"./contains\"));\nvar APPEND_ORDER = 'data-rc-order';\nvar APPEND_PRIORITY = 'data-rc-priority';\nvar MARK_KEY = \"rc-util-key\";\nvar containerCache = new Map();\nfunction getMark() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n    mark = _ref.mark;\n  if (mark) {\n    return mark.startsWith('data-') ? mark : \"data-\".concat(mark);\n  }\n  return MARK_KEY;\n}\nfunction getContainer(option) {\n  if (option.attachTo) {\n    return option.attachTo;\n  }\n  var head = document.querySelector('head');\n  return head || document.body;\n}\nfunction getOrder(prepend) {\n  if (prepend === 'queue') {\n    return 'prependQueue';\n  }\n  return prepend ? 'prepend' : 'append';\n}\n\n/**\n * Find style which inject by rc-util\n */\nfunction findStyles(container) {\n  return Array.from((containerCache.get(container) || container).children).filter(function (node) {\n    return node.tagName === 'STYLE';\n  });\n}\nfunction injectCSS(css) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (!(0, _canUseDom.default)()) {\n    return null;\n  }\n  var csp = option.csp,\n    prepend = option.prepend,\n    _option$priority = option.priority,\n    priority = _option$priority === void 0 ? 0 : _option$priority;\n  var mergedOrder = getOrder(prepend);\n  var isPrependQueue = mergedOrder === 'prependQueue';\n  var styleNode = document.createElement('style');\n  styleNode.setAttribute(APPEND_ORDER, mergedOrder);\n  if (isPrependQueue && priority) {\n    styleNode.setAttribute(APPEND_PRIORITY, \"\".concat(priority));\n  }\n  if (csp !== null && csp !== void 0 && csp.nonce) {\n    styleNode.nonce = csp === null || csp === void 0 ? void 0 : csp.nonce;\n  }\n  styleNode.innerHTML = css;\n  var container = getContainer(option);\n  var firstChild = container.firstChild;\n  if (prepend) {\n    // If is queue `prepend`, it will prepend first style and then append rest style\n    if (isPrependQueue) {\n      var existStyle = (option.styles || findStyles(container)).filter(function (node) {\n        // Ignore style which not injected by rc-util with prepend\n        if (!['prepend', 'prependQueue'].includes(node.getAttribute(APPEND_ORDER))) {\n          return false;\n        }\n\n        // Ignore style which priority less then new style\n        var nodePriority = Number(node.getAttribute(APPEND_PRIORITY) || 0);\n        return priority >= nodePriority;\n      });\n      if (existStyle.length) {\n        container.insertBefore(styleNode, existStyle[existStyle.length - 1].nextSibling);\n        return styleNode;\n      }\n    }\n\n    // Use `insertBefore` as `prepend`\n    container.insertBefore(styleNode, firstChild);\n  } else {\n    container.appendChild(styleNode);\n  }\n  return styleNode;\n}\nfunction findExistNode(key) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var container = getContainer(option);\n  return (option.styles || findStyles(container)).find(function (node) {\n    return node.getAttribute(getMark(option)) === key;\n  });\n}\nfunction removeCSS(key) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var existNode = findExistNode(key, option);\n  if (existNode) {\n    var container = getContainer(option);\n    container.removeChild(existNode);\n  }\n}\n\n/**\n * qiankun will inject `appendChild` to insert into other\n */\nfunction syncRealContainer(container, option) {\n  var cachedRealContainer = containerCache.get(container);\n\n  // Find real container when not cached or cached container removed\n  if (!cachedRealContainer || !(0, _contains.default)(document, cachedRealContainer)) {\n    var placeholderStyle = injectCSS('', option);\n    var parentNode = placeholderStyle.parentNode;\n    containerCache.set(container, parentNode);\n    container.removeChild(placeholderStyle);\n  }\n}\n\n/**\n * manually clear container cache to avoid global cache in unit testes\n */\nfunction clearContainerCache() {\n  containerCache.clear();\n}\nfunction updateCSS(css, key) {\n  var originOption = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var container = getContainer(originOption);\n  var styles = findStyles(container);\n  var option = (0, _objectSpread2.default)((0, _objectSpread2.default)({}, originOption), {}, {\n    styles: styles\n  });\n\n  // Sync real parent\n  syncRealContainer(container, option);\n  var existNode = findExistNode(key, option);\n  if (existNode) {\n    var _option$csp, _option$csp2;\n    if ((_option$csp = option.csp) !== null && _option$csp !== void 0 && _option$csp.nonce && existNode.nonce !== ((_option$csp2 = option.csp) === null || _option$csp2 === void 0 ? void 0 : _option$csp2.nonce)) {\n      var _option$csp3;\n      existNode.nonce = (_option$csp3 = option.csp) === null || _option$csp3 === void 0 ? void 0 : _option$csp3.nonce;\n    }\n    if (existNode.innerHTML !== css) {\n      existNode.innerHTML = css;\n    }\n    return existNode;\n  }\n  var newNode = injectCSS(css, option);\n  newNode.setAttribute(getMark(option), key);\n  return newNode;\n}\n};"],
"names":["shadow$provide","global","require","module","exports","getMark","mark","_ref","arguments","length","undefined","startsWith","concat","MARK_KEY","getContainer","option","attachTo","document","querySelector","head","body","findStyles","container","Array","from","children","containerCache","get","filter","node","tagName","injectCSS","css","_canUseDom","default","csp","prepend","_option$priority","priority","isPrependQueue","mergedOrder","styleNode","createElement","setAttribute","APPEND_ORDER","APPEND_PRIORITY","nonce","innerHTML","firstChild","existStyle","styles","includes","getAttribute","nodePriority","Number","insertBefore","nextSibling","appendChild","findExistNode","key","find","_interopRequireDefault","Object","defineProperty","value","clearContainerCache","clear","removeCSS","existNode","removeChild","updateCSS","originOption","_objectSpread2","cachedRealContainer","_contains","placeholderStyle","set","parentNode","_option$csp","_option$csp2","_option$csp3","newNode","Map"]
}
