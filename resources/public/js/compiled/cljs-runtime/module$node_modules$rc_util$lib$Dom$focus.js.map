{
"version":3,
"file":"module$node_modules$rc_util$lib$Dom$focus.js",
"lineCount":4,
"mappings":"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",
"sources":["node_modules/rc-util/lib/Dom/focus.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$rc_util$lib$Dom$focus\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.backLastFocusNode = backLastFocusNode;\nexports.clearLastFocusNode = clearLastFocusNode;\nexports.getFocusNodeList = getFocusNodeList;\nexports.limitTabRange = limitTabRange;\nexports.saveLastFocusNode = saveLastFocusNode;\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\nvar _isVisible = _interopRequireDefault(require(\"./isVisible\"));\nfunction focusable(node) {\n  var includePositive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if ((0, _isVisible.default)(node)) {\n    var nodeName = node.nodeName.toLowerCase();\n    var isFocusableElement =\n    // Focusable element\n    ['input', 'select', 'textarea', 'button'].includes(nodeName) ||\n    // Editable element\n    node.isContentEditable ||\n    // Anchor with href element\n    nodeName === 'a' && !!node.getAttribute('href');\n\n    // Get tabIndex\n    var tabIndexAttr = node.getAttribute('tabindex');\n    var tabIndexNum = Number(tabIndexAttr);\n\n    // Parse as number if validate\n    var tabIndex = null;\n    if (tabIndexAttr && !Number.isNaN(tabIndexNum)) {\n      tabIndex = tabIndexNum;\n    } else if (isFocusableElement && tabIndex === null) {\n      tabIndex = 0;\n    }\n\n    // Block focusable if disabled\n    if (isFocusableElement && node.disabled) {\n      tabIndex = null;\n    }\n    return tabIndex !== null && (tabIndex >= 0 || includePositive && tabIndex < 0);\n  }\n  return false;\n}\nfunction getFocusNodeList(node) {\n  var includePositive = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var res = (0, _toConsumableArray2.default)(node.querySelectorAll('*')).filter(function (child) {\n    return focusable(child, includePositive);\n  });\n  if (focusable(node, includePositive)) {\n    res.unshift(node);\n  }\n  return res;\n}\nvar lastFocusElement = null;\n\n/** @deprecated Do not use since this may failed when used in async */\nfunction saveLastFocusNode() {\n  lastFocusElement = document.activeElement;\n}\n\n/** @deprecated Do not use since this may failed when used in async */\nfunction clearLastFocusNode() {\n  lastFocusElement = null;\n}\n\n/** @deprecated Do not use since this may failed when used in async */\nfunction backLastFocusNode() {\n  if (lastFocusElement) {\n    try {\n      // \u5143\u7d20\u53ef\u80fd\u5df2\u7ecf\u88ab\u79fb\u52a8\u4e86\n      lastFocusElement.focus();\n\n      /* eslint-disable no-empty */\n    } catch (e) {\n      // empty\n    }\n    /* eslint-enable no-empty */\n  }\n}\nfunction limitTabRange(node, e) {\n  if (e.keyCode === 9) {\n    var tabNodeList = getFocusNodeList(node);\n    var lastTabNode = tabNodeList[e.shiftKey ? 0 : tabNodeList.length - 1];\n    var leavingTab = lastTabNode === document.activeElement || node === document.activeElement;\n    if (leavingTab) {\n      var target = tabNodeList[e.shiftKey ? tabNodeList.length - 1 : 0];\n      target.focus();\n      e.preventDefault();\n    }\n  }\n}\n};"],
"names":["shadow$provide","global","require","module","exports","focusable","node","includePositive","arguments","length","undefined","_isVisible","default","nodeName","toLowerCase","isFocusableElement","includes","isContentEditable","getAttribute","tabIndexAttr","tabIndexNum","Number","tabIndex","isNaN","disabled","getFocusNodeList","res","_toConsumableArray2","querySelectorAll","filter","child","unshift","_interopRequireDefault","Object","defineProperty","value","backLastFocusNode","lastFocusElement","focus","e","clearLastFocusNode","limitTabRange","keyCode","tabNodeList","lastTabNode","shiftKey","document","activeElement","target","preventDefault","saveLastFocusNode"]
}
